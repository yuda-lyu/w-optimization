/*!
 * w-optimization v1.0.12
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-optimization"]=e()}(this,(function(){"use strict";var t=Array.isArray,e="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,n=e||r||Function("return this")(),o=n.Symbol,i=Object.prototype,u=i.hasOwnProperty,a=i.toString,l=o?o.toStringTag:void 0;var f=Object.prototype.toString;var c="[object Null]",s="[object Undefined]",v=o?o.toStringTag:void 0;function h(t){return null==t?void 0===t?s:c:v&&v in Object(t)?function(t){var e=u.call(t,l),r=t[l];try{t[l]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[l]=r:delete t[l]),o}(t):function(t){return f.call(t)}(t)}function p(t){return null!=t&&"object"==typeof t}var d="[object Symbol]";function b(t){return"symbol"==typeof t||p(t)&&h(t)==d}var y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function j(e,r){if(t(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!b(e))||(g.test(e)||!y.test(e)||null!=r&&e in Object(r))}function w(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var m="[object AsyncFunction]",_="[object Function]",M="[object GeneratorFunction]",x="[object Proxy]";function O(t){if(!w(t))return!1;var e=h(t);return e==_||e==M||e==m||e==x}var A,S=n["__core-js_shared__"],R=(A=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";var k=Function.prototype.toString;function E(t){if(null!=t){try{return k.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var P=/^\[object .+?Constructor\]$/,F=Function.prototype,B=Object.prototype,$=F.toString,z=B.hasOwnProperty,I=RegExp("^"+$.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function C(t){return!(!w(t)||(e=t,R&&R in e))&&(O(t)?I:P).test(E(t));var e}function N(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return C(r)?r:void 0}var U=N(Object,"create");var D=Object.prototype.hasOwnProperty;var L=Object.prototype.hasOwnProperty;function T(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function q(t,e){return t===e||t!=t&&e!=e}function V(t,e){for(var r=t.length;r--;)if(q(t[r][0],e))return r;return-1}T.prototype.clear=function(){this.__data__=U?U(null):{},this.size=0},T.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},T.prototype.get=function(t){var e=this.__data__;if(U){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return D.call(e,t)?e[t]:void 0},T.prototype.has=function(t){var e=this.__data__;return U?void 0!==e[t]:L.call(e,t)},T.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=U&&void 0===e?"__lodash_hash_undefined__":e,this};var G=Array.prototype.splice;function W(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}W.prototype.clear=function(){this.__data__=[],this.size=0},W.prototype.delete=function(t){var e=this.__data__,r=V(e,t);return!(r<0)&&(r==e.length-1?e.pop():G.call(e,r,1),--this.size,!0)},W.prototype.get=function(t){var e=this.__data__,r=V(e,t);return r<0?void 0:e[r][1]},W.prototype.has=function(t){return V(this.__data__,t)>-1},W.prototype.set=function(t,e){var r=this.__data__,n=V(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var K=N(n,"Map");function Z(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function H(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}H.prototype.clear=function(){this.size=0,this.__data__={hash:new T,map:new(K||W),string:new T}},H.prototype.delete=function(t){var e=Z(this,t).delete(t);return this.size-=e?1:0,e},H.prototype.get=function(t){return Z(this,t).get(t)},H.prototype.has=function(t){return Z(this,t).has(t)},H.prototype.set=function(t,e){var r=Z(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};var J="Expected a function";function Q(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(J);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(Q.Cache||H),r}Q.Cache=H;var X,Y,tt,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/\\(\\)?/g,nt=(X=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(et,(function(t,r,n,o){e.push(n?o.replace(rt,"$1"):r||t)})),e},Y=Q(X,(function(t){return 500===tt.size&&tt.clear(),t})),tt=Y.cache,Y),ot=nt;function it(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var ut=1/0,at=o?o.prototype:void 0,lt=at?at.toString:void 0;function ft(e){if("string"==typeof e)return e;if(t(e))return it(e,ft)+"";if(b(e))return lt?lt.call(e):"";var r=e+"";return"0"==r&&1/e==-ut?"-0":r}function ct(t){return null==t?"":ft(t)}function st(e,r){return t(e)?e:j(e,r)?[e]:ot(ct(e))}var vt=1/0;function ht(t){if("string"==typeof t||b(t))return t;var e=t+"";return"0"==e&&1/t==-vt?"-0":e}function pt(t,e){for(var r=0,n=(e=st(e,t)).length;null!=t&&r<n;)t=t[ht(e[r++])];return r&&r==n?t:void 0}function dt(t,e,r){var n=null==t?void 0:pt(t,e);return void 0===n?r:n}var bt=Object.prototype;function yt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bt)}function gt(t,e){return function(r){return t(e(r))}}var jt=gt(Object.keys,Object),wt=Object.prototype.hasOwnProperty;function mt(t){if(!yt(t))return jt(t);var e=[];for(var r in Object(t))wt.call(t,r)&&"constructor"!=r&&e.push(r);return e}var _t=N(n,"DataView"),Mt=N(n,"Promise"),xt=N(n,"Set"),Ot=N(n,"WeakMap"),At="[object Map]",St="[object Promise]",Rt="[object Set]",kt="[object WeakMap]",Et="[object DataView]",Pt=E(_t),Ft=E(K),Bt=E(Mt),$t=E(xt),zt=E(Ot),It=h;(_t&&It(new _t(new ArrayBuffer(1)))!=Et||K&&It(new K)!=At||Mt&&It(Mt.resolve())!=St||xt&&It(new xt)!=Rt||Ot&&It(new Ot)!=kt)&&(It=function(t){var e=h(t),r="[object Object]"==e?t.constructor:void 0,n=r?E(r):"";if(n)switch(n){case Pt:return Et;case Ft:return At;case Bt:return St;case $t:return Rt;case zt:return kt}return e});var Ct=It,Nt=9007199254740991;function Ut(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Nt}function Dt(t){return null!=t&&Ut(t.length)&&!O(t)}var Lt="[object String]";function Tt(t){return function(e){return null==e?void 0:e[t]}}var qt=Tt("length"),Vt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Gt(t){return Vt.test(t)}var Wt="\\ud800-\\udfff",Kt="["+Wt+"]",Zt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ht="\\ud83c[\\udffb-\\udfff]",Jt="[^"+Wt+"]",Qt="(?:\\ud83c[\\udde6-\\uddff]){2}",Xt="[\\ud800-\\udbff][\\udc00-\\udfff]",Yt="(?:"+Zt+"|"+Ht+")"+"?",te="[\\ufe0e\\ufe0f]?",ee=te+Yt+("(?:\\u200d(?:"+[Jt,Qt,Xt].join("|")+")"+te+Yt+")*"),re="(?:"+[Jt+Zt+"?",Zt,Qt,Xt,Kt].join("|")+")",ne=RegExp(Ht+"(?="+Ht+")|"+re+ee,"g");function oe(t){return Gt(t)?function(t){for(var e=ne.lastIndex=0;ne.test(t);)++e;return e}(t):qt(t)}var ie="[object Map]",ue="[object Set]";function ae(e){if(null==e)return 0;if(Dt(e))return"string"==typeof(r=e)||!t(r)&&p(r)&&h(r)==Lt?oe(e):e.length;var r,n=Ct(e);return n==ie||n==ue?e.size:mt(e).length}function le(t){var e=this.__data__=new W(t);this.size=e.size}le.prototype.clear=function(){this.__data__=new W,this.size=0},le.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},le.prototype.get=function(t){return this.__data__.get(t)},le.prototype.has=function(t){return this.__data__.has(t)},le.prototype.set=function(t,e){var r=this.__data__;if(r instanceof W){var n=r.__data__;if(!K||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new H(n)}return r.set(t,e),this.size=r.size,this};function fe(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new H;++e<r;)this.add(t[e])}function ce(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function se(t,e){return t.has(e)}fe.prototype.add=fe.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},fe.prototype.has=function(t){return this.__data__.has(t)};var ve=1,he=2;function pe(t,e,r,n,o,i){var u=r&ve,a=t.length,l=e.length;if(a!=l&&!(u&&l>a))return!1;var f=i.get(t),c=i.get(e);if(f&&c)return f==e&&c==t;var s=-1,v=!0,h=r&he?new fe:void 0;for(i.set(t,e),i.set(e,t);++s<a;){var p=t[s],d=e[s];if(n)var b=u?n(d,p,s,e,t,i):n(p,d,s,t,e,i);if(void 0!==b){if(b)continue;v=!1;break}if(h){if(!ce(e,(function(t,e){if(!se(h,e)&&(p===t||o(p,t,r,n,i)))return h.push(e)}))){v=!1;break}}else if(p!==d&&!o(p,d,r,n,i)){v=!1;break}}return i.delete(t),i.delete(e),v}var de=n.Uint8Array;function be(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function ye(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var ge=1,je=2,we="[object Boolean]",me="[object Date]",_e="[object Error]",Me="[object Map]",xe="[object Number]",Oe="[object RegExp]",Ae="[object Set]",Se="[object String]",Re="[object Symbol]",ke="[object ArrayBuffer]",Ee="[object DataView]",Pe=o?o.prototype:void 0,Fe=Pe?Pe.valueOf:void 0;function Be(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function $e(e,r,n){var o=r(e);return t(e)?o:Be(o,n(e))}function ze(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i}function Ie(){return[]}var Ce=Object.prototype.propertyIsEnumerable,Ne=Object.getOwnPropertySymbols,Ue=Ne?function(t){return null==t?[]:(t=Object(t),ze(Ne(t),(function(e){return Ce.call(t,e)})))}:Ie;function De(t){return p(t)&&"[object Arguments]"==h(t)}var Le=Object.prototype,Te=Le.hasOwnProperty,qe=Le.propertyIsEnumerable,Ve=De(function(){return arguments}())?De:function(t){return p(t)&&Te.call(t,"callee")&&!qe.call(t,"callee")},Ge=Ve;var We="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ke=We&&"object"==typeof module&&module&&!module.nodeType&&module,Ze=Ke&&Ke.exports===We?n.Buffer:void 0,He=(Ze?Ze.isBuffer:void 0)||function(){return!1},Je=9007199254740991,Qe=/^(?:0|[1-9]\d*)$/;function Xe(t,e){var r=typeof t;return!!(e=null==e?Je:e)&&("number"==r||"symbol"!=r&&Qe.test(t))&&t>-1&&t%1==0&&t<e}var Ye={};function tr(t){return function(e){return t(e)}}Ye["[object Float32Array]"]=Ye["[object Float64Array]"]=Ye["[object Int8Array]"]=Ye["[object Int16Array]"]=Ye["[object Int32Array]"]=Ye["[object Uint8Array]"]=Ye["[object Uint8ClampedArray]"]=Ye["[object Uint16Array]"]=Ye["[object Uint32Array]"]=!0,Ye["[object Arguments]"]=Ye["[object Array]"]=Ye["[object ArrayBuffer]"]=Ye["[object Boolean]"]=Ye["[object DataView]"]=Ye["[object Date]"]=Ye["[object Error]"]=Ye["[object Function]"]=Ye["[object Map]"]=Ye["[object Number]"]=Ye["[object Object]"]=Ye["[object RegExp]"]=Ye["[object Set]"]=Ye["[object String]"]=Ye["[object WeakMap]"]=!1;var er="object"==typeof exports&&exports&&!exports.nodeType&&exports,rr=er&&"object"==typeof module&&module&&!module.nodeType&&module,nr=rr&&rr.exports===er&&e.process,or=function(){try{var t=rr&&rr.require&&rr.require("util").types;return t||nr&&nr.binding&&nr.binding("util")}catch(t){}}(),ir=or&&or.isTypedArray,ur=ir?tr(ir):function(t){return p(t)&&Ut(t.length)&&!!Ye[h(t)]},ar=Object.prototype.hasOwnProperty;function lr(e,r){var n=t(e),o=!n&&Ge(e),i=!n&&!o&&He(e),u=!n&&!o&&!i&&ur(e),a=n||o||i||u,l=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(e.length,String):[],f=l.length;for(var c in e)!r&&!ar.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||u&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Xe(c,f))||l.push(c);return l}function fr(t){return Dt(t)?lr(t):mt(t)}function cr(t){return $e(t,fr,Ue)}var sr=1,vr=Object.prototype.hasOwnProperty;var hr=1,pr="[object Arguments]",dr="[object Array]",br="[object Object]",yr=Object.prototype.hasOwnProperty;function gr(e,r,n,o,i,u){var a=t(e),l=t(r),f=a?dr:Ct(e),c=l?dr:Ct(r),s=(f=f==pr?br:f)==br,v=(c=c==pr?br:c)==br,h=f==c;if(h&&He(e)){if(!He(r))return!1;a=!0,s=!1}if(h&&!s)return u||(u=new le),a||ur(e)?pe(e,r,n,o,i,u):function(t,e,r,n,o,i,u){switch(r){case Ee:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ke:return!(t.byteLength!=e.byteLength||!i(new de(t),new de(e)));case we:case me:case xe:return q(+t,+e);case _e:return t.name==e.name&&t.message==e.message;case Oe:case Se:return t==e+"";case Me:var a=be;case Ae:var l=n&ge;if(a||(a=ye),t.size!=e.size&&!l)return!1;var f=u.get(t);if(f)return f==e;n|=je,u.set(t,e);var c=pe(a(t),a(e),n,o,i,u);return u.delete(t),c;case Re:if(Fe)return Fe.call(t)==Fe.call(e)}return!1}(e,r,f,n,o,i,u);if(!(n&hr)){var p=s&&yr.call(e,"__wrapped__"),d=v&&yr.call(r,"__wrapped__");if(p||d){var b=p?e.value():e,y=d?r.value():r;return u||(u=new le),i(b,y,n,o,u)}}return!!h&&(u||(u=new le),function(t,e,r,n,o,i){var u=r&sr,a=cr(t),l=a.length;if(l!=cr(e).length&&!u)return!1;for(var f=l;f--;){var c=a[f];if(!(u?c in e:vr.call(e,c)))return!1}var s=i.get(t),v=i.get(e);if(s&&v)return s==e&&v==t;var h=!0;i.set(t,e),i.set(e,t);for(var p=u;++f<l;){var d=t[c=a[f]],b=e[c];if(n)var y=u?n(b,d,c,e,t,i):n(d,b,c,t,e,i);if(!(void 0===y?d===b||o(d,b,r,n,i):y)){h=!1;break}p||(p="constructor"==c)}if(h&&!p){var g=t.constructor,j=e.constructor;g==j||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof j&&j instanceof j||(h=!1)}return i.delete(t),i.delete(e),h}(e,r,n,o,i,u))}function jr(t,e,r,n,o){return t===e||(null==t||null==e||!p(t)&&!p(e)?t!=t&&e!=e:gr(t,e,r,n,jr,o))}var wr=1,mr=2;function _r(t){return t==t&&!w(t)}function Mr(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function xr(t){var e=function(t){for(var e=fr(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,_r(o)]}return e}(t);return 1==e.length&&e[0][2]?Mr(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,u=!n;if(null==t)return!i;for(t=Object(t);o--;){var a=r[o];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var l=(a=r[o])[0],f=t[l],c=a[1];if(u&&a[2]){if(void 0===f&&!(l in t))return!1}else{var s=new le;if(n)var v=n(f,c,l,t,e,s);if(!(void 0===v?jr(c,f,wr|mr,n,s):v))return!1}}return!0}(r,t,e)}}function Or(t,e){return null!=t&&e in Object(t)}function Ar(e,r){return null!=e&&function(e,r,n){for(var o=-1,i=(r=st(r,e)).length,u=!1;++o<i;){var a=ht(r[o]);if(!(u=null!=e&&n(e,a)))break;e=e[a]}return u||++o!=i?u:!!(i=null==e?0:e.length)&&Ut(i)&&Xe(a,i)&&(t(e)||Ge(e))}(e,r,Or)}var Sr=1,Rr=2;function kr(t){return t}function Er(t){return j(t)?Tt(ht(t)):function(t){return function(e){return pt(e,t)}}(t)}function Pr(e){return"function"==typeof e?e:null==e?kr:"object"==typeof e?t(e)?(r=e[0],n=e[1],j(r)&&_r(n)?Mr(ht(r),n):function(t){var e=dt(t,r);return void 0===e&&e===n?Ar(t,r):jr(n,e,Sr|Rr)}):xr(e):Er(e);var r,n}var Fr,Br=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),u=i.length;u--;){var a=i[Fr?u:++n];if(!1===e(o[a],a,o))break}return t};var $r=function(t,e){return function(r,n){if(null==r)return r;if(!Dt(r))return t(r,n);for(var o=r.length,i=e?o:-1,u=Object(r);(e?i--:++i<o)&&!1!==n(u[i],i,u););return r}}((function(t,e){return t&&Br(t,e,fr)})),zr=$r;function Ir(t,e){var r=-1,n=Dt(t)?Array(t.length):[];return zr(t,(function(t,o,i){n[++r]=e(t,o,i)})),n}function Cr(e,r){return(t(e)?it:Ir)(e,Pr(r))}function Nr(t,e){var r=[];return zr(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}function Ur(e,r){return(t(e)?ze:Nr)(e,Pr(r))}var Dr=o?o.isConcatSpreadable:void 0;function Lr(e){return t(e)||Ge(e)||!!(Dr&&e&&e[Dr])}function Tr(t,e,r,n,o){var i=-1,u=t.length;for(r||(r=Lr),o||(o=[]);++i<u;){var a=t[i];e>0&&r(a)?e>1?Tr(a,e-1,r,n,o):Be(o,a):n||(o[o.length]=a)}return o}function qr(t,e){if(t!==e){var r=void 0!==t,n=null===t,o=t==t,i=b(t),u=void 0!==e,a=null===e,l=e==e,f=b(e);if(!a&&!f&&!i&&t>e||i&&u&&l&&!a&&!f||n&&u&&l||!r&&l||!o)return 1;if(!n&&!i&&!f&&t<e||f&&r&&o&&!n&&!i||a&&r&&o||!u&&o||!l)return-1}return 0}function Vr(e,r,n){r=r.length?it(r,(function(e){return t(e)?function(t){return pt(t,1===e.length?e[0]:e)}:e})):[kr];var o=-1;return r=it(r,tr(Pr)),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(Ir(e,(function(t,e,n){return{criteria:it(r,(function(e){return e(t)})),index:++o,value:t}})),(function(t,e){return function(t,e,r){for(var n=-1,o=t.criteria,i=e.criteria,u=o.length,a=r.length;++n<u;){var l=qr(o[n],i[n]);if(l)return n>=a?l:l*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,n)}))}var Gr=Math.max;var Wr=function(){try{var t=N(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Kr=Wr,Zr=Kr?function(t,e){return Kr(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:kr,Hr=Zr,Jr=Date.now;var Qr=function(t){var e=0,r=0;return function(){var n=Jr(),o=16-(n-r);if(r=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Hr),Xr=Qr;function Yr(t,e,r){if(!w(r))return!1;var n=typeof e;return!!("number"==n?Dt(r)&&Xe(e,r.length):"string"==n&&e in r)&&q(r[e],t)}var tn=function(t,e){return Xr(function(t,e,r){return e=Gr(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=Gr(n.length-e,0),u=Array(i);++o<i;)u[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=r(u),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,a)}}(t,e,kr),t+"")}((function(t,e){if(null==t)return[];var r=e.length;return r>1&&Yr(t,e[0],e[1])?e=[]:r>2&&Yr(e[0],e[1],e[2])&&(e=[e[0]]),Vr(t,Tr(e,1),[])})),en=tn;function rn(t){return"[object Array]"===Object.prototype.toString.call(t)}function nn(t){return"[object Object]"===Object.prototype.toString.call(t)}function on(t){return"[object String]"===Object.prototype.toString.call(t)}function un(t){return t!=t}function an(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!function(t){if(nn(t)){for(let e in t)return!1;return!0}return!1}(t)||(!!function(t){return!(!on(t)||""!==t)}(t)||(!!function(t){return!!rn(t)&&0===t.length}(t)||!!un(t)))))}function ln(t){return!!rn(t)&&(0!==t.length&&(1!==t.length||!an(t[0])))}function fn(t){return!(!on(t)||""===t)}function cn(t){let e=!1;if(fn(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(un(t))return!1;e=!0}return e}var sn="[object Boolean]";function vn(t){return!0===(e=t)||!1===e||p(e)&&h(e)==sn;var e}var hn=/\s/;var pn=/^\s+/;function dn(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&hn.test(t.charAt(e)););return e}(t)+1).replace(pn,""):t}var bn=NaN,yn=/^[-+]0x[0-9a-f]+$/i,gn=/^0b[01]+$/i,jn=/^0o[0-7]+$/i,wn=parseInt;function mn(t){if("number"==typeof t)return t;if(b(t))return bn;if(w(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=w(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=dn(t);var r=gn.test(t);return r||jn.test(t)?wn(t.slice(2),r?2:8):yn.test(t)?bn:+t}var _n=1/0,Mn=17976931348623157e292;function xn(t){return t?(t=mn(t))===_n||t===-_n?(t<0?-1:1)*Mn:t==t?t:0:0===t?t:0}function On(t){if(!cn(t))return 0;return xn(t)}function An(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function Sn(t){let e,r=Object.prototype.toString.call(t);if(e="[object Promise]"===r,e)return!0;if("[object Function]"!==r)return!1;try{e="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return e}let Rn=0,kn=1,En=2;function Pn(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=0;return e}function Fn(t,e){let r=new Array(t),n=0;for(;n<t;)r[n]=Pn(e),n+=1;return r}function Bn(t,e,r,n,o){let i=0;for(;i<o;)r[i+n]=t[i+e],i++}function $n(t,e){let r=t[0].length,n=Pn(r);for(let o=0;o<r;++o)n[o]=t[e][o];return n}function zn(t,e){let r=t.length,n=Pn(r);for(let o=0;o<r;++o)n[o]=t[o][e];return n}function In(t,e,r){let n=Pn(r-e+1),o=0;for(let i=e;i<=r;++i,++o)n[o]=t[i];return n}function Cn(t,e){let r=0;for(let n=0;n<t.length;++n)r+=t[n]*e[n];return r}async function Nn(t,e,r,n,o,i,u,a,l){let f,c=-1,s=0,v=0,h=e+1,p=r+1,d=i,b=0,y=!1,g=!1,j=0,w=0,m=0,_=Pn(1+n),M=Fn(1+e,1+h),x=Fn(1+e,1+e),O=Fn(1+n,1+h),A=Fn(1+e,1+p),S=Pn(1+e),R=Pn(1+e),k=Pn(1+e),E=Pn(1+e),P=Pn(1+e),F=0,B=1/d;for(let t=1;t<=e;++t)M[t][h]=o[t],M[t][t]=d,x[t][t]=B;let $=h,z=!1,I="";async function C(){if(I="",F>=l&&F>0)return c=kn,I="break",null;++F,s=await t(e,r,o,_),v=0;for(let t=1;t<=r;++t)v=Math.max(v,-_[t]);_[p]=s,_[n]=v;let i=!0;if(!z){i=!1;for(let t=1;t<=n;++t)O[t][$]=_[t];if(F<=h){if($<=e)if(O[p][h]<=s)o[$]=M[$][h];else{M[$][h]=o[$];for(let t=1;t<=n;++t)O[t][$]=O[t][h],O[t][h]=_[t];for(let t=1;t<=$;++t){M[$][t]=-d,B=0;for(let e=t;e<=$;++e)B-=x[e][t];x[$][t]=B}}if(F<=e)return $=F,o[$]+=d,I="continue",null}z=!0}let a="";function C(){a="";let t="";function l(){if(t="",!i){let i=O[p][h]+b*O[n][h],u=h;for(let t=1;t<=e;++t)B=O[p][t]+b*O[n][t],B<i?(u=t,i=B):B===i&&0===b&&O[n][t]<O[n][u]&&(u=t);if(u<=e){for(let t=1;t<=n;++t)B=O[t][h],O[t][h]=O[t][u],O[t][u]=B;for(let t=1;t<=e;++t){B=M[t][u],M[t][u]=0,M[t][h]+=B;let r=0;for(let n=1;n<=e;++n)M[t][n]-=B,r-=x[n][t];x[u][t]=r}}let l=0;for(let t=1;t<=e;++t)for(let r=1;r<=e;++r)B=Cn(In($n(x,t),1,e),In(zn(M,r),1,e))-(t===r?1:0),l=Math.max(l,Math.abs(B));if(l>.1)return c=En,I="break",a="break",t="break",null;for(let t=1;t<=p;++t){_[t]=-O[t][h];for(let r=1;r<=e;++r)P[r]=O[t][r]+_[t];for(let r=1;r<=e;++r)A[r][t]=(t===p?-1:1)*Cn(In(P,1,e),In(zn(x,r),1,e))}y=!0,j=.25*d;let s=2.1*d;for(let t=1;t<=e;++t){let r=0;for(let n=1;n<=e;++n)r+=x[t][n]*x[t][n];let n=0;for(let r=1;r<=e;++r)n+=M[r][t]*M[r][t];S[t]=1/Math.sqrt(r),R[t]=Math.sqrt(n),(S[t]<j||R[t]>s)&&(y=!1)}if(!z&&!y){$=0,B=s;for(let t=1;t<=e;++t)R[t]>B&&($=t,B=R[t]);if(0===$)for(let t=1;t<=e;++t)S[t]<B&&($=t,B=S[t]);B=.5*d*S[$];for(let t=1;t<=e;++t)E[t]=B*x[$][t];let r=0,n=0;f=0;for(let t=1;t<=p;++t)f=Cn(In(zn(A,t),1,e),In(E,1,e)),t<p&&(B=O[t][h],r=Math.max(r,-f-B),n=Math.max(n,f-B));let i=b*(r-n)>2*f?-1:1;B=0;for(let t=1;t<=e;++t)E[t]=i*E[t],M[t][$]=E[t],B+=x[$][t]*E[t];for(let t=1;t<=e;++t)x[$][t]/=B;for(let t=1;t<=e;++t){if(t!==$){B=Cn(In($n(x,t),1,e),In(E,1,e));for(let r=1;r<=e;++r)x[t][r]-=B*x[$][r]}o[t]=M[t][h]+E[t]}return I="continue",a="break",t="break",null}if(g=function(t,e,r,n,o,i){let u=0,a=0,l=0,f=Fn(1+t,1+t),c=Pn(2+e),s=Pn(2+e),v=Pn(1+t),h=Pn(1+t),p=Pn(2+e),d=Pn(2+e),b=e,y=0;for(let e=1;e<=t;++e)f[e][e]=1,i[e]=0;let g=0,j=0;if(e>=1){for(let t=1;t<=e;++t)n[t]>j&&(j=n[t],g=t);for(let t=1;t<=e;++t)d[t]=t,s[t]=j-n[t]}let w=!0,m=!1;function _(){(!w||w&&0===j)&&(b=e+1,g=b,d[b]=b,s[b]=0),w=!1;let M=0,x=0,O=0,A=0;function S(){let w=b===e?j:-Cn(In(i,1,t),In(zn(r,b),1,t));if(0===x||w<M?(M=w,a=y,x=3):y>a?(a=y,x=3):--x,0===x)return null;let m=0;if(g<=y){if(g<y){let e=d[g],n=s[g],o=g;do{let e=o+1,n=d[e],i=Cn(In(zn(f,o),1,t),In(zn(r,n),1,t));u=Math.sqrt(i*i+c[e]*c[e]);let a=c[e]/u,l=i/u;c[e]=a*c[o],c[o]=u;for(let r=1;r<=t;++r)u=a*f[r][e]+l*f[r][o],f[r][e]=a*f[r][o]-l*f[r][e],f[r][o]=u;d[o]=n,s[o]=s[e],o=e}while(o<y);d[o]=e,s[o]=n}if(--y,b>e){u=1/c[y];for(let e=1;e<=t;++e)v[e]=u*f[e][y]}else{u=Cn(In(v,1,t),In(zn(f,y+1),1,t));for(let e=1;e<=t;++e)v[e]-=u*f[e][y+1]}}else{let n=d[g],o=0;for(let e=1;e<=t;++e)h[e]=r[e][n];let i=t;for(;i>y;){let e=0,r=0;for(let n=1;n<=t;++n)u=f[n][i]*h[n],e+=u,r+=Math.abs(u);let n=r+.1*Math.abs(e),a=r+.2*Math.abs(e);if((r>=n||n>=a)&&(e=0),0===o)o=e;else{let r=i+1;u=Math.sqrt(e*e+o*o);let n=e/u,a=o/u;o=u;for(let e=1;e<=t;++e)u=n*f[e][i]+a*f[e][r],f[e][r]=n*f[e][r]-a*f[e][i],f[e][i]=u}--i}if(0===o){m=-1;let o=y;do{let n=0,i=0;for(let e=1;e<=t;++e)u=f[e][o]*h[e],n+=u,i+=Math.abs(u);let a=i+.1*Math.abs(n),l=i+.2*Math.abs(n);if(i<a&&a<l){if(u=n/c[o],u>0&&d[o]<=e){let t=s[o]/u;(m<0||t<m)&&(m=t)}if(o>=2){let e=d[o];for(let n=1;n<=t;++n)h[n]-=u*r[n][e]}p[o]=u}else p[o]=0}while(--o>0);if(m<0)return null;for(let t=1;t<=y;++t)s[t]=Math.max(0,s[t]-m*p[t]);if(g<y){let e=d[g],n=s[g],o=g;do{let e=o+1,n=d[e],i=Cn(In(zn(f,o),1,t),In(zn(r,n),1,t));u=Math.sqrt(i*i+c[e]*c[e]);let a=c[e]/u,l=i/u;c[e]=a*c[o],c[o]=u;for(let r=1;r<=t;++r)u=a*f[r][e]+l*f[r][o],f[r][e]=a*f[r][o]-l*f[r][e],f[r][o]=u;d[o]=n,s[o]=s[e],o=e}while(o<y);d[o]=e,s[o]=n}if(u=Cn(In(zn(f,y),1,t),In(zn(r,n),1,t)),0===u)return null;c[y]=u,s[g]=0,s[y]=m}else++y,c[y]=o,s[g]=s[y],s[y]=0;if(d[g]=d[y],d[y]=n,b>e&&n!==b){let e=y-1,o=Cn(In(zn(f,e),1,t),In(zn(r,n),1,t));u=Math.sqrt(o*o+c[y]*c[y]);let i=c[y]/u,a=o/u;c[y]=i*c[e],c[e]=u;for(let r=1;r<=t;++r)u=i*f[r][y]+a*f[r][e],f[r][y]=i*f[r][e]-a*f[r][y],f[r][e]=u;d[y]=d[e],d[e]=n,u=s[e],s[e]=s[y],s[y]=u}if(b>e){u=1/c[y];for(let e=1;e<=t;++e)v[e]=u*f[e][y]}else{n=d[y],u=(Cn(In(v,1,t),In(zn(r,n),1,t))-1)/c[y];for(let e=1;e<=t;++e)v[e]-=u*f[e][y]}}let _=o*o,R=0,k=0;for(let e=1;e<=t;++e)Math.abs(i[e])>=1e-6*o&&(_-=i[e]*i[e]),R+=i[e]*v[e],k+=v[e]*v[e];if(_<=0)return null;if(u=Math.sqrt(k*_),Math.abs(R)>=1e-6*u&&(u=Math.sqrt(k*_+R*R)),A=_/(u+R),O=A,b===e){let t=O+.1*j;if(O>=t||t>=O+.2*j)return null;O=Math.min(O,j)}for(let e=1;e<=t;++e)h[e]=i[e]+O*v[e];if(b===e){l=j,j=0;for(let e=1;e<=y;++e){let o=d[e];u=n[o]-Cn(In(zn(r,o),1,t),In(h,1,t)),j=Math.max(j,u)}}let E=y;do{let e=0,n=0;for(let r=1;r<=t;++r)u=f[r][E]*h[r],e+=u,n+=Math.abs(u);let o=n+.1*Math.abs(e),i=n+.2*Math.abs(e);if((n>=o||o>=i)&&(e=0),p[E]=e/c[E],E>=2){let e=d[E];for(let n=1;n<=t;++n)h[n]-=p[E]*r[n][e]}}while(E-- >=2);b>e&&(p[y]=Math.max(0,p[y]));for(let e=1;e<=t;++e)h[e]=i[e]+O*v[e];if(b>y){for(let e=y+1;e<=b;++e){let o=d[e],i=j-n[o],a=j+Math.abs(n[o]);for(let e=1;e<=t;++e)u=r[e][o]*h[e],i+=u,a+=Math.abs(u);let l=a+.1*Math.abs(i),f=a+.2*Math.abs(i);(a>=l||l>=f)&&(i=0),p[e]=i}}m=1,g=0;for(let t=1;t<=b;++t)p[t]<0&&(u=s[t]/(s[t]-p[t]),u<m&&(m=u,g=t));u=1-m;for(let e=1;e<=t;++e)i[e]=u*i[e]+m*h[e];for(let t=1;t<=b;++t)s[t]=Math.max(0,u*s[t]+m*p[t]);b===e&&(j=l+m*(j-l)),g>0&&S()}if(S(),O===A)return m=!0,null;b===e&&_()}return _(),m}(e,r,A,_,d,E),!g){B=0;for(let t=1;t<=e;++t)B+=E[t]*E[t];if(B<.25*d*d)return z=!0,t="break",null}f=0;let v=0;_[p]=0;for(let t=1;t<=p;++t)f=_[t]-Cn(In(zn(A,t),1,e),In(E,1,e)),t<p&&(v=Math.max(v,f));w=O[n][h]-v;let k=w>0?f/w:0;if(b<1.5*k){b=2*k;let r=O[p][h]+b*O[n][h];for(let o=1;o<=e;++o)if(B=O[p][o]+b*O[n][o],B<r||B===r&&0===b&&O[n][o]<O[n][h])return a="continue",t="break",null}m=b*w-f;for(let t=1;t<=e;++t)o[t]=M[t][h]+E[t];return z=!0,I="continue",a="break",t="break",null}i=!1;let u=O[p][h]+b*O[n][h]-(s+b*v);0===b&&s===O[p][h]&&(m=w,u=O[n][h]-v);let l=u<=0?1:0;$=0;for(let t=1;t<=e;++t)B=Math.abs(Cn(In($n(x,t),1,e),In(E,1,e))),B>l&&($=t,l=B),k[t]=B*S[t];let F=1.1*d,C=0;for(let t=1;t<=e;++t)if(k[t]>=j||k[t]>=S[t]){if(B=R[t],u>0){B=0;for(let r=1;r<=e;++r)B+=Math.pow(E[r]-M[r][t],2);B=Math.sqrt(B)}B>F&&(C=t,F=B)}if(C>0&&($=C),0!==$){B=0;for(let t=1;t<=e;++t)M[t][$]=E[t],B+=x[$][t]*E[t];for(let t=1;t<=e;++t)x[$][t]/=B;for(let t=1;t<=e;++t)if(t!==$){B=Cn(In($n(x,t),1,e),In(E,1,e));for(let r=1;r<=e;++r)x[t][r]-=B*x[$][r]}for(let t=1;t<=n;++t)O[t][$]=_[t];if(u>0&&u>=.1*m)return a="continue",t="break",null}t="break"}do{l()}while("break"!==t);if(""!==I)return null;if(""!==a)return null;if(!y)return z=!1,a="continue",null;if(d<=u)return c=Rn,I="break",a="break",null;let F=0,C=0;if(d*=.5,d<=1.5*u&&(d=u),b>0){let t=0;for(let n=1;n<=p;++n){F=O[n][h],C=F;for(let t=1;t<=e;++t)F=Math.min(F,O[n][t]),C=Math.max(C,O[n][t]);n<=r&&F<.5*C&&(B=Math.max(C,0)-F,t=t<=0?B:Math.min(t,B))}0===t?b=0:C-F<b*t&&(b=(C-F)/t)}a="continue"}do{C()}while("break"!==a);if(""!==I)return null;I="continue"}do{await C()}while("break"!==I);for(let t=1;t<=e;++t)o[t]=M[t][h];return s=O[p][h],v=O[n][h],c}var Un="[object Number]";function Dn(t){return"number"==typeof t||p(t)&&h(t)==Un}async function Ln(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!An(t))return Promise.reject("invalid fun");if(!cn(e))return Promise.reject("xL is not a number");if(!cn(r))return Promise.reject("xU is not a number");let o=dt(n,"minTolerance");cn(o)||(o=1e-8),o=On(o);let i=dt(n,"maxIterations");cn(i)||(i=100),i=On(i);let u,a,l=0;async function f(){let e=t(...arguments);return Sn(e)&&(e=await e),l++,e}let c=2/(1+Math.sqrt(5)),s=0,v=r-c*(r-e),h=e+c*(r-e),p=await f(v),d=await f(h),b=await f(e),y=await f(r),g=e,j=r;for(;++s<i&&Math.abs(r-e)>o;)d>p?(r=h,h=v,d=p,v=r-c*(r-e),p=await f(v)):(e=v,v=h,p=d,h=e+c*(r-e),d=await f(h));if(u=.5*(r+e),a=.5*(p+d),!Dn(d)||!Dn(p)||s===i)return null;let w=null,m=null;return b<a?(w=g,m=b):y<a?(w=j,m=y):(w=u,m=a),{count:l,y:m,x:w}}async function Tn(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!An(t))return Promise.reject("invalid fun");if(!cn(e))return Promise.reject("x is not a number");let n=dt(r,"delta");cn(n)||(n=.1),n=On(n);let o=dt(r,"dxR");cn(o)&&"speed"===o?cn(o)&&(o=On(o)):o=2;let i=dt(r,"min");cn(i)||(i=-1e20),i=On(i);let u=dt(r,"max");cn(u)||(u=1e20),u=On(u);let a=0;async function l(){let e=t(...arguments);return Sn(e)&&(e=await e),a++,e}let f=e,c=e,s=e,v=await l(e),h=v,p=v,d=!1,b=1;for(;!d;)if(++b,d=!0,h<=v&&(s=f,v=h,f=Math.max(i,f-n),h=await l(f),d=!1),p<=v&&(s=c,v=p,c=Math.min(u,c+n),p=await l(c),d=!1),v=Math.min(v,h,p),(h===v&&f===i||p===v&&c===u)&&(d=!0),Dn(o)?n*=o:"speed"===o&&(n*=b<4?2:Math.exp(.5*b)),!isFinite(n))return null;return{count:a,bounded:d,min:f,max:c,guess:s,fMin:h,fMax:p,fGuess:v}}async function qn(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!An(t))return Promise.reject("invalid fun");if(!cn(e))return Promise.reject("x is not a number");let n=dt(r,"min");cn(n)&&(n=On(n));let o=dt(r,"max");cn(o)&&(o=On(o));let i=0;if(!Dn(o)||!Dn(n)){let u=await Tn(t,e,r);if(n=dt(u,"min"),o=dt(u,"max"),!Dn(n)||!Dn(o))return Promise.reject("can not find bounds by setpBracket");i+=u.count}let u=await Ln(t,n,o,r);return i+=u.count,u.count=i,u}function Vn(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function Gn(t,e,r){"__proto__"==e&&Kr?Kr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Wn=Object.prototype.hasOwnProperty;function Kn(t,e,r){var n=t[e];Wn.call(t,e)&&q(n,r)&&(void 0!==r||e in t)||Gn(t,e,r)}function Zn(t,e,r,n){var o=!r;r||(r={});for(var i=-1,u=e.length;++i<u;){var a=e[i],l=n?n(r[a],t[a],a,r,t):void 0;void 0===l&&(l=t[a]),o?Gn(r,a,l):Kn(r,a,l)}return r}var Hn=Object.prototype.hasOwnProperty;function Jn(t){if(!w(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=yt(t),r=[];for(var n in t)("constructor"!=n||!e&&Hn.call(t,n))&&r.push(n);return r}function Qn(t){return Dt(t)?lr(t,!0):Jn(t)}var Xn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Yn=Xn&&"object"==typeof module&&module&&!module.nodeType&&module,to=Yn&&Yn.exports===Xn?n.Buffer:void 0,eo=to?to.allocUnsafe:void 0;var ro=gt(Object.getPrototypeOf,Object),no=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Be(e,Ue(t)),t=ro(t);return e}:Ie,oo=no;function io(t){return $e(t,Qn,oo)}var uo=Object.prototype.hasOwnProperty;function ao(t){var e=new t.constructor(t.byteLength);return new de(e).set(new de(t)),e}var lo=/\w*$/;var fo=o?o.prototype:void 0,co=fo?fo.valueOf:void 0;var so="[object Boolean]",vo="[object Date]",ho="[object Map]",po="[object Number]",bo="[object RegExp]",yo="[object Set]",go="[object String]",jo="[object Symbol]",wo="[object ArrayBuffer]",mo="[object DataView]",_o="[object Float32Array]",Mo="[object Float64Array]",xo="[object Int8Array]",Oo="[object Int16Array]",Ao="[object Int32Array]",So="[object Uint8Array]",Ro="[object Uint8ClampedArray]",ko="[object Uint16Array]",Eo="[object Uint32Array]";function Po(t,e,r){var n,o=t.constructor;switch(e){case wo:return ao(t);case so:case vo:return new o(+t);case mo:return function(t,e){var r=e?ao(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case _o:case Mo:case xo:case Oo:case Ao:case So:case Ro:case ko:case Eo:return function(t,e){var r=e?ao(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case ho:return new o;case po:case go:return new o(t);case bo:return function(t){var e=new t.constructor(t.source,lo.exec(t));return e.lastIndex=t.lastIndex,e}(t);case yo:return new o;case jo:return n=t,co?Object(co.call(n)):{}}}var Fo=Object.create,Bo=function(){function t(){}return function(e){if(!w(e))return{};if(Fo)return Fo(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),$o=Bo;var zo=or&&or.isMap,Io=zo?tr(zo):function(t){return p(t)&&"[object Map]"==Ct(t)};var Co=or&&or.isSet,No=Co?tr(Co):function(t){return p(t)&&"[object Set]"==Ct(t)},Uo=1,Do=2,Lo=4,To="[object Arguments]",qo="[object Function]",Vo="[object GeneratorFunction]",Go="[object Object]",Wo={};function Ko(e,r,n,o,i,u){var a,l=r&Uo,f=r&Do,c=r&Lo;if(n&&(a=i?n(e,o,i,u):n(e)),void 0!==a)return a;if(!w(e))return e;var s=t(e);if(s){if(a=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&uo.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(e),!l)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(e,a)}else{var v=Ct(e),h=v==qo||v==Vo;if(He(e))return function(t,e){if(e)return t.slice();var r=t.length,n=eo?eo(r):new t.constructor(r);return t.copy(n),n}(e,l);if(v==Go||v==To||h&&!i){if(a=f||h?{}:function(t){return"function"!=typeof t.constructor||yt(t)?{}:$o(ro(t))}(e),!l)return f?function(t,e){return Zn(t,oo(t),e)}(e,function(t,e){return t&&Zn(e,Qn(e),t)}(a,e)):function(t,e){return Zn(t,Ue(t),e)}(e,function(t,e){return t&&Zn(e,fr(e),t)}(a,e))}else{if(!Wo[v])return i?e:{};a=Po(e,v,l)}}u||(u=new le);var p=u.get(e);if(p)return p;u.set(e,a),No(e)?e.forEach((function(t){a.add(Ko(t,r,n,t,e,u))})):Io(e)&&e.forEach((function(t,o){a.set(o,Ko(t,r,n,o,e,u))}));var d=s?void 0:(c?f?io:cr:f?Qn:fr)(e);return Vn(d||e,(function(t,o){d&&(t=e[o=t]),Kn(a,o,Ko(t,r,n,o,e,u))})),a}Wo[To]=Wo["[object Array]"]=Wo["[object ArrayBuffer]"]=Wo["[object DataView]"]=Wo["[object Boolean]"]=Wo["[object Date]"]=Wo["[object Float32Array]"]=Wo["[object Float64Array]"]=Wo["[object Int8Array]"]=Wo["[object Int16Array]"]=Wo["[object Int32Array]"]=Wo["[object Map]"]=Wo["[object Number]"]=Wo[Go]=Wo["[object RegExp]"]=Wo["[object Set]"]=Wo["[object String]"]=Wo["[object Symbol]"]=Wo["[object Uint8Array]"]=Wo["[object Uint8ClampedArray]"]=Wo["[object Uint16Array]"]=Wo["[object Uint32Array]"]=!0,Wo["[object Error]"]=Wo[qo]=Wo["[object WeakMap]"]=!1;var Zo=1,Ho=4;function Jo(t){return Ko(t,Zo|Ho)}function Qo(t,e,r,n,o){for(let i=0;i<t.length;++i)t[i]=e*r[i]+n*o[i]}function Xo(t,e){return t.y-e.y}async function Yo(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!An(t))return Promise.reject("invalid fun");if(!ln(e))return Promise.reject("params is not an effective array");let n=ae(e),o=dt(r,"maxIterations");cn(o)||(o=200*n),o=On(o);let i=dt(r,"nonZeroDelta");cn(i)||(i=1.05),i=On(i);let u=dt(r,"delta");cn(u)||(u=.001),u=On(u);let a=dt(r,"minErrorDelta");cn(a)||(a=1e-6),a=On(a);let l=dt(r,"minTolerance");cn(l)||(l=1e-5),l=On(l);let f=dt(r,"rho");cn(f)||(f=1),f=On(f);let c=dt(r,"chi");cn(c)||(c=2),c=On(c);let s=dt(r,"psi");cn(s)||(s=-.5),s=On(s);let v=dt(r,"sigma");cn(v)||(v=.5),v=On(v);let h=0;async function p(){let e=t(...arguments);return Sn(e)&&(e=await e),h++,e}let d=new Array(n+1);d[0]=e,d[0].y=await p(e),d[0].id=0;for(let t=0;t<n;++t){let r=e.slice();r[t]=r[t]?r[t]*i:u,d[t+1]=r,d[t+1].y=await p(r),d[t+1].id=t+1}let b,y=t=>{for(let e=0;e<t.length;e++)d[n][e]=t[e];d[n].y=t.y},g=e.slice(),j=e.slice(),w=e.slice(),m=e.slice();for(let t=0;t<o;++t){d.sort(Xo),b=0;for(let t=0;t<n;++t)b=Math.max(b,Math.abs(d[0][t]-d[1][t]));if(Math.abs(d[0].y-d[n].y)<a&&b<l)break;for(let t=0;t<n;++t){g[t]=0;for(let e=0;e<n;++e)g[t]+=d[e][t];g[t]/=n}let t=d[n];if(Qo(j,1+f,g,-f,t),j.y=await p(j),j.y<d[0].y)Qo(m,1+c,g,-c,t),m.y=await p(m),m.y<j.y?y(m):y(j);else if(j.y>=d[n-1].y){let e=!1;if(j.y>t.y?(Qo(w,1+s,g,-s,t),w.y=await p(w),w.y<t.y?y(w):e=!0):(Qo(w,1-s*f,g,s*f,t),w.y=await p(w),w.y<j.y?y(w):e=!0),e){if(v>=1)break;for(let t=1;t<d.length;++t)Qo(d[t],1-v,d[0],v,d[t]),d[t].y=await p(d[t])}}else y(j)}d.sort(Xo);let _=[],M=d[0];for(let t=0;t<n;t++)_.push(M[t]);return{count:h,y:d[0].y,x:_}}function ti(t){var e=xn(t),r=e%1;return e==e?r?e-r:e:0}function ei(t){return!!cn(t)&&(t=On(t),"number"==typeof(e=t)&&e==ti(e));var e}var ri=n.isFinite,ni=Math.min;var oi=function(t){var e=Math[t];return function(t,r){if(t=mn(t),(r=null==r?0:ni(ti(r),292))&&ri(t)){var n=(ct(t)+"e").split("e");return+((n=(ct(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}("round"),ii=oi;function ui(t){if(!cn(t))return 0;t=On(t);let e=ii(t);return"0"===String(e)?0:e}function ai(t){if(!ei(t))return!1;return ui(t)>0}function li(t,e){function r(t){return rn(t)?t:[t]}if(an(t))return!1;if(0===(t=r(t)).length)return!1;if(an(t))return!1;if(0===(e=r(e)).length)return!1;for(let r=0;r<t.length;r++)for(let i=0;i<e.length;i++)if(n=t[r],o=e[i],jr(n,o))return!0;var n,o;return!1}function fi(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}function ci(e,r){var n;return(t(e)?Vn:zr)(e,"function"==typeof(n=r)?n:kr)}function si(t){if(!fn(t)&&!cn(t)&&!b(t))return"";let e="";try{e=String(t)}catch(t){}try{e=t.toString()}catch(t){}return e}function vi(t){return t!=t}function hi(t,e,r){return e==e?function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,r):function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,vi,r)}var pi="\\ud800-\\udfff",di="["+pi+"]",bi="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",yi="\\ud83c[\\udffb-\\udfff]",gi="[^"+pi+"]",ji="(?:\\ud83c[\\udde6-\\uddff]){2}",wi="[\\ud800-\\udbff][\\udc00-\\udfff]",mi="(?:"+bi+"|"+yi+")"+"?",_i="[\\ufe0e\\ufe0f]?",Mi=_i+mi+("(?:\\u200d(?:"+[gi,ji,wi].join("|")+")"+_i+mi+")*"),xi="(?:"+[gi+bi+"?",bi,ji,wi,di].join("|")+")",Oi=RegExp(yi+"(?="+yi+")|"+xi+Mi,"g");function Ai(t){return Gt(t)?function(t){return t.match(Oi)||[]}(t):function(t){return t.split("")}(t)}function Si(t,e,r){if((t=ct(t))&&(r||void 0===e))return dn(t);if(!t||!(e=ft(e)))return t;var n=Ai(t),o=Ai(e),i=function(t,e){for(var r=-1,n=t.length;++r<n&&hi(e,t[r],0)>-1;);return r}(n,o),u=function(t,e){for(var r=t.length;r--&&hi(e,t[r],0)>-1;);return r}(n,o)+1;return function(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:fi(t,e,r)}(n,i,u).join("")}var Ri=Array.prototype.reverse;function ki(t){if(!ei(t))return!1;return ui(t)>=0}function Ei(t,e){return fn(t)&&ki(e)?0===(e=ui(e))?t:function(t,e){if(!fn(t))return"";if(!ki(e))return"";if(0===(e=ui(e)))return"";let r=t.length-e;return r<0&&(r=0),t.substr(r,e)}(t,t.length-e):""}function Pi(t,e){return fn(t)&&ki(e)?0===(e=ui(e))?t:function(t,e){return fn(t)&&ki(e)?0===(e=ui(e))?"":t.substring(0,e):""}(t,t.length-e):""}function Fi(t){let e=dt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"excludeString");if(vn(e)||(e=!1),!fn(t))return"";let r=t=>t>="0"&&t<="9"||"."===t||"-"===t||"+"===t,n=Si(t);if(e){let t=n.split("");for(let e=0;e<t.length;e++)if(r(t[e])){n=Ei(n,e),i=e,u=void 0,a=void 0,t=(a=null==(o=t)?0:o.length)?fi(o,(i=u||void 0===i?1:ti(i))<0?0:i,a):[];break}t=function(t){return null==t?t:Ri.call(t)}(t);for(let e=0;e<t.length;e++)if(r(t[e])){n=Pi(n,e);break}}var o,i,u,a;return n}function Bi(t){let e=0,r=0,n=0,o=ae(t);ci(t,(t=>{cn(t)?e+=1:on(t)?r+=1:nn(t)&&(n+=1)}));let i="";return e===o?i="num":r===o?i="str":n===o?i="obj":e+r===o?i="str":console.log("eles in array are non-homogeneous",t),i}function $i(t,e){let r=[];if("num"!==e&&"str"!==e&&"files"!==e)throw new Error(`invalid type[${e}]`);if("num"===e)r=Cr(t,((t,e)=>({key:e,payload:t,value:On(t)})));else if("files"===e)r=Cr(t,((t,e)=>({key:e,payload:t,value:si(t)})));else if("str"===e){let e=Cr(t,(t=>Fi(t,{excludeString:!0}))),n=0;ci(e,(t=>{cn(t)&&n++}));let o=n===ae(e);r=Cr(t,((t,r)=>{let n=t;return o?(n=e[r],n=On(n)):n=si(n),{key:r,payload:t,value:n}}))}return r}function zi(t,e){let r=en(t,"value");return Cr(r,e?"key":"payload")}function Ii(t,e){let r=function(t,e){let r=Jo(t);return r.sort(((t,r)=>t[e].localeCompare(r[e],"standard",{numeric:!0}))),r}(t,"value");return Cr(r,e?"key":"payload")}let Ci=0;let Ni=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start1",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];void 0===t?t=(new Date).getTime():"start1"===t&&(Ci++,t=Ci);let r=624,n=397,o=2147483648,i=2147483647,u=new Array(r),a=625,l=t=>{var e;for(Dn(t)?u[0]=t>>>0:(t=si(t),u[0]=on(e=t)?""===e?0:e.split("").reduce(((t,e)=>e.charCodeAt(0)+(t<<6)+(t<<16)-t),0):null),a=1;a<r;a++){let t=u[a-1]^u[a-1]>>>30;u[a]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+a,u[a]>>>=0}},f=()=>(()=>{let t,e=new Array(2567483615);if(a>=r){let f;for(625===a&&l(5489),f=0;f<227;f++)t=u[f]&o|u[f+1]&i,u[f]=u[f+n]^t>>>1^e[1&t];for(;f<623;f++)t=u[f]&o|u[f+1]&i,u[f]=u[f+(n-r)]^t>>>1^e[1&t];t=u[623]&o|u[0]&i,u[623]=u[396]^t>>>1^e[1&t],a=0}return t=u[a++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,t^=t>>>18,t>>>0})()*(1/4294967296);l(t);let c=null;return c=e?f:f(),c}((new Date).getTime(),!0);function Ui(){return Ni()}function Di(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2?arguments[2]:void 0;if(ei(t)||(t=0),t=ui(t),ei(e)||(e=100),e=ui(e),ai(r)||(r=1),r=ui(r),t>e)throw new Error(`vstart[${t}] > vend[${e}]`);let n=[],o=e-t;for(let r=0;r<=o;r++){let r=Ui()*(e-t+1)+t;r=Math.ceil(r),n.push(r)}let i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ln(t))return[];if(1===ae(t))return t;let r=dt(e,"localeCompare");vn(r)||(r=!1);let n=dt(e,"returnIndex");vn(n)||(n=!1);let o=dt(e,"compareKey",null),i=null;i=r?Ii:zi;let u,a=Bi(t);if(""===a)return[];if("obj"===a){if(!fn(o))return[];let e=Cr(t,((t,e)=>dt(t,o,""))),a=Bi(e);if("num"!==a&&"str"!==a)return[];{r&&(a="files");let o=i($i(e,a),!0);u=n?o:Cr(o,(e=>t[e]))}}else"num"!==a&&"str"!==a||(r&&(a="files"),u=i($i(t,a),n));return u}(n,{returnIndex:!0});return i=function(t,e,r){return t&&t.length?fi(t,0,(e=r||void 0===e?1:ti(e))<0?0:e):[]}(i,r),i}function Li(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(ei(t)||(t=0),t=ui(t),ei(e)||(e=100),e=ui(e),t>e)throw new Error(`vstart[${t}] > vend[${e}]`);let r=Ui()*(e-t+1)+t;return r=Math.ceil(r),r}function Ti(t){if(0===ae(t))throw new Error("dps is not an effective array");return{ps:Cr(t,(t=>{let e=dt(t,"values",[]);if(0===ae(e))throw new Error("dp.values is not an effective array");let r=dt(t,"n",0);if(r<=0)throw new Error("n<=0");let n=Li(0,r-1);return{ind:n,value:e[n]}})),fitness:null}}function qi(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mapping";if(!ei(t))throw new Error(`ind[${t}] in not an Integer`);if(t=ui(t),!ai(e))throw new Error(`iUp[${e}]<=0`);if(e=ui(e),"limit"===r)t=Math.min(t,e),t=Math.max(t,0);else if("mapping"===r)(t%=e)<=0&&(t+=e);else{if("random"!==r)throw new Error(`invalid mode[${r}]`);(t<0||t>e)&&(t=Li(0,e))}return t}function Vi(t,e,r){if(0===ae(r))throw new Error("dps is not an effective array");let n=dt(r,e),o=dt(n,"values",[]),i=null,u=null,a=1e20;return ci(o,((e,r)=>{let n=t-e;n=Math.abs(n),n<a&&(n=a,i=r,u=e)})),{ind:i,value:u}}let Gi={arrBinarySearch:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!ln(t))return null;let n=dt(r,"sorted");vn(n)||(n=!1),t=Cr(t=Ur(t,cn),On),t=Cr(t,((t,e)=>({v:t,k:e}))),n||(t=en(t,"v"));let o=0,i=ae(t)-1;for(;o<=i;){let r=Math.floor((o+i)/2);if(t[r].v===e)return{ind:t[r].k,indSorted:r,value:e};e<t[r].v?i=r-1:o=r+1}return null},arrBinarySearchClosest:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!ln(t))return null;let n=dt(r,"sorted");vn(n)||(n=!1),t=Cr(t=Ur(t,cn),On),t=Cr(t,((t,e)=>({v:t,k:e}))),n||(t=en(t,"v"));let o={ind:null,indSorted:null,value:null,diff:1e20},i=0,u=ae(t)-1;for(;i<=u;){let r=Math.floor((i+u)/2);if(t[r].v===e){o={ind:t[r].k,indSorted:r,value:e,diff:0};break}let n=Math.abs(e-t[r].v);o.diff>n&&(o={ind:t[r].k,indSorted:r,value:t[r].v,diff:n}),e<t[r].v?u=r-1:i=r+1}return o},binarySearch:function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!An(t))throw new Error("invalid fun");if(!cn(e))throw new Error("xMin is not a number");if(e=On(e),!cn(r))throw new Error("xMax is not a number");r=On(r);let o=dt(n,"delta");cn(o)||(o=.1),o=On(o);let i=dt(n,"maxIterations");cn(i)||(i=100),i=On(i);let u=t(e),a=t(r),l=(e+r)/2,f=t(l),c=0,s=null;for(;;){if(c++,c>i)return null;if(u<=a&&u<=f){s={y:u,x:e};break}if(a<=u&&a<=f){s={y:a,x:r};break}a>=u?(a=f,a=t(r=l)):(u=f,u=t(e=l)),l=(e+r)/2,f=t(l)}return s},cobyla:async function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!An(t))return Promise.reject("invalid fun");if(!ln(e))return Promise.reject("params is not an effective array");let n=ae(e),o=dt(r,"maxIterations");cn(o)||(o=2e3*n),o=On(o);let i=dt(r,"rhobeg");cn(i)||(i=10),i=On(i);let u=dt(r,"rhoend");cn(u)||(u=1e-5),u=On(u);let a=o,l=0,f=null,c=null,s=new Array(n);for(let t=0;t<n;t++)s[t]=e[t];let v=await async function(t,e,r,n,o,i,u,a){let l=r+2,f=Pn(e+1);f[0]=0,Bn(n,0,f,1,e);let c=Nn((async function(e,r,n,o){let i=Pn(e);Bn(n,1,i,0,e);let u=Pn(r),a=await t(e,r,i,u);return Bn(u,0,o,1,r),a}),e,r,l,f,o,i,0,a);return Bn(f,1,n,0,e),c}((async function(e,r,n,o){let i=t(n);return Sn(i)&&(i=await i),l++,(null===f||f>i)&&(f=i,c=n),i}),n,0,s,i,u,0,a);return v!==Rn?v===kn?Promise.reject("maxIterations error"):v===En?Promise.reject("rounding error"):Promise.reject("unexpected error"):{count:l,y:f,x:c}},goldenSection:Ln,goldenSectionLiberate:qn,limitBFGS:async function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!An(t))return Promise.reject("invalid fun");if(!ln(e))return Promise.reject("params is not an effective array");let n=dt(r,"maxIterations");cn(n)||(n=200),n=On(n);let o=dt(r,"minTolerance");cn(o)||(o=1e-6),o=On(o);let i=dt(r,"delta");cn(i)||(i=1e-5),i=On(i);let u=ae(e),a=Jo(e),l=0;async function f(){let e=t(...arguments);return Sn(e)&&(e=await e),l++,e}let c=function(t,e){async function r(){let e=t(...arguments);return Sn(e)&&(e=await e),e}return async function(t){let n,o,i,u=e,a=[],l=[],f=t.length;for(o=0;o<f;o++){for(i=0;i<f;i++)a[i]=o===i?t[i]+u:t[i];n=await r(a)-await r(t),l[o]=n/u}return l}}(f,i),s=await c(a),v=function(t){let e,r,n=[];for(e=0;e<t;e++){for(n[e]=[],r=0;r<t;r++)n[e][r]=0;n[e][e]=1}return n}(u),h=[],p=0,d=!1,b=-1,y=1e20,g=null;async function j(){let t,e,r=u,n=0;for(t=0;t<r;t++)n+=s[t]*s[t];if(n=Math.sqrt(n),!Dn(n))return Promise.reject("the norm of the gradient was unconverged");if(n<o)return d=!0,Promise.resolve();for(b++,t=0;t<r;t++)for(h[t]=0,e=0;e<r;e++)h[t]+=-v[t][e]*s[e];let i=await qn((async function(e){let n=[];for(t=0;t<r;t++)n[t]=a[t]+e*h[t];let o=await f(n);return y>o&&(y=o,g=n),o}),0);if(p=dt(i,"x"),!Dn(p))return Promise.reject("can not find approximate stepsize");let l=[];for(t=0;t<r;t++)l[t]=p*h[t],a[t]+=l[t];let j=await c(a),w=[];for(t=0;t<r;t++)w[t]=j[t]-s[t];s=j;let m=0;for(t=0;t<r;t++)m+=l[t]*w[t];let _=[];for(t=0;t<r;t++)for(_[t]=0,e=0;e<r;e++)_[t]+=v[t][e]*w[e];let M=0;for(t=0;t<r;t++)M+=w[t]*_[t];for(M=(m+M)/(m*m),t=0;t<r;t++)for(e=0;e<r;e++)v[t][e]+=M*l[t]*l[e]-(_[t]*l[e]+l[t]*_[e])/m}for(;!d;){if(b>n)return Promise.reject(`iterator > maxIterations[${n}]`);await j()}return{count:l,y:y,x:g}},nelderMead:Yo,setpBracket:Tn,omlDE:async function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=dt(r,"Ng","");ai(n)||(n=1e4),n=ui(n);let o=dt(r,"Np","");ai(o)||(o=40),o=ui(o);let i=ae(t),u=dt(r,"NContiguous","");ai(u)||(u=100),u=ui(u);let a=dt(r,"NRepeat","");ai(a)||(a=1),a=ui(a);let l=dt(r,"NCore","");ai(l)||(l=1e6),l=ui(l);let f=dt(r,"ModeOutLimit","");li(f,["mapping","limit","random"])||(f="mapping");let c=dt(r,"UseRepeat","");vn(c)||(c=!0);let s=dt(r,"UseImmigration","");vn(s)||(s=!0);let v=dt(r,"UseLocalSearch","");vn(v)||(v=!0);let h=dt(r,"deCrossoverFactorStart","");cn(h)||(h=.6),h=On(h);let p=dt(r,"deCrossoverFactorEnd","");cn(p)||(p=.6),p=On(p);let d=dt(r,"deCrossoverFactorDynamic","");cn(d)||(d=0),d=On(d);let b=dt(r,"deFStart","");cn(b)||(b=0),b=On(b);let y=dt(r,"deFEnd","");cn(y)||(y=1),y=On(y);let g=dt(r,"deFDynamic","");cn(g)||(g=1),g=On(g);let j=dt(r,"deLandaStart","");cn(j)||(j=0),j=On(j);let w=dt(r,"deLandaEnd","");cn(w)||(w=0),w=On(w);let m=dt(r,"deLandaDynamic","");cn(m)||(m=0),m=On(m);let _=dt(r,"deMutation","");li(_,["1R2RR","1B2RR","1R2BR","1R4RRRR","1B4RRRR","1R4BRRR","1S4BSRR"])||(_="1R2BR");let M=0,x=0,O=0,A=async(t,r)=>{O++;let n=Cr(t.ps,"value"),o=e(n);return Sn(o)&&(o=await o),{ps:t.ps,fitness:o}},S=null,R=[],k="",E=0,P=0,F=[],B=[];for(let e=0;e<o;e++){let e=Ti(t),r=await A(e);F.push(r)}F=en(F,"fitness"),R.push(Jo(F[0])),S=Jo(F[0]);let $=function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=dt(n,"deMutation",""),a=dt(n,"deCrossoverFactor",""),l=dt(n,"deF",""),f=dt(n,"deLanda",""),c=dt(n,"ModeOutLimit",""),s=null,v=null,h=null,p=null,d=null,b=function(t){if(0===ae(t))throw new Error("dps is not an effective array");return{ps:Cr(t,(t=>{if(0===ae(dt(t,"values",[])))throw new Error("dp.values is not an effective array");if(dt(t,"n",0)<=0)throw new Error("n<=0");return{ind:null,value:null}})),fitness:null}}(t),y=Di(0,o-1,o);if("1R2RR"===u)s=y[0],v=y[1],h=y[2];else if("1B2RR"===u)s=0,v=y[0],h=y[1];else if("1R2BR"===u)s=y[0],v=0,h=y[1];else if("1R4RRRR"===u)s=y[0],v=y[1],h=y[2],p=y[3],d=y[4];else if("1B4RRRR"===u)s=1,v=y[0],h=y[1],p=y[2],d=y[3];else if("1R4BRRR"===u)s=y[0],v=1,h=y[1],p=y[2],d=y[3];else{if("1S4BSRR"!==u)throw new Error(`invalid deMutation[${u}]`);s=r,v=1,h=r,p=y[2],d=y[3]}let g="3p";7===ae(u)&&(g="5p");let j=Li(0,i-1);for(let n=0;n<i;n++)if(Math.random()<a||n===j){let r=null;r="3p"===g?Math.round(e[s].ps[n].ind+l*(e[v].ps[n].ind-e[h].ps[n].ind)):Math.round(e[s].ps[n].ind+l*(e[v].ps[n].ind-e[h].ps[n].ind)+f*(e[p].ps[n].ind-e[d].ps[n].ind)),r=qi(r,t[n].n,c),b.ps[n].ind=r,b.ps[n].value=t[n].values[r]}else b.ps[n].ind=e[r].ps[n].ind,b.ps[n].value=e[r].ps[n].value;return b},z=-1;for(;;){z++;let e=null;if(h===p)e=h;else if(d<-4)e=p;else if(d>4)e=h;else if(u>1){let t;t=d>=0?Math.pow(x/(u-1),Math.exp(d)):1-Math.pow((u-1-x)/(u-1),Math.exp(-d)),e=t*(p-h)+h}else e=h;let r=null;if(b===y)r=b;else if(g<-4)r=y;else if(g>4)r=b;else if(u>1){let t;t=g>=0?Math.pow(x/(u-1),Math.exp(g)):1-Math.pow((u-1-x)/(u-1),Math.exp(-g)),r=t*(y-b)+b}else r=b;let i=null;if(j===w)i=j;else if(m<-4)i=w;else if(m>4)i=j;else if(u>1){let t;t=m>=0?Math.pow(x/(u-1),Math.exp(m)):1-Math.pow((u-1-x)/(u-1),Math.exp(-m)),i=t*(w-j)+j}else i=j;for(let n=0;n<o;n++){let o=$(t,F,n,{deMutation:_,deCrossoverFactor:e,deF:r,deLanda:i,ModeOutLimit:f}),u=await A(o);F[n].fitness>u.fitness?B[n]=u:B[n]=Jo(F[n])}B=en(B,"fitness"),R.push(Jo(B[0])),S.fitness>B[0].fitness?(S=Jo(B[0]),x=0):x+=1;let I=async()=>{for(let e=1;e<=o-1;e++){let r=Ti(t),n=await A(r);B[e]=n}B=en(B,"fitness"),x=0,M+=1};c&&x>=u&&M<a&&await I();let C=async()=>{for(let e=o-1;e>=1;e--)if(B[e-1].fitness===B[e].fitness){let r=Ti(t),n=await A(r);B[e]=n}B=en(B,"fitness")};s&&await C();let N=async()=>{let e=Cr(Jo(B[0].ps),"value"),r=await Yo((async e=>{let r=Cr(e,((e,r)=>Vi(e,r,t))),n={ps:r,fitness:null};return(await A(n)).fitness}),e);if(r.y>=B[0].fitness)return;let n={ps:r.x,fitness:r.y};B[0]=n};if(v&&await N(),z>=n?k=`stop by Ng[${n}]`:x>=u?k=`stop by iContinue[${x}] >= NContiguous[${u}]`:O>=l&&(k=`stop by iExecute[${O}] >= NCore[${l}]`),fn(k)){E=z,P=O;break}F=Jo(B)}return{bestSolution:S,hists:R,stopMode:k,stopNg:E,stopExecutions:P}}};return Gi}));
//# sourceMappingURL=w-optimization.umd.js.map
