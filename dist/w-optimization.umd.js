/*!
 * w-optimization v1.0.7
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(r="undefined"!=typeof globalThis?globalThis:r||self)["w-optimization"]=t()}(this,(function(){"use strict";var r=Array.isArray;function t(r){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t(r)}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(r){var t={exports:{}};return r(t,t.exports),t.exports}var a="object"==t(e)&&e&&e.Object===Object&&e,o="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,u=a||o||Function("return this")(),i=u.Symbol,c=Object.prototype,f=c.hasOwnProperty,s=c.toString,l=i?i.toStringTag:void 0;var v=function(r){var t=f.call(r,l),e=r[l];try{r[l]=void 0;var n=!0}catch(r){}var a=s.call(r);return n&&(t?r[l]=e:delete r[l]),a},p=Object.prototype.toString;var h=function(r){return p.call(r)},b=i?i.toStringTag:void 0;var y=function(r){return null==r?void 0===r?"[object Undefined]":"[object Null]":b&&b in Object(r)?v(r):h(r)};var d=function(r){return null!=r&&"object"==t(r)};var g=function(r){return"symbol"==t(r)||d(r)&&"[object Symbol]"==y(r)},x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;var m=function(e,n){if(r(e))return!1;var a=t(e);return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!g(e))||(j.test(e)||!x.test(e)||null!=n&&e in Object(n))};var w=function(r){var e=t(r);return null!=r&&("object"==e||"function"==e)};var _,k=function(r){if(!w(r))return!1;var t=y(r);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},O=u["__core-js_shared__"],M=(_=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"";var A=function(r){return!!M&&M in r},S=Function.prototype.toString;var P=function(r){if(null!=r){try{return S.call(r)}catch(r){}try{return r+""}catch(r){}}return""},E=/^\[object .+?Constructor\]$/,L=Function.prototype,z=Object.prototype,I=L.toString,F=z.hasOwnProperty,T=RegExp("^"+I.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var N=function(r){return!(!w(r)||A(r))&&(k(r)?T:E).test(P(r))};var B=function(r,t){return null==r?void 0:r[t]};var U=function(r,t){var e=B(r,t);return N(e)?e:void 0},$=U(Object,"create");var q=function(){this.__data__=$?$(null):{},this.size=0};var D=function(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t},G=Object.prototype.hasOwnProperty;var R=function(r){var t=this.__data__;if($){var e=t[r];return"__lodash_hash_undefined__"===e?void 0:e}return G.call(t,r)?t[r]:void 0},C=Object.prototype.hasOwnProperty;var V=function(r){var t=this.__data__;return $?void 0!==t[r]:C.call(t,r)};var W=function(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=$&&void 0===t?"__lodash_hash_undefined__":t,this};function Y(r){var t=-1,e=null==r?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Y.prototype.clear=q,Y.prototype.delete=D,Y.prototype.get=R,Y.prototype.has=V,Y.prototype.set=W;var Z=Y;var H=function(){this.__data__=[],this.size=0};var J=function(r,t){return r===t||r!=r&&t!=t};var K=function(r,t){for(var e=r.length;e--;)if(J(r[e][0],t))return e;return-1},Q=Array.prototype.splice;var X=function(r){var t=this.__data__,e=K(t,r);return!(e<0)&&(e==t.length-1?t.pop():Q.call(t,e,1),--this.size,!0)};var rr=function(r){var t=this.__data__,e=K(t,r);return e<0?void 0:t[e][1]};var tr=function(r){return K(this.__data__,r)>-1};var er=function(r,t){var e=this.__data__,n=K(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this};function nr(r){var t=-1,e=null==r?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}nr.prototype.clear=H,nr.prototype.delete=X,nr.prototype.get=rr,nr.prototype.has=tr,nr.prototype.set=er;var ar=nr,or=U(u,"Map");var ur=function(){this.size=0,this.__data__={hash:new Z,map:new(or||ar),string:new Z}};var ir=function(r){var e=t(r);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==r:null===r};var cr=function(r,t){var e=r.__data__;return ir(t)?e["string"==typeof t?"string":"hash"]:e.map};var fr=function(r){var t=cr(this,r).delete(r);return this.size-=t?1:0,t};var sr=function(r){return cr(this,r).get(r)};var lr=function(r){return cr(this,r).has(r)};var vr=function(r,t){var e=cr(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this};function pr(r){var t=-1,e=null==r?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}pr.prototype.clear=ur,pr.prototype.delete=fr,pr.prototype.get=sr,pr.prototype.has=lr,pr.prototype.set=vr;var hr=pr;function br(r,t){if("function"!=typeof r||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var e=function e(){var n=arguments,a=t?t.apply(this,n):n[0],o=e.cache;if(o.has(a))return o.get(a);var u=r.apply(this,n);return e.cache=o.set(a,u)||o,u};return e.cache=new(br.Cache||hr),e}br.Cache=hr;var yr=br;var dr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gr=/\\(\\)?/g,xr=function(r){var t=yr(r,(function(r){return 500===e.size&&e.clear(),r})),e=t.cache;return t}((function(r){var t=[];return 46===r.charCodeAt(0)&&t.push(""),r.replace(dr,(function(r,e,n,a){t.push(n?a.replace(gr,"$1"):e||r)})),t}));var jr=function(r,t){for(var e=-1,n=null==r?0:r.length,a=Array(n);++e<n;)a[e]=t(r[e],e,r);return a},mr=i?i.prototype:void 0,wr=mr?mr.toString:void 0;var _r=function t(e){if("string"==typeof e)return e;if(r(e))return jr(e,t)+"";if(g(e))return wr?wr.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};var kr=function(r){return null==r?"":_r(r)};var Or=function(t,e){return r(t)?t:m(t,e)?[t]:xr(kr(t))};var Mr=function(r){if("string"==typeof r||g(r))return r;var t=r+"";return"0"==t&&1/r==-Infinity?"-0":t};var Ar=function(r,t){for(var e=0,n=(t=Or(t,r)).length;null!=r&&e<n;)r=r[Mr(t[e++])];return e&&e==n?r:void 0};var Sr=function(r,t,e){var n=null==r?void 0:Ar(r,t);return void 0===n?e:n},Pr=Object.prototype;var Er=function(r){var t=r&&r.constructor;return r===("function"==typeof t&&t.prototype||Pr)};var Lr=function(r,t){return function(e){return r(t(e))}},zr=Lr(Object.keys,Object),Ir=Object.prototype.hasOwnProperty;var Fr=function(r){if(!Er(r))return zr(r);var t=[];for(var e in Object(r))Ir.call(r,e)&&"constructor"!=e&&t.push(e);return t},Tr=U(u,"DataView"),Nr=U(u,"Promise"),Br=U(u,"Set"),Ur=U(u,"WeakMap"),$r="[object Map]",qr="[object Promise]",Dr="[object Set]",Gr="[object WeakMap]",Rr="[object DataView]",Cr=P(Tr),Vr=P(or),Wr=P(Nr),Yr=P(Br),Zr=P(Ur),Hr=y;(Tr&&Hr(new Tr(new ArrayBuffer(1)))!=Rr||or&&Hr(new or)!=$r||Nr&&Hr(Nr.resolve())!=qr||Br&&Hr(new Br)!=Dr||Ur&&Hr(new Ur)!=Gr)&&(Hr=function(r){var t=y(r),e="[object Object]"==t?r.constructor:void 0,n=e?P(e):"";if(n)switch(n){case Cr:return Rr;case Vr:return $r;case Wr:return qr;case Yr:return Dr;case Zr:return Gr}return t});var Jr=Hr;var Kr=function(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991};var Qr=function(r){return null!=r&&Kr(r.length)&&!k(r)};var Xr=function(t){return"string"==typeof t||!r(t)&&d(t)&&"[object String]"==y(t)};var rt=function(r){return function(t){return null==t?void 0:t[r]}},tt=rt("length"),et=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var nt=function(r){return et.test(r)},at="[\\ud800-\\udfff]",ot="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ut="\\ud83c[\\udffb-\\udfff]",it="[^\\ud800-\\udfff]",ct="(?:\\ud83c[\\udde6-\\uddff]){2}",ft="[\\ud800-\\udbff][\\udc00-\\udfff]",st="(?:"+ot+"|"+ut+")"+"?",lt="[\\ufe0e\\ufe0f]?",vt=lt+st+("(?:\\u200d(?:"+[it,ct,ft].join("|")+")"+lt+st+")*"),pt="(?:"+[it+ot+"?",ot,ct,ft,at].join("|")+")",ht=RegExp(ut+"(?="+ut+")|"+pt+vt,"g");var bt=function(r){for(var t=ht.lastIndex=0;ht.test(r);)++t;return t};var yt=function(r){return nt(r)?bt(r):tt(r)};var dt=function(r){if(null==r)return 0;if(Qr(r))return Xr(r)?yt(r):r.length;var t=Jr(r);return"[object Map]"==t||"[object Set]"==t?r.size:Fr(r).length};var gt=function(){this.__data__=new ar,this.size=0};var xt=function(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e};var jt=function(r){return this.__data__.get(r)};var mt=function(r){return this.__data__.has(r)};var wt=function(r,t){var e=this.__data__;if(e instanceof ar){var n=e.__data__;if(!or||n.length<199)return n.push([r,t]),this.size=++e.size,this;e=this.__data__=new hr(n)}return e.set(r,t),this.size=e.size,this};function _t(r){var t=this.__data__=new ar(r);this.size=t.size}_t.prototype.clear=gt,_t.prototype.delete=xt,_t.prototype.get=jt,_t.prototype.has=mt,_t.prototype.set=wt;var kt=_t;var Ot=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this};var Mt=function(r){return this.__data__.has(r)};function At(r){var t=-1,e=null==r?0:r.length;for(this.__data__=new hr;++t<e;)this.add(r[t])}At.prototype.add=At.prototype.push=Ot,At.prototype.has=Mt;var St=At;var Pt=function(r,t){for(var e=-1,n=null==r?0:r.length;++e<n;)if(t(r[e],e,r))return!0;return!1};var Et=function(r,t){return r.has(t)};var Lt=function(r,t,e,n,a,o){var u=1&e,i=r.length,c=t.length;if(i!=c&&!(u&&c>i))return!1;var f=o.get(r),s=o.get(t);if(f&&s)return f==t&&s==r;var l=-1,v=!0,p=2&e?new St:void 0;for(o.set(r,t),o.set(t,r);++l<i;){var h=r[l],b=t[l];if(n)var y=u?n(b,h,l,t,r,o):n(h,b,l,r,t,o);if(void 0!==y){if(y)continue;v=!1;break}if(p){if(!Pt(t,(function(r,t){if(!Et(p,t)&&(h===r||a(h,r,e,n,o)))return p.push(t)}))){v=!1;break}}else if(h!==b&&!a(h,b,e,n,o)){v=!1;break}}return o.delete(r),o.delete(t),v},zt=u.Uint8Array;var It=function(r){var t=-1,e=Array(r.size);return r.forEach((function(r,n){e[++t]=[n,r]})),e};var Ft=function(r){var t=-1,e=Array(r.size);return r.forEach((function(r){e[++t]=r})),e},Tt=i?i.prototype:void 0,Nt=Tt?Tt.valueOf:void 0;var Bt=function(r,t,e,n,a,o,u){switch(e){case"[object DataView]":if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=t.byteLength||!o(new zt(r),new zt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return J(+r,+t);case"[object Error]":return r.name==t.name&&r.message==t.message;case"[object RegExp]":case"[object String]":return r==t+"";case"[object Map]":var i=It;case"[object Set]":var c=1&n;if(i||(i=Ft),r.size!=t.size&&!c)return!1;var f=u.get(r);if(f)return f==t;n|=2,u.set(r,t);var s=Lt(i(r),i(t),n,a,o,u);return u.delete(r),s;case"[object Symbol]":if(Nt)return Nt.call(r)==Nt.call(t)}return!1};var Ut=function(r,t){for(var e=-1,n=t.length,a=r.length;++e<n;)r[a+e]=t[e];return r};var $t=function(t,e,n){var a=e(t);return r(t)?a:Ut(a,n(t))};var qt=function(r,t){for(var e=-1,n=null==r?0:r.length,a=0,o=[];++e<n;){var u=r[e];t(u,e,r)&&(o[a++]=u)}return o};var Dt=function(){return[]},Gt=Object.prototype.propertyIsEnumerable,Rt=Object.getOwnPropertySymbols,Ct=Rt?function(r){return null==r?[]:(r=Object(r),qt(Rt(r),(function(t){return Gt.call(r,t)})))}:Dt;var Vt=function(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n};var Wt=function(r){return d(r)&&"[object Arguments]"==y(r)},Yt=Object.prototype,Zt=Yt.hasOwnProperty,Ht=Yt.propertyIsEnumerable,Jt=Wt(function(){return arguments}())?Wt:function(r){return d(r)&&Zt.call(r,"callee")&&!Ht.call(r,"callee")},Kt=Jt;var Qt=function(){return!1},Xt=n((function(r,t){var e=t&&!t.nodeType&&t,n=e&&r&&!r.nodeType&&r,a=n&&n.exports===e?u.Buffer:void 0,o=(a?a.isBuffer:void 0)||Qt;r.exports=o})),re=/^(?:0|[1-9]\d*)$/;var te=function(r,e){var n=t(r);return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&re.test(r))&&r>-1&&r%1==0&&r<e},ee={};ee["[object Float32Array]"]=ee["[object Float64Array]"]=ee["[object Int8Array]"]=ee["[object Int16Array]"]=ee["[object Int32Array]"]=ee["[object Uint8Array]"]=ee["[object Uint8ClampedArray]"]=ee["[object Uint16Array]"]=ee["[object Uint32Array]"]=!0,ee["[object Arguments]"]=ee["[object Array]"]=ee["[object ArrayBuffer]"]=ee["[object Boolean]"]=ee["[object DataView]"]=ee["[object Date]"]=ee["[object Error]"]=ee["[object Function]"]=ee["[object Map]"]=ee["[object Number]"]=ee["[object Object]"]=ee["[object RegExp]"]=ee["[object Set]"]=ee["[object String]"]=ee["[object WeakMap]"]=!1;var ne=function(r){return d(r)&&Kr(r.length)&&!!ee[y(r)]};var ae=function(r){return function(t){return r(t)}},oe=n((function(r,t){var e=t&&!t.nodeType&&t,n=e&&r&&!r.nodeType&&r,o=n&&n.exports===e&&a.process,u=function(){try{var r=n&&n.require&&n.require("util").types;return r||o&&o.binding&&o.binding("util")}catch(r){}}();r.exports=u})),ue=oe&&oe.isTypedArray,ie=ue?ae(ue):ne,ce=Object.prototype.hasOwnProperty;var fe=function(t,e){var n=r(t),a=!n&&Kt(t),o=!n&&!a&&Xt(t),u=!n&&!a&&!o&&ie(t),i=n||a||o||u,c=i?Vt(t.length,String):[],f=c.length;for(var s in t)!e&&!ce.call(t,s)||i&&("length"==s||o&&("offset"==s||"parent"==s)||u&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||te(s,f))||c.push(s);return c};var se=function(r){return Qr(r)?fe(r):Fr(r)};var le=function(r){return $t(r,se,Ct)},ve=Object.prototype.hasOwnProperty;var pe=function(r,t,e,n,a,o){var u=1&e,i=le(r),c=i.length;if(c!=le(t).length&&!u)return!1;for(var f=c;f--;){var s=i[f];if(!(u?s in t:ve.call(t,s)))return!1}var l=o.get(r),v=o.get(t);if(l&&v)return l==t&&v==r;var p=!0;o.set(r,t),o.set(t,r);for(var h=u;++f<c;){var b=r[s=i[f]],y=t[s];if(n)var d=u?n(y,b,s,t,r,o):n(b,y,s,r,t,o);if(!(void 0===d?b===y||a(b,y,e,n,o):d)){p=!1;break}h||(h="constructor"==s)}if(p&&!h){var g=r.constructor,x=t.constructor;g==x||!("constructor"in r)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof x&&x instanceof x||(p=!1)}return o.delete(r),o.delete(t),p},he="[object Arguments]",be="[object Array]",ye="[object Object]",de=Object.prototype.hasOwnProperty;var ge=function(t,e,n,a,o,u){var i=r(t),c=r(e),f=i?be:Jr(t),s=c?be:Jr(e),l=(f=f==he?ye:f)==ye,v=(s=s==he?ye:s)==ye,p=f==s;if(p&&Xt(t)){if(!Xt(e))return!1;i=!0,l=!1}if(p&&!l)return u||(u=new kt),i||ie(t)?Lt(t,e,n,a,o,u):Bt(t,e,f,n,a,o,u);if(!(1&n)){var h=l&&de.call(t,"__wrapped__"),b=v&&de.call(e,"__wrapped__");if(h||b){var y=h?t.value():t,d=b?e.value():e;return u||(u=new kt),o(y,d,n,a,u)}}return!!p&&(u||(u=new kt),pe(t,e,n,a,o,u))};var xe=function r(t,e,n,a,o){return t===e||(null==t||null==e||!d(t)&&!d(e)?t!=t&&e!=e:ge(t,e,n,a,r,o))};var je=function(r,t,e,n){var a=e.length,o=a,u=!n;if(null==r)return!o;for(r=Object(r);a--;){var i=e[a];if(u&&i[2]?i[1]!==r[i[0]]:!(i[0]in r))return!1}for(;++a<o;){var c=(i=e[a])[0],f=r[c],s=i[1];if(u&&i[2]){if(void 0===f&&!(c in r))return!1}else{var l=new kt;if(n)var v=n(f,s,c,r,t,l);if(!(void 0===v?xe(s,f,3,n,l):v))return!1}}return!0};var me=function(r){return r==r&&!w(r)};var we=function(r){for(var t=se(r),e=t.length;e--;){var n=t[e],a=r[n];t[e]=[n,a,me(a)]}return t};var _e=function(r,t){return function(e){return null!=e&&(e[r]===t&&(void 0!==t||r in Object(e)))}};var ke=function(r){var t=we(r);return 1==t.length&&t[0][2]?_e(t[0][0],t[0][1]):function(e){return e===r||je(e,r,t)}};var Oe=function(r,t){return null!=r&&t in Object(r)};var Me=function(t,e,n){for(var a=-1,o=(e=Or(e,t)).length,u=!1;++a<o;){var i=Mr(e[a]);if(!(u=null!=t&&n(t,i)))break;t=t[i]}return u||++a!=o?u:!!(o=null==t?0:t.length)&&Kr(o)&&te(i,o)&&(r(t)||Kt(t))};var Ae=function(r,t){return null!=r&&Me(r,t,Oe)};var Se=function(r,t){return m(r)&&me(t)?_e(Mr(r),t):function(e){var n=Sr(e,r);return void 0===n&&n===t?Ae(e,r):xe(t,n,3)}};var Pe=function(r){return r};var Ee=function(r){return function(t){return Ar(t,r)}};var Le=function(r){return m(r)?rt(Mr(r)):Ee(r)};var ze=function(e){return"function"==typeof e?e:null==e?Pe:"object"==t(e)?r(e)?Se(e[0],e[1]):ke(e):Le(e)};var Ie=function(r){return function(t,e,n){for(var a=-1,o=Object(t),u=n(t),i=u.length;i--;){var c=u[r?i:++a];if(!1===e(o[c],c,o))break}return t}}();var Fe=function(r,t){return function(e,n){if(null==e)return e;if(!Qr(e))return r(e,n);for(var a=e.length,o=t?a:-1,u=Object(e);(t?o--:++o<a)&&!1!==n(u[o],o,u););return e}}((function(r,t){return r&&Ie(r,t,se)}));var Te=function(r,t){var e=-1,n=Qr(r)?Array(r.length):[];return Fe(r,(function(r,a,o){n[++e]=t(r,a,o)})),n};var Ne=function(t,e){return(r(t)?jr:Te)(t,ze(e))};var Be=function(r,t){var e=[];return Fe(r,(function(r,n,a){t(r,n,a)&&e.push(r)})),e};var Ue=function(t,e){return(r(t)?qt:Be)(t,ze(e))},$e=i?i.isConcatSpreadable:void 0;var qe=function(t){return r(t)||Kt(t)||!!($e&&t&&t[$e])};var De=function r(t,e,n,a,o){var u=-1,i=t.length;for(n||(n=qe),o||(o=[]);++u<i;){var c=t[u];e>0&&n(c)?e>1?r(c,e-1,n,a,o):Ut(o,c):a||(o[o.length]=c)}return o};var Ge=function(r,t){var e=r.length;for(r.sort(t);e--;)r[e]=r[e].value;return r};var Re=function(r,t){if(r!==t){var e=void 0!==r,n=null===r,a=r==r,o=g(r),u=void 0!==t,i=null===t,c=t==t,f=g(t);if(!i&&!f&&!o&&r>t||o&&u&&c&&!i&&!f||n&&u&&c||!e&&c||!a)return 1;if(!n&&!o&&!f&&r<t||f&&e&&a&&!n&&!o||i&&e&&a||!u&&a||!c)return-1}return 0};var Ce=function(r,t,e){for(var n=-1,a=r.criteria,o=t.criteria,u=a.length,i=e.length;++n<u;){var c=Re(a[n],o[n]);if(c)return n>=i?c:c*("desc"==e[n]?-1:1)}return r.index-t.index};var Ve=function(t,e,n){e=e.length?jr(e,(function(t){return r(t)?function(r){return Ar(r,1===t.length?t[0]:t)}:t})):[Pe];var a=-1;e=jr(e,ae(ze));var o=Te(t,(function(r,t,n){return{criteria:jr(e,(function(t){return t(r)})),index:++a,value:r}}));return Ge(o,(function(r,t){return Ce(r,t,n)}))};var We=function(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)},Ye=Math.max;var Ze=function(r,t,e){return t=Ye(void 0===t?r.length-1:t,0),function(){for(var n=arguments,a=-1,o=Ye(n.length-t,0),u=Array(o);++a<o;)u[a]=n[t+a];a=-1;for(var i=Array(t+1);++a<t;)i[a]=n[a];return i[t]=e(u),We(r,this,i)}};var He=function(r){return function(){return r}},Je=function(){try{var r=U(Object,"defineProperty");return r({},"",{}),r}catch(r){}}(),Ke=Je?function(r,t){return Je(r,"toString",{configurable:!0,enumerable:!1,value:He(t),writable:!0})}:Pe,Qe=Date.now;var Xe=function(r){var t=0,e=0;return function(){var n=Qe(),a=16-(n-e);if(e=n,a>0){if(++t>=800)return arguments[0]}else t=0;return r.apply(void 0,arguments)}},rn=Xe(Ke);var tn=function(r,e,n){if(!w(n))return!1;var a=t(e);return!!("number"==a?Qr(n)&&te(e,n.length):"string"==a&&e in n)&&J(n[e],r)},en=function(r,t){return rn(Ze(r,t,Pe),r+"")}((function(r,t){if(null==r)return[];var e=t.length;return e>1&&tn(r,t[0],t[1])?t=[]:e>2&&tn(t[0],t[1],t[2])&&(t=[t[0]]),Ve(r,De(t,1),[])}));function nn(r){return"[object Array]"===Object.prototype.toString.call(r)}function an(r){if(function(r){return"[object Object]"===Object.prototype.toString.call(r)}(r)){for(var t in r)return!1;return!0}return!1}function on(r){return"[object String]"===Object.prototype.toString.call(r)}function un(r){return!!function(r){return"[object Undefined]"===Object.prototype.toString.call(r)}(r)||(!!function(r){return"[object Null]"===Object.prototype.toString.call(r)}(r)||(!!an(r)||(!!function(r){return!(!on(r)||""!==r)}(r)||!!function(r){return!!nn(r)&&0===r.length}(r))))}function cn(r){return!!nn(r)&&(0!==r.length&&(1!==r.length||!un(r[0])))}function fn(r){var t=!1;return!function(r){return!(!on(r)||""===r)}(r)?function(r){return"[object Number]"===Object.prototype.toString.call(r)}(r)&&(t=!0):t=!isNaN(Number(r)),t}var sn=function(r){return!0===r||!1===r||d(r)&&"[object Boolean]"==y(r)};function ln(r){return sn(r)}var vn=/\s/;var pn=function(r){for(var t=r.length;t--&&vn.test(r.charAt(t)););return t},hn=/^\s+/;var bn=function(r){return r?r.slice(0,pn(r)+1).replace(hn,""):r},yn=/^[-+]0x[0-9a-f]+$/i,dn=/^0b[01]+$/i,gn=/^0o[0-7]+$/i,xn=parseInt;var jn=function(r){if("number"==typeof r)return r;if(g(r))return NaN;if(w(r)){var t="function"==typeof r.valueOf?r.valueOf():r;r=w(t)?t+"":t}if("string"!=typeof r)return 0===r?r:+r;r=bn(r);var e=dn.test(r);return e||gn.test(r)?xn(r.slice(2),e?2:8):yn.test(r)?NaN:+r},mn=1/0;var wn=function(r){return r?(r=jn(r))===mn||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0};function _n(r){return fn(r)?wn(r):0}function kn(r){var t=Object.prototype.toString.call(r);return"[object Function]"===t||"[object AsyncFunction]"===t}function On(r,t,e,n,a,o,u){try{var i=r[o](u),c=i.value}catch(r){return void e(r)}i.done?t(c):Promise.resolve(c).then(n,a)}function Mn(r){return function(){var t=this,e=arguments;return new Promise((function(n,a){var o=r.apply(t,e);function u(r){On(o,n,a,u,i,"next",r)}function i(r){On(o,n,a,u,i,"throw",r)}u(void 0)}))}}var An=n((function(r){var e=function(r){var e,n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function f(r,t,e){return Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),r[t]}try{f({},"")}catch(r){f=function(r,t,e){return r[t]=e}}function s(r,t,e,n){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new P(n||[]);return o._invoke=function(r,t,e){var n=v;return function(a,o){if(n===h)throw new Error("Generator is already running");if(n===b){if("throw"===a)throw o;return L()}for(e.method=a,e.arg=o;;){var u=e.delegate;if(u){var i=M(u,e);if(i){if(i===y)continue;return i}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===v)throw n=b,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=h;var c=l(r,t,e);if("normal"===c.type){if(n=e.done?b:p,c.arg===y)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n=b,e.method="throw",e.arg=c.arg)}}}(r,e,u),o}function l(r,t,e){try{return{type:"normal",arg:r.call(t,e)}}catch(r){return{type:"throw",arg:r}}}r.wrap=s;var v="suspendedStart",p="suspendedYield",h="executing",b="completed",y={};function d(){}function g(){}function x(){}var j={};f(j,u,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(E([])));w&&w!==n&&a.call(w,u)&&(j=w);var _=x.prototype=d.prototype=Object.create(j);function k(r){["next","throw","return"].forEach((function(t){f(r,t,(function(r){return this._invoke(t,r)}))}))}function O(r,e){function n(o,u,i,c){var f=l(r[o],r,u);if("throw"!==f.type){var s=f.arg,v=s.value;return v&&"object"===t(v)&&a.call(v,"__await")?e.resolve(v.__await).then((function(r){n("next",r,i,c)}),(function(r){n("throw",r,i,c)})):e.resolve(v).then((function(r){s.value=r,i(s)}),(function(r){return n("throw",r,i,c)}))}c(f.arg)}var o;this._invoke=function(r,t){function a(){return new e((function(e,a){n(r,t,e,a)}))}return o=o?o.then(a,a):a()}}function M(r,t){var n=r.iterator[t.method];if(n===e){if(t.delegate=null,"throw"===t.method){if(r.iterator.return&&(t.method="return",t.arg=e,M(r,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var a=l(n,r.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,y;var o=a.arg;return o?o.done?(t[r.resultName]=o.value,t.next=r.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,y):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function A(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function S(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function P(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(A,this),this.reset(!0)}function E(r){if(r){var t=r[u];if(t)return t.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var n=-1,o=function t(){for(;++n<r.length;)if(a.call(r,n))return t.value=r[n],t.done=!1,t;return t.value=e,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:e,done:!0}}return g.prototype=x,f(_,"constructor",x),f(x,"constructor",g),g.displayName=f(x,c,"GeneratorFunction"),r.isGeneratorFunction=function(r){var t="function"==typeof r&&r.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,x):(r.__proto__=x,f(r,c,"GeneratorFunction")),r.prototype=Object.create(_),r},r.awrap=function(r){return{__await:r}},k(O.prototype),f(O.prototype,i,(function(){return this})),r.AsyncIterator=O,r.async=function(t,e,n,a,o){void 0===o&&(o=Promise);var u=new O(s(t,e,n,a),o);return r.isGeneratorFunction(e)?u:u.next().then((function(r){return r.done?r.value:u.next()}))},k(_),f(_,c,"Generator"),f(_,u,(function(){return this})),f(_,"toString",(function(){return"[object Generator]"})),r.keys=function(r){var t=[];for(var e in r)t.push(e);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in r)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=E,P.prototype={constructor:P,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!r)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var r=this.tryEntries[0].completion;if("throw"===r.type)throw r.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var t=this;function n(n,a){return i.type="throw",i.arg=r,t.next=n,a&&(t.method="next",t.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],i=u.completion;if("root"===u.tryLoc)return n("end");if(u.tryLoc<=this.prev){var c=a.call(u,"catchLoc"),f=a.call(u,"finallyLoc");if(c&&f){if(this.prev<u.catchLoc)return n(u.catchLoc,!0);if(this.prev<u.finallyLoc)return n(u.finallyLoc)}else if(c){if(this.prev<u.catchLoc)return n(u.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return n(u.finallyLoc)}}}},abrupt:function(r,t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===r||"continue"===r)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=r,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(u)},complete:function(r,t){if("throw"===r.type)throw r.arg;return"break"===r.type||"continue"===r.type?this.next=r.arg:"return"===r.type?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):"normal"===r.type&&t&&(this.next=t),y},finish:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===r)return this.complete(e.completion,e.afterLoc),S(e),y}},catch:function(r){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===r){var n=e.completion;if("throw"===n.type){var a=n.arg;S(e)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(r,t,n){return this.delegate={iterator:E(r),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=e),y}},r}(r.exports);try{regeneratorRuntime=e}catch(r){"object"===("undefined"==typeof globalThis?"undefined":t(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})),Sn=An;function Pn(r){var t,e=Object.prototype.toString.call(r);if(t="[object Promise]"===e)return!0;if("[object Function]"!==e)return!1;try{t="function"!=typeof r.subscribe&&"function"==typeof r.then}catch(r){}return t}function En(r){for(var t=new Array(r),e=0;e<r;e++)t[e]=0;return t}function Ln(r,t){for(var e=new Array(r),n=0;n<r;)e[n]=En(t),n+=1;return e}function zn(r,t,e,n,a){for(var o=0;o<a;)e[o+n]=r[o+t],o++}function In(r,t){for(var e=r[0].length,n=En(e),a=0;a<e;++a)n[a]=r[t][a];return n}function Fn(r,t){for(var e=r.length,n=En(e),a=0;a<e;++a)n[a]=r[a][t];return n}function Tn(r,t,e){for(var n=En(e-t+1),a=0,o=t;o<=e;++o,++a)n[a]=r[o];return n}function Nn(r,t){for(var e=0,n=0;n<r.length;++n)e+=r[n]*t[n];return e}function Bn(r,t,e,n,a,o,u,i,c){return Un.apply(this,arguments)}function Un(){return Un=Mn(Sn.mark((function r(t,e,n,a,o,u,i,c,f){var s,l,v,p,h,b,y,d,g,x,j,m,w,_,k,O,M,A,S,P,E,L,z,I,F,T,N,B,U,$,q,D,G,R,C;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(R=function(){return(R=Mn(Sn.mark((function r(){var u,c,U,G,R,C,V,W;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(W=function(){V="";var r="";function t(){if(r="",!c){for(var t=P[x][g]+m*P[a][g],u=g,i=1;i<=e;++i)(B=P[x][i]+m*P[a][i])<t?(u=i,t=B):B===t&&0===m&&P[a][i]<P[a][u]&&(u=i);if(u<=e){for(var f=1;f<=a;++f)B=P[f][g],P[f][g]=P[f][u],P[f][u]=B;for(var N=1;N<=e;++N){B=A[N][u],A[N][u]=0,A[N][g]+=B;for(var U=0,G=1;G<=e;++G)A[N][G]-=B,U-=S[G][N];S[u][N]=U}}for(var R=0,C=1;C<=e;++C)for(var W=1;W<=e;++W)B=Nn(Tn(In(S,C),1,e),Tn(Fn(A,W),1,e))-(C===W?1:0),R=Math.max(R,Math.abs(B));if(R>.1)return s=2,D="break",V="break",r="break",null;for(var Y=1;Y<=x;++Y){M[Y]=-P[Y][g];for(var Z=1;Z<=e;++Z)T[Z]=P[Y][Z]+M[Y];for(var H=1;H<=e;++H)E[H][Y]=(Y===x?-1:1)*Nn(Tn(T,1,e),Tn(Fn(S,H),1,e))}w=!0,_=l*j;for(var J=v*j,K=1;K<=e;++K){for(var Q=0,X=1;X<=e;++X)Q+=S[K][X]*S[K][X];for(var rr=0,tr=1;tr<=e;++tr)rr+=A[tr][K]*A[tr][K];L[K]=1/Math.sqrt(Q),z[K]=Math.sqrt(rr),(L[K]<_||z[K]>J)&&(w=!1)}if(!q&&!w){$=0,B=J;for(var er=1;er<=e;++er)z[er]>B&&($=er,B=z[er]);if(0===$)for(var nr=1;nr<=e;++nr)L[nr]<B&&($=nr,B=L[nr]);B=p*j*L[$];for(var ar=1;ar<=e;++ar)F[ar]=B*S[$][ar];var or=0,ur=0;d=0;for(var ir=1;ir<=x;++ir)d=Nn(Tn(Fn(E,ir),1,e),Tn(F,1,e)),ir<x&&(B=P[ir][g],or=Math.max(or,-d-B),ur=Math.max(ur,d-B));var cr=m*(or-ur)>2*d?-1:1;B=0;for(var fr=1;fr<=e;++fr)F[fr]=cr*F[fr],A[fr][$]=F[fr],B+=S[$][fr]*F[fr];for(var sr=1;sr<=e;++sr)S[$][sr]/=B;for(var lr=1;lr<=e;++lr){if(lr!==$){B=Nn(Tn(In(S,lr),1,e),Tn(F,1,e));for(var vr=1;vr<=e;++vr)S[lr][vr]-=B*S[$][vr]}o[lr]=A[lr][g]+F[lr]}return D="continue",V="break",r="break",null}if(!$n(e,n,E,M,j,F)){B=0;for(var pr=1;pr<=e;++pr)B+=F[pr]*F[pr];if(B<.25*j*j)return q=!0,r="break",null}d=0;var hr=0;M[x]=0;for(var br=1;br<=x;++br)d=M[br]-Nn(Tn(Fn(E,br),1,e),Tn(F,1,e)),br<x&&(hr=Math.max(hr,d));var yr=(k=P[a][g]-hr)>0?d/k:0;if(m<1.5*yr){m=2*yr;for(var dr=P[x][g]+m*P[a][g],gr=1;gr<=e;++gr)if((B=P[x][gr]+m*P[a][gr])<dr||B===dr&&0===m&&P[a][gr]<P[a][g])return V="continue",r="break",null}O=m*k-d;for(var xr=1;xr<=e;++xr)o[xr]=A[xr][g]+F[xr];return q=!0,D="continue",V="break",r="break",null}c=!1;var jr=P[x][g]+m*P[a][g]-(b+m*y);0===m&&b===P[x][g]&&(O=k,jr=P[a][g]-y);var mr=jr<=0?1:0;$=0;for(var wr=1;wr<=e;++wr)(B=Math.abs(Nn(Tn(In(S,wr),1,e),Tn(F,1,e))))>mr&&($=wr,mr=B),I[wr]=B*L[wr];for(var _r=h*j,kr=0,Or=1;Or<=e;++Or)if(I[Or]>=_||I[Or]>=L[Or]){if(B=z[Or],jr>0){B=0;for(var Mr=1;Mr<=e;++Mr)B+=Math.pow(F[Mr]-A[Mr][Or],2);B=Math.sqrt(B)}B>_r&&(kr=Or,_r=B)}if(kr>0&&($=kr),0!==$){B=0;for(var Ar=1;Ar<=e;++Ar)A[Ar][$]=F[Ar],B+=S[$][Ar]*F[Ar];for(var Sr=1;Sr<=e;++Sr)S[$][Sr]/=B;for(var Pr=1;Pr<=e;++Pr)if(Pr!==$){B=Nn(Tn(In(S,Pr),1,e),Tn(F,1,e));for(var Er=1;Er<=e;++Er)S[Pr][Er]-=B*S[$][Er]}for(var Lr=1;Lr<=a;++Lr)P[Lr][$]=M[Lr];if(jr>0&&jr>=.1*O)return V="continue",r="break",null}r="break"}do{t()}while("break"!==r);if(""!==D)return null;if(""!==V)return null;if(!w)return q=!1,V="continue",null;if(j<=i)return s=0,D="break",V="break",null;var u=0,f=0;if((j*=.5)<=1.5*i&&(j=i),m>0){for(var N=0,U=1;U<=x;++U){f=u=P[U][g];for(var G=1;G<=e;++G)u=Math.min(u,P[U][G]),f=Math.max(f,P[U][G]);U<=n&&u<.5*f&&(B=Math.max(f,0)-u,N=N<=0?B:Math.min(N,B))}0===N?m=0:f-u<m*N&&(m=(f-u)/N)}V="continue"},D="",!(N>=f&&N>0)){r.next=6;break}return s=1,D="break",r.abrupt("return",null);case 6:return++N,r.next=9,t(e,n,o,M);case 9:for(b=r.sent,y=0,u=1;u<=n;++u)y=Math.max(y,-M[u]);if(M[x]=b,M[a]=y,c=!0,q){r.next=26;break}for(c=!1,U=1;U<=a;++U)P[U][$]=M[U];if(!(N<=g)){r.next=25;break}if($<=e)if(P[x][g]<=b)o[$]=A[$][g];else{for(A[$][g]=o[$],G=1;G<=a;++G)P[G][$]=P[G][g],P[G][g]=M[G];for(R=1;R<=$;++R){for(A[$][R]=-j,B=0,C=R;C<=$;++C)B-=S[C][R];S[$][R]=B}}if(!(N<=e)){r.next=25;break}return o[$=N]+=j,D="continue",r.abrupt("return",null);case 25:q=!0;case 26:V="";do{W()}while("break"!==V);if(""===D){r.next=30;break}return r.abrupt("return",null);case 30:D="continue";case 31:case"end":return r.stop()}}),r)})))).apply(this,arguments)},G=function(){return R.apply(this,arguments)},s=-1,l=.25,v=2.1,p=.5,h=1.1,b=0,y=0,g=e+1,x=n+1,j=u,m=0,w=!1,!1,_=0,k=0,O=0,M=En(1+a),A=Ln(1+e,1+g),S=Ln(1+e,1+e),P=Ln(1+a,1+g),E=Ln(1+e,1+x),L=En(1+e),z=En(1+e),I=En(1+e),F=En(1+e),T=En(1+e),N=0,B=1/j,U=1;U<=e;++U)A[U][g]=o[U],A[U][U]=j,S[U][U]=B;$=g,q=!1,D="";case 34:return r.next=36,G();case 36:if("break"!==D){r.next=34;break}case 37:for(C=1;C<=e;++C)o[C]=A[C][g];return b=P[x][g],y=P[a][g],r.abrupt("return",s);case 41:case"end":return r.stop()}}),r)}))),Un.apply(this,arguments)}function $n(r,t,e,n,a,o){for(var u=0,i=0,c=0,f=Ln(1+r,1+r),s=En(2+t),l=En(2+t),v=En(1+r),p=En(1+r),h=En(2+t),b=En(2+t),y=t,d=0,g=1;g<=r;++g)f[g][g]=1,o[g]=0;var x=0,j=0;if(t>=1){for(var m=1;m<=t;++m)n[m]>j&&(j=n[m],x=m);for(var w=1;w<=t;++w)b[w]=w,l[w]=j-n[w]}var _=!0,k=!1;return function g(){(!_||_&&0===j)&&(x=y=t+1,b[y]=y,l[y]=0),_=!1;var m=0,w=0,O=0,M=0;if(function g(){var _=y===t?j:-Nn(Tn(o,1,r),Tn(Fn(e,y),1,r));if(0===w||_<m?(m=_,i=d,w=3):d>i?(i=d,w=3):--w,0===w)return null;var k=0;if(x<=d){if(x<d){var A=b[x],S=l[x],P=x;do{var E=P+1,L=b[E],z=Nn(Tn(Fn(f,P),1,r),Tn(Fn(e,L),1,r));u=Math.sqrt(z*z+s[E]*s[E]);var I=s[E]/u,F=z/u;s[E]=I*s[P],s[P]=u;for(var T=1;T<=r;++T)u=I*f[T][E]+F*f[T][P],f[T][E]=I*f[T][P]-F*f[T][E],f[T][P]=u;b[P]=L,l[P]=l[E],P=E}while(P<d);b[P]=A,l[P]=S}if(--d,y>t){u=1/s[d];for(var N=1;N<=r;++N)v[N]=u*f[N][d]}else{u=Nn(Tn(v,1,r),Tn(Fn(f,d+1),1,r));for(var B=1;B<=r;++B)v[B]-=u*f[B][d+1]}}else{for(var U=b[x],$=0,q=1;q<=r;++q)p[q]=e[q][U];for(var D=r;D>d;){for(var G=0,R=0,C=1;C<=r;++C)G+=u=f[C][D]*p[C],R+=Math.abs(u);var V=R+.1*Math.abs(G),W=R+.2*Math.abs(G);if((R>=V||V>=W)&&(G=0),0===$)$=G;else{var Y=D+1,Z=G/(u=Math.sqrt(G*G+$*$)),H=$/u;$=u;for(var J=1;J<=r;++J)u=Z*f[J][D]+H*f[J][Y],f[J][Y]=Z*f[J][Y]-H*f[J][D],f[J][D]=u}--D}if(0===$){k=-1;var K=d;do{for(var Q=0,X=0,rr=1;rr<=r;++rr)Q+=u=f[rr][K]*p[rr],X+=Math.abs(u);var tr=X+.1*Math.abs(Q),er=X+.2*Math.abs(Q);if(X<tr&&tr<er){if((u=Q/s[K])>0&&b[K]<=t){var nr=l[K]/u;(k<0||nr<k)&&(k=nr)}if(K>=2)for(var ar=b[K],or=1;or<=r;++or)p[or]-=u*e[or][ar];h[K]=u}else h[K]=0}while(--K>0);if(k<0)return null;for(var ur=1;ur<=d;++ur)l[ur]=Math.max(0,l[ur]-k*h[ur]);if(x<d){var ir=b[x],cr=l[x],fr=x;do{var sr=fr+1,lr=b[sr],vr=Nn(Tn(Fn(f,fr),1,r),Tn(Fn(e,lr),1,r));u=Math.sqrt(vr*vr+s[sr]*s[sr]);var pr=s[sr]/u,hr=vr/u;s[sr]=pr*s[fr],s[fr]=u;for(var br=1;br<=r;++br)u=pr*f[br][sr]+hr*f[br][fr],f[br][sr]=pr*f[br][fr]-hr*f[br][sr],f[br][fr]=u;b[fr]=lr,l[fr]=l[sr],fr=sr}while(fr<d);b[fr]=ir,l[fr]=cr}if(0===(u=Nn(Tn(Fn(f,d),1,r),Tn(Fn(e,U),1,r))))return null;s[d]=u,l[x]=0,l[d]=k}else++d,s[d]=$,l[x]=l[d],l[d]=0;if(b[x]=b[d],b[d]=U,y>t&&U!==y){var yr=d-1,dr=Nn(Tn(Fn(f,yr),1,r),Tn(Fn(e,U),1,r));u=Math.sqrt(dr*dr+s[d]*s[d]);var gr=s[d]/u,xr=dr/u;s[d]=gr*s[yr],s[yr]=u;for(var jr=1;jr<=r;++jr)u=gr*f[jr][d]+xr*f[jr][yr],f[jr][d]=gr*f[jr][yr]-xr*f[jr][d],f[jr][yr]=u;b[d]=b[yr],b[yr]=U,u=l[yr],l[yr]=l[d],l[d]=u}if(y>t){u=1/s[d];for(var mr=1;mr<=r;++mr)v[mr]=u*f[mr][d]}else{U=b[d],u=(Nn(Tn(v,1,r),Tn(Fn(e,U),1,r))-1)/s[d];for(var wr=1;wr<=r;++wr)v[wr]-=u*f[wr][d]}}for(var _r=a*a,kr=0,Or=0,Mr=1;Mr<=r;++Mr)Math.abs(o[Mr])>=1e-6*a&&(_r-=o[Mr]*o[Mr]),kr+=o[Mr]*v[Mr],Or+=v[Mr]*v[Mr];if(_r<=0)return null;if(u=Math.sqrt(Or*_r),Math.abs(kr)>=1e-6*u&&(u=Math.sqrt(Or*_r+kr*kr)),O=M=_r/(u+kr),y===t){var Ar=O+.1*j;if(O>=Ar||Ar>=O+.2*j)return null;O=Math.min(O,j)}for(var Sr=1;Sr<=r;++Sr)p[Sr]=o[Sr]+O*v[Sr];if(y===t){c=j,j=0;for(var Pr=1;Pr<=d;++Pr){var Er=b[Pr];u=n[Er]-Nn(Tn(Fn(e,Er),1,r),Tn(p,1,r)),j=Math.max(j,u)}}var Lr=d;do{for(var zr=0,Ir=0,Fr=1;Fr<=r;++Fr)zr+=u=f[Fr][Lr]*p[Fr],Ir+=Math.abs(u);var Tr=Ir+.1*Math.abs(zr),Nr=Ir+.2*Math.abs(zr);if((Ir>=Tr||Tr>=Nr)&&(zr=0),h[Lr]=zr/s[Lr],Lr>=2)for(var Br=b[Lr],Ur=1;Ur<=r;++Ur)p[Ur]-=h[Lr]*e[Ur][Br]}while(Lr-- >=2);y>t&&(h[d]=Math.max(0,h[d]));for(var $r=1;$r<=r;++$r)p[$r]=o[$r]+O*v[$r];if(y>d)for(var qr=d+1;qr<=y;++qr){for(var Dr=b[qr],Gr=j-n[Dr],Rr=j+Math.abs(n[Dr]),Cr=1;Cr<=r;++Cr)Gr+=u=e[Cr][Dr]*p[Cr],Rr+=Math.abs(u);var Vr=Rr+.1*Math.abs(Gr),Wr=Rr+.2*Math.abs(Gr);(Rr>=Vr||Vr>=Wr)&&(Gr=0),h[qr]=Gr}k=1,x=0;for(var Yr=1;Yr<=y;++Yr)h[Yr]<0&&(u=l[Yr]/(l[Yr]-h[Yr]))<k&&(k=u,x=Yr);u=1-k;for(var Zr=1;Zr<=r;++Zr)o[Zr]=u*o[Zr]+k*p[Zr];for(var Hr=1;Hr<=y;++Hr)l[Hr]=Math.max(0,u*l[Hr]+k*h[Hr]);y===t&&(j=c+k*(j-c)),x>0&&g()}(),O===M)return k=!0,null;y===t&&g()}(),k}function qn(r,t,e,n,a,o,u,i){return Dn.apply(this,arguments)}function Dn(){return Dn=Mn(Sn.mark((function r(t,e,n,a,o,u,i,c){var f,s,l,v;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return f=n+2,(s=En(e+1))[0]=0,zn(a,0,s,1,e),l=function(){var r=Mn(Sn.mark((function r(e,n,a,o){var u,i,c;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=En(e),zn(a,1,u,0,e),i=En(n),r.next=5,t(e,n,u,i);case 5:return c=r.sent,zn(i,0,o,1,n),r.abrupt("return",c);case 8:case"end":return r.stop()}}),r)})));return function(t,e,n,a){return r.apply(this,arguments)}}(),v=Bn(l,e,n,f,s,o,u,i,c),zn(s,1,a,0,e),r.abrupt("return",v);case 8:case"end":return r.stop()}}),r)}))),Dn.apply(this,arguments)}function Gn(){return Gn=Mn(Sn.mark((function r(t,e){var n,a,o,u,i,c,f,s,l,v,p,h,b,y,d,g,x=arguments;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(h=function(){return h=Mn(Sn.mark((function r(e,n,a,o){var u;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Pn(u=t(a))){r.next=5;break}return r.next=4,u;case 4:u=r.sent;case 5:return s++,(null===l||l>u)&&(l=u,v=a),r.abrupt("return",u);case 8:case"end":return r.stop()}}),r)}))),h.apply(this,arguments)},p=function(r,t,e,n){return h.apply(this,arguments)},n=x.length>2&&void 0!==x[2]?x[2]:{},kn(t)){r.next=5;break}return r.abrupt("return",Promise.reject("invalid fun"));case 5:if(cn(e)){r.next=7;break}return r.abrupt("return",Promise.reject("params is not an effective array"));case 7:for(a=dt(e),fn(o=Sr(n,"maxIterations"))||(o=2e3*a),o=_n(o),fn(u=Sr(n,"rhobeg"))||(u=10),u=_n(u),fn(i=Sr(n,"rhoend"))||(i=1e-5),i=_n(i),c=o,f=0,s=0,l=null,v=null,b=new Array(a),y=0;y<a;y++)b[y]=e[y];return d=0,r.next=27,qn(p,a,d,b,u,i,f,c);case 27:if(0!==(g=r.sent)){r.next=31;break}r.next=40;break;case 31:if(1!==g){r.next=35;break}return r.abrupt("return",Promise.reject("maxIterations error"));case 35:if(2!==g){r.next=39;break}return r.abrupt("return",Promise.reject("rounding error"));case 39:return r.abrupt("return",Promise.reject("unexpected error"));case 40:return r.abrupt("return",{count:s,y:l,x:v});case 41:case"end":return r.stop()}}),r)}))),Gn.apply(this,arguments)}var Rn=function(r){return"number"==typeof r||d(r)&&"[object Number]"==y(r)};function Cn(r,t,e){return Vn.apply(this,arguments)}function Vn(){return Vn=Mn(Sn.mark((function r(t,e,n){var a,o,u,i,c,f,s,l,v,p,h,b,y,d,g,x,j,m,w,_,k=arguments;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(f=function(){return f=Mn(Sn.mark((function r(){var e,n=arguments;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Pn(e=t.apply(void 0,n))){r.next=5;break}return r.next=4,e;case 4:e=r.sent;case 5:return i++,r.abrupt("return",e);case 7:case"end":return r.stop()}}),r)}))),f.apply(this,arguments)},c=function(){return f.apply(this,arguments)},a=k.length>3&&void 0!==k[3]?k[3]:{},kn(t)){r.next=5;break}return r.abrupt("return",Promise.reject("invalid fun"));case 5:if(fn(e)){r.next=7;break}return r.abrupt("return",Promise.reject("xL is not a number"));case 7:if(fn(n)){r.next=9;break}return r.abrupt("return",Promise.reject("xU is not a number"));case 9:return fn(o=Sr(a,"minTolerance"))||(o=1e-8),o=_n(o),fn(u=Sr(a,"maxIterations"))||(u=100),u=_n(u),i=0,v=2/(1+Math.sqrt(5)),p=0,h=n-v*(n-e),b=e+v*(n-e),r.next=22,c(h);case 22:return y=r.sent,r.next=25,c(b);case 25:return d=r.sent,r.next=28,c(e);case 28:return g=r.sent,r.next=31,c(n);case 31:x=r.sent,j=e,m=n;case 34:if(!(++p<u&&Math.abs(n-e)>o)){r.next=54;break}if(!(d>y)){r.next=45;break}return n=b,b=h,d=y,h=n-v*(n-e),r.next=42,c(h);case 42:y=r.sent,r.next=52;break;case 45:return e=h,h=b,y=d,b=e+v*(n-e),r.next=51,c(b);case 51:d=r.sent;case 52:r.next=34;break;case 54:if(s=.5*(n+e),l=.5*(y+d),Rn(d)&&Rn(y)&&p!==u){r.next=58;break}return r.abrupt("return",null);case 58:return w=null,_=null,g<l?(w=j,_=g):x<l?(w=m,_=x):(w=s,_=l),r.abrupt("return",{count:i,y:_,x:w});case 62:case"end":return r.stop()}}),r)}))),Vn.apply(this,arguments)}function Wn(r,t){return Yn.apply(this,arguments)}function Yn(){return Yn=Mn(Sn.mark((function r(t,e){var n,a,o,u,i,c,f,s,l,v,p,h,b,y,d,g,x=arguments;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=function(){return s=Mn(Sn.mark((function r(){var e,n=arguments;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Pn(e=t.apply(void 0,n))){r.next=5;break}return r.next=4,e;case 4:e=r.sent;case 5:return c++,r.abrupt("return",e);case 7:case"end":return r.stop()}}),r)}))),s.apply(this,arguments)},f=function(){return s.apply(this,arguments)},n=x.length>2&&void 0!==x[2]?x[2]:{},kn(t)){r.next=5;break}return r.abrupt("return",Promise.reject("invalid fun"));case 5:if(fn(e)){r.next=7;break}return r.abrupt("return",Promise.reject("x is not a number"));case 7:return fn(a=Sr(n,"delta"))||(a=.1),a=_n(a),fn(o=Sr(n,"dxR"))&&"speed"===o?fn(o)&&(o=_n(o)):o=2,fn(u=Sr(n,"min"))||(u=-1e20),u=_n(u),fn(i=Sr(n,"max"))||(i=1e20),i=_n(i),c=0,l=e,v=e,p=e,r.next=24,f(e);case 24:h=r.sent,b=h,y=h,d=!1,g=1;case 29:if(d){r.next=55;break}if(++g,d=!0,!(b<=h)){r.next=40;break}return p=l,h=b,l=Math.max(u,l-a),r.next=38,f(l);case 38:b=r.sent,d=!1;case 40:if(!(y<=h)){r.next=48;break}return p=v,h=y,v=Math.min(i,v+a),r.next=46,f(v);case 46:y=r.sent,d=!1;case 48:if(h=Math.min(h,b,y),(b===h&&l===u||y===h&&v===i)&&(d=!0),Rn(o)?a*=o:"speed"===o&&(a*=g<4?2:Math.exp(.5*g)),isFinite(a)){r.next=53;break}return r.abrupt("return",null);case 53:r.next=29;break;case 55:return r.abrupt("return",{count:c,bounded:d,min:l,max:v,guess:p,fMin:b,fMax:y,fGuess:h});case 56:case"end":return r.stop()}}),r)}))),Yn.apply(this,arguments)}function Zn(r,t){return Hn.apply(this,arguments)}function Hn(){return Hn=Mn(Sn.mark((function r(t,e){var n,a,o,u,i,c,f=arguments;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=f.length>2&&void 0!==f[2]?f[2]:{},kn(t)){r.next=3;break}return r.abrupt("return",Promise.reject("invalid fun"));case 3:if(fn(e)){r.next=5;break}return r.abrupt("return",Promise.reject("x is not a number"));case 5:if(fn(a=Sr(n,"min"))&&(a=_n(a)),fn(o=Sr(n,"max"))&&(o=_n(o)),u=0,Rn(o)&&Rn(a)){r.next=19;break}return r.next=13,Wn(t,e,n);case 13:if(i=r.sent,a=Sr(i,"min"),o=Sr(i,"max"),Rn(a)&&Rn(o)){r.next=18;break}return r.abrupt("return",Promise.reject("can not find bounds by setpBracket"));case 18:u+=i.count;case 19:return r.next=21,Cn(t,a,o,n);case 21:return c=r.sent,u+=c.count,c.count=u,r.abrupt("return",c);case 25:case"end":return r.stop()}}),r)}))),Hn.apply(this,arguments)}var Jn=function(r,t){for(var e=-1,n=null==r?0:r.length;++e<n&&!1!==t(r[e],e,r););return r};var Kn=function(r,t,e){"__proto__"==t&&Je?Je(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e},Qn=Object.prototype.hasOwnProperty;var Xn=function(r,t,e){var n=r[t];Qn.call(r,t)&&J(n,e)&&(void 0!==e||t in r)||Kn(r,t,e)};var ra=function(r,t,e,n){var a=!e;e||(e={});for(var o=-1,u=t.length;++o<u;){var i=t[o],c=n?n(e[i],r[i],i,e,r):void 0;void 0===c&&(c=r[i]),a?Kn(e,i,c):Xn(e,i,c)}return e};var ta=function(r,t){return r&&ra(t,se(t),r)};var ea=function(r){var t=[];if(null!=r)for(var e in Object(r))t.push(e);return t},na=Object.prototype.hasOwnProperty;var aa=function(r){if(!w(r))return ea(r);var t=Er(r),e=[];for(var n in r)("constructor"!=n||!t&&na.call(r,n))&&e.push(n);return e};var oa=function(r){return Qr(r)?fe(r,!0):aa(r)};var ua=function(r,t){return r&&ra(t,oa(t),r)},ia=n((function(r,t){var e=t&&!t.nodeType&&t,n=e&&r&&!r.nodeType&&r,a=n&&n.exports===e?u.Buffer:void 0,o=a?a.allocUnsafe:void 0;r.exports=function(r,t){if(t)return r.slice();var e=r.length,n=o?o(e):new r.constructor(e);return r.copy(n),n}}));var ca=function(r,t){var e=-1,n=r.length;for(t||(t=Array(n));++e<n;)t[e]=r[e];return t};var fa=function(r,t){return ra(r,Ct(r),t)},sa=Lr(Object.getPrototypeOf,Object),la=Object.getOwnPropertySymbols?function(r){for(var t=[];r;)Ut(t,Ct(r)),r=sa(r);return t}:Dt;var va=function(r,t){return ra(r,la(r),t)};var pa=function(r){return $t(r,oa,la)},ha=Object.prototype.hasOwnProperty;var ba=function(r){var t=r.length,e=new r.constructor(t);return t&&"string"==typeof r[0]&&ha.call(r,"index")&&(e.index=r.index,e.input=r.input),e};var ya=function(r){var t=new r.constructor(r.byteLength);return new zt(t).set(new zt(r)),t};var da=function(r,t){var e=t?ya(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)},ga=/\w*$/;var xa=function(r){var t=new r.constructor(r.source,ga.exec(r));return t.lastIndex=r.lastIndex,t},ja=i?i.prototype:void 0,ma=ja?ja.valueOf:void 0;var wa=function(r){return ma?Object(ma.call(r)):{}};var _a=function(r,t){var e=t?ya(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)};var ka=function(r,t,e){var n=r.constructor;switch(t){case"[object ArrayBuffer]":return ya(r);case"[object Boolean]":case"[object Date]":return new n(+r);case"[object DataView]":return da(r,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return _a(r,e);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(r);case"[object RegExp]":return xa(r);case"[object Symbol]":return wa(r)}},Oa=Object.create,Ma=function(){function r(){}return function(t){if(!w(t))return{};if(Oa)return Oa(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}();var Aa=function(r){return"function"!=typeof r.constructor||Er(r)?{}:Ma(sa(r))};var Sa=function(r){return d(r)&&"[object Map]"==Jr(r)},Pa=oe&&oe.isMap,Ea=Pa?ae(Pa):Sa;var La=function(r){return d(r)&&"[object Set]"==Jr(r)},za=oe&&oe.isSet,Ia=za?ae(za):La,Fa="[object Arguments]",Ta="[object Function]",Na="[object Object]",Ba={};Ba[Fa]=Ba["[object Array]"]=Ba["[object ArrayBuffer]"]=Ba["[object DataView]"]=Ba["[object Boolean]"]=Ba["[object Date]"]=Ba["[object Float32Array]"]=Ba["[object Float64Array]"]=Ba["[object Int8Array]"]=Ba["[object Int16Array]"]=Ba["[object Int32Array]"]=Ba["[object Map]"]=Ba["[object Number]"]=Ba[Na]=Ba["[object RegExp]"]=Ba["[object Set]"]=Ba["[object String]"]=Ba["[object Symbol]"]=Ba["[object Uint8Array]"]=Ba["[object Uint8ClampedArray]"]=Ba["[object Uint16Array]"]=Ba["[object Uint32Array]"]=!0,Ba["[object Error]"]=Ba[Ta]=Ba["[object WeakMap]"]=!1;var Ua=function t(e,n,a,o,u,i){var c,f=1&n,s=2&n,l=4&n;if(a&&(c=u?a(e,o,u,i):a(e)),void 0!==c)return c;if(!w(e))return e;var v=r(e);if(v){if(c=ba(e),!f)return ca(e,c)}else{var p=Jr(e),h=p==Ta||"[object GeneratorFunction]"==p;if(Xt(e))return ia(e,f);if(p==Na||p==Fa||h&&!u){if(c=s||h?{}:Aa(e),!f)return s?va(e,ua(c,e)):fa(e,ta(c,e))}else{if(!Ba[p])return u?e:{};c=ka(e,p,f)}}i||(i=new kt);var b=i.get(e);if(b)return b;i.set(e,c),Ia(e)?e.forEach((function(r){c.add(t(r,n,a,r,e,i))})):Ea(e)&&e.forEach((function(r,o){c.set(o,t(r,n,a,o,e,i))}));var y=v?void 0:(l?s?pa:le:s?oa:se)(e);return Jn(y||e,(function(r,o){y&&(r=e[o=r]),Xn(c,o,t(r,n,a,o,e,i))})),c};var $a=function(r){return Ua(r,5)};function qa(r,t){function e(){return n.apply(this,arguments)}function n(){return n=Mn(Sn.mark((function t(){var e,n=arguments;return Sn.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Pn(e=r.apply(void 0,n))){t.next=5;break}return t.next=4,e;case 4:e=t.sent;case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)}function a(){return(a=Mn(Sn.mark((function r(n){var a,o,u,i,c,f,s;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=t,u=[],i=[],s=n.length,c=0;case 5:if(!(c<s)){r.next=18;break}for(f=0;f<s;f++)u[f]=c===f?n[f]+a:n[f];return r.next=9,e(u);case 9:return r.t0=r.sent,r.next=12,e(n);case 12:r.t1=r.sent,o=r.t0-r.t1,i[c]=o/a;case 15:c++,r.next=5;break;case 18:return r.abrupt("return",i);case 19:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(r){return a.apply(this,arguments)}}function Da(r){var t,e,n=[];for(t=0;t<r;t++){for(n[t]=[],e=0;e<r;e++)n[t][e]=0;n[t][t]=1}return n}function Ga(){return Ga=Mn(Sn.mark((function r(t,e){var n,a,o,u,i,c,f,s,l,v,p,h,b,y,d,g,x,j,m,w,_,k=arguments;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(_=function(){return _=Mn(Sn.mark((function r(){var t,e,n,a,u,f,l,y,w,_,k,O,M;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(f=function(){return f=Mn(Sn.mark((function r(n){var a,o;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(a=[],e=0;e<t;e++)a[e]=c[e]+n*b[e];return r.next=4,s(a);case 4:return o=r.sent,j>o&&(j=o,m=a),r.abrupt("return",o);case 7:case"end":return r.stop()}}),r)}))),f.apply(this,arguments)},u=function(r){return f.apply(this,arguments)},t=i,a=0,e=0;e<t;e++)a+=p[e]*p[e];if(a=Math.sqrt(a),Rn(a)){r.next=8;break}return r.abrupt("return",Promise.reject("the norm of the gradient was unconverged"));case 8:if(!(a<o)){r.next=11;break}return g=!0,r.abrupt("return",Promise.resolve());case 11:for(x++,e=0;e<t;e++)for(b[e]=0,n=0;n<t;n++)b[e]+=-h[e][n]*p[n];return r.next=15,Zn(u,0);case 15:if(l=r.sent,d=Sr(l,"x"),Rn(d)){r.next=19;break}return r.abrupt("return",Promise.reject("can not find approximate stepsize"));case 19:for(y=[],e=0;e<t;e++)y[e]=d*b[e],c[e]+=y[e];return r.next=23,v(c);case 23:for(w=r.sent,_=[],e=0;e<t;e++)_[e]=w[e]-p[e];for(p=w,k=0,e=0;e<t;e++)k+=y[e]*_[e];for(O=[],e=0;e<t;e++)for(O[e]=0,n=0;n<t;n++)O[e]+=h[e][n]*_[n];for(M=0,e=0;e<t;e++)M+=_[e]*O[e];for(M=(k+M)/(k*k),e=0;e<t;e++)for(n=0;n<t;n++)h[e][n]+=M*y[e]*y[n]-(O[e]*y[n]+y[e]*O[n])/k;case 35:case"end":return r.stop()}}),r)}))),_.apply(this,arguments)},w=function(){return _.apply(this,arguments)},l=function(){return l=Mn(Sn.mark((function r(){var e,n=arguments;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Pn(e=t.apply(void 0,n))){r.next=5;break}return r.next=4,e;case 4:e=r.sent;case 5:return f++,r.abrupt("return",e);case 7:case"end":return r.stop()}}),r)}))),l.apply(this,arguments)},s=function(){return l.apply(this,arguments)},n=k.length>2&&void 0!==k[2]?k[2]:{},kn(t)){r.next=7;break}return r.abrupt("return",Promise.reject("invalid fun"));case 7:if(cn(e)){r.next=9;break}return r.abrupt("return",Promise.reject("params is not an effective array"));case 9:return fn(a=Sr(n,"maxIterations"))||(a=200),a=_n(a),fn(o=Sr(n,"minTolerance"))||(o=1e-6),o=_n(o),fn(u=Sr(n,"delta"))||(u=1e-5),u=_n(u),i=dt(e),c=$a(e),f=0,v=qa(s,u),r.next=24,v(c);case 24:p=r.sent,h=Da(i),b=[],y="",d=0,g=!1,x=-1,j=1e20,m=null;case 33:if(!g){r.next=36;break}return r.abrupt("break",44);case 36:if(!(x>a)){r.next=38;break}return r.abrupt("return",Promise.reject("iterator > maxIterations[".concat(a,"]")));case 38:if(""===y){r.next=40;break}return r.abrupt("return",Promise.reject(y));case 40:return r.next=42,w();case 42:r.next=33;break;case 44:return r.abrupt("return",{count:f,y:j,x:m});case 45:case"end":return r.stop()}}),r)}))),Ga.apply(this,arguments)}function Ra(r,t,e,n,a){for(var o=0;o<r.length;++o)r[o]=t*e[o]+n*a[o]}function Ca(r,t){return r.y-t.y}function Va(){return Va=Mn(Sn.mark((function r(t,e){var n,a,o,u,i,c,f,s,l,v,p,h,b,y,d,g,x,j,m,w,_,k,O,M,A,S,P,E,L,z,I,F,T,N=arguments;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(y=function(){return y=Mn(Sn.mark((function r(){var e,n=arguments;return Sn.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Pn(e=t.apply(void 0,n))){r.next=5;break}return r.next=4,e;case 4:e=r.sent;case 5:return h++,r.abrupt("return",e);case 7:case"end":return r.stop()}}),r)}))),y.apply(this,arguments)},b=function(){return y.apply(this,arguments)},n=N.length>2&&void 0!==N[2]?N[2]:{},kn(t)){r.next=5;break}return r.abrupt("return",Promise.reject("invalid fun"));case 5:if(cn(e)){r.next=7;break}return r.abrupt("return",Promise.reject("params is not an effective array"));case 7:return a=dt(e),fn(o=Sr(n,"maxIterations"))||(o=200*a),o=_n(o),fn(u=Sr(n,"nonZeroDelta"))||(u=1.05),u=_n(u),fn(i=Sr(n,"delta"))||(i=.001),i=_n(i),fn(c=Sr(n,"minErrorDelta"))||(c=1e-6),c=_n(c),fn(f=Sr(n,"minTolerance"))||(f=1e-5),f=_n(f),fn(s=Sr(n,"rho"))||(s=1),s=_n(s),fn(l=Sr(n,"chi"))||(l=2),l=_n(l),fn(v=Sr(n,"psi"))||(v=-.5),v=_n(v),fn(p=Sr(n,"sigma"))||(p=.5),p=_n(p),h=0,(d=new Array(a+1))[0]=e,r.next=40,b(e);case 40:d[0].y=r.sent,d[0].id=0,g=0;case 43:if(!(g<a)){r.next=54;break}return(x=e.slice())[g]=x[g]?x[g]*u:i,d[g+1]=x,r.next=49,b(x);case 49:d[g+1].y=r.sent,d[g+1].id=g+1;case 51:++g,r.next=43;break;case 54:j=function(r){for(var t=0;t<r.length;t++)d[a][t]=r[t];d[a].y=r.y},w=e.slice(),_=e.slice(),k=e.slice(),O=e.slice(),M=0;case 60:if(!(M<o)){r.next=113;break}for(d.sort(Ca),m=0,A=0;A<a;++A)m=Math.max(m,Math.abs(d[0][A]-d[1][A]));if(!(Math.abs(d[0].y-d[a].y)<c&&m<f)){r.next=66;break}return r.abrupt("break",113);case 66:for(S=0;S<a;++S){for(w[S]=0,P=0;P<a;++P)w[S]+=d[P][S];w[S]/=a}return E=d[a],Ra(_,1+s,w,-s,E),r.next=71,b(_);case 71:if(_.y=r.sent,!(_.y<d[0].y)){r.next=80;break}return Ra(O,1+l,w,-l,E),r.next=76,b(O);case 76:O.y=r.sent,O.y<_.y?j(O):j(_),r.next=110;break;case 80:if(!(_.y>=d[a-1].y)){r.next=109;break}if(L=!1,!(_.y>E.y)){r.next=90;break}return Ra(k,1+v,w,-v,E),r.next=86,b(k);case 86:k.y=r.sent,k.y<E.y?j(k):L=!0,r.next=95;break;case 90:return Ra(k,1-v*s,w,v*s,E),r.next=93,b(k);case 93:k.y=r.sent,k.y<_.y?j(k):L=!0;case 95:if(!L){r.next=107;break}if(!(p>=1)){r.next=98;break}return r.abrupt("break",113);case 98:z=1;case 99:if(!(z<d.length)){r.next=107;break}return Ra(d[z],1-p,d[0],p,d[z]),r.next=103,b(d[z]);case 103:d[z].y=r.sent;case 104:++z,r.next=99;break;case 107:r.next=110;break;case 109:j(_);case 110:++M,r.next=60;break;case 113:for(d.sort(Ca),I=[],F=d[0],T=0;T<a;T++)I.push(F[T]);return r.abrupt("return",{count:h,y:d[0].y,x:I});case 118:case"end":return r.stop()}}),r)}))),Va.apply(this,arguments)}var Wa={arrBinarySearch:function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!cn(r))return null;var n=Sr(e,"sorted");ln(n)||(n=!1),r=Ue(r,fn),r=Ne(r,_n),r=Ne(r,(function(r,t){return{v:r,k:t}})),n||(r=en(r,"v"));for(var a=0,o=dt(r)-1;a<=o;){var u=Math.floor((a+o)/2);if(r[u].v===t)return{ind:r[u].k,indSorted:u,value:t};t<r[u].v?o=u-1:a=u+1}return null},arrBinarySearchClosest:function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!cn(r))return null;var n=Sr(e,"sorted");ln(n)||(n=!1),r=Ue(r,fn),r=Ne(r,_n),r=Ne(r,(function(r,t){return{v:r,k:t}})),n||(r=en(r,"v"));for(var a={ind:null,indSorted:null,value:null,diff:1e20},o=0,u=dt(r)-1;o<=u;){var i=Math.floor((o+u)/2);if(r[i].v===t){a={ind:r[i].k,indSorted:i,value:t,diff:0};break}var c=Math.abs(t-r[i].v);a.diff>c&&(a={ind:r[i].k,indSorted:i,value:r[i].v,diff:c}),t<r[i].v?u=i-1:o=i+1}return a},binarySearch:function(r,t,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!kn(r))throw new Error("invalid fun");if(!fn(t))throw new Error("xMin is not a number");if(t=_n(t),!fn(e))throw new Error("xMax is not a number");e=_n(e);var a=Sr(n,"delta");fn(a)||(a=.1),a=_n(a);var o=Sr(n,"maxIterations");fn(o)||(o=100),o=_n(o);for(var u=r(t),i=r(e),c=(t+e)/2,f=r(c),s=0,l=null;;){if(++s>o)return null;if(u<=i&&u<=f){l={y:u,x:t};break}if(i<=u&&i<=f){l={y:i,x:e};break}i>=u?(i=f,i=r(e=c)):(u=f,u=r(t=c)),f=r(c=(t+e)/2)}return l},cobyla:function(r,t){return Gn.apply(this,arguments)},goldenSection:Cn,goldenSectionLiberate:Zn,limitBFGS:function(r,t){return Ga.apply(this,arguments)},nelderMead:function(r,t){return Va.apply(this,arguments)},setpBracket:Wn};return Wa}));
//# sourceMappingURL=w-optimization.umd.js.map
