/*!
 * w-optimization v1.0.11
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-optimization"]=e()}(this,(function(){"use strict";var t=Array.isArray,e="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,n=e||r||Function("return this")(),o=n.Symbol,i=Object.prototype,u=i.hasOwnProperty,a=i.toString,f=o?o.toStringTag:void 0;var c=Object.prototype.toString;var l="[object Null]",s="[object Undefined]",b=o?o.toStringTag:void 0;function v(t){return null==t?void 0===t?s:l:b&&b in Object(t)?function(t){var e=u.call(t,f),r=t[f];try{t[f]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[f]=r:delete t[f]),o}(t):function(t){return c.call(t)}(t)}function h(t){return null!=t&&"object"==typeof t}var p="[object Symbol]";function y(t){return"symbol"==typeof t||h(t)&&v(t)==p}var d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;function g(e,r){if(t(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!y(e))||(j.test(e)||!d.test(e)||null!=r&&e in Object(r))}function m(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var _="[object AsyncFunction]",w="[object Function]",x="[object GeneratorFunction]",O="[object Proxy]";function M(t){if(!m(t))return!1;var e=v(t);return e==w||e==x||e==_||e==O}var A,S=n["__core-js_shared__"],P=(A=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";var k=Function.prototype.toString;function z(t){if(null!=t){try{return k.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var E=/^\[object .+?Constructor\]$/,I=Function.prototype,F=Object.prototype,B=I.toString,U=F.hasOwnProperty,T=RegExp("^"+B.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $(t){return!(!m(t)||(e=t,P&&P in e))&&(M(t)?T:E).test(z(t));var e}function q(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return $(r)?r:void 0}var D=q(Object,"create");var N=Object.prototype.hasOwnProperty;var C=Object.prototype.hasOwnProperty;function L(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function R(t,e){return t===e||t!=t&&e!=e}function V(t,e){for(var r=t.length;r--;)if(R(t[r][0],e))return r;return-1}L.prototype.clear=function(){this.__data__=D?D(null):{},this.size=0},L.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},L.prototype.get=function(t){var e=this.__data__;if(D){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return N.call(e,t)?e[t]:void 0},L.prototype.has=function(t){var e=this.__data__;return D?void 0!==e[t]:C.call(e,t)},L.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=D&&void 0===e?"__lodash_hash_undefined__":e,this};var G=Array.prototype.splice;function W(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}W.prototype.clear=function(){this.__data__=[],this.size=0},W.prototype.delete=function(t){var e=this.__data__,r=V(e,t);return!(r<0)&&(r==e.length-1?e.pop():G.call(e,r,1),--this.size,!0)},W.prototype.get=function(t){var e=this.__data__,r=V(e,t);return r<0?void 0:e[r][1]},W.prototype.has=function(t){return V(this.__data__,t)>-1},W.prototype.set=function(t,e){var r=this.__data__,n=V(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var Z=q(n,"Map");function H(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function J(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}J.prototype.clear=function(){this.size=0,this.__data__={hash:new L,map:new(Z||W),string:new L}},J.prototype.delete=function(t){var e=H(this,t).delete(t);return this.size-=e?1:0,e},J.prototype.get=function(t){return H(this,t).get(t)},J.prototype.has=function(t){return H(this,t).has(t)},J.prototype.set=function(t,e){var r=H(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};var K="Expected a function";function Q(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(K);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(Q.Cache||J),r}Q.Cache=J;var X,Y,tt,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/\\(\\)?/g,nt=(X=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(et,(function(t,r,n,o){e.push(n?o.replace(rt,"$1"):r||t)})),e},Y=Q(X,(function(t){return 500===tt.size&&tt.clear(),t})),tt=Y.cache,Y),ot=nt;function it(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var ut=1/0,at=o?o.prototype:void 0,ft=at?at.toString:void 0;function ct(e){if("string"==typeof e)return e;if(t(e))return it(e,ct)+"";if(y(e))return ft?ft.call(e):"";var r=e+"";return"0"==r&&1/e==-ut?"-0":r}function lt(e,r){return t(e)?e:g(e,r)?[e]:ot(function(t){return null==t?"":ct(t)}(e))}var st=1/0;function bt(t){if("string"==typeof t||y(t))return t;var e=t+"";return"0"==e&&1/t==-st?"-0":e}function vt(t,e){for(var r=0,n=(e=lt(e,t)).length;null!=t&&r<n;)t=t[bt(e[r++])];return r&&r==n?t:void 0}function ht(t,e,r){var n=null==t?void 0:vt(t,e);return void 0===n?r:n}var pt=Object.prototype;function yt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||pt)}function dt(t,e){return function(r){return t(e(r))}}var jt=dt(Object.keys,Object),gt=Object.prototype.hasOwnProperty;function mt(t){if(!yt(t))return jt(t);var e=[];for(var r in Object(t))gt.call(t,r)&&"constructor"!=r&&e.push(r);return e}var _t=q(n,"DataView"),wt=q(n,"Promise"),xt=q(n,"Set"),Ot=q(n,"WeakMap"),Mt="[object Map]",At="[object Promise]",St="[object Set]",Pt="[object WeakMap]",kt="[object DataView]",zt=z(_t),Et=z(Z),It=z(wt),Ft=z(xt),Bt=z(Ot),Ut=v;(_t&&Ut(new _t(new ArrayBuffer(1)))!=kt||Z&&Ut(new Z)!=Mt||wt&&Ut(wt.resolve())!=At||xt&&Ut(new xt)!=St||Ot&&Ut(new Ot)!=Pt)&&(Ut=function(t){var e=v(t),r="[object Object]"==e?t.constructor:void 0,n=r?z(r):"";if(n)switch(n){case zt:return kt;case Et:return Mt;case It:return At;case Ft:return St;case Bt:return Pt}return e});var Tt=Ut,$t=9007199254740991;function qt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=$t}function Dt(t){return null!=t&&qt(t.length)&&!M(t)}var Nt="[object String]";function Ct(t){return function(e){return null==e?void 0:e[t]}}var Lt=Ct("length"),Rt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Vt="\\ud800-\\udfff",Gt="["+Vt+"]",Wt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Zt="\\ud83c[\\udffb-\\udfff]",Ht="[^"+Vt+"]",Jt="(?:\\ud83c[\\udde6-\\uddff]){2}",Kt="[\\ud800-\\udbff][\\udc00-\\udfff]",Qt="(?:"+Wt+"|"+Zt+")"+"?",Xt="[\\ufe0e\\ufe0f]?",Yt=Xt+Qt+("(?:\\u200d(?:"+[Ht,Jt,Kt].join("|")+")"+Xt+Qt+")*"),te="(?:"+[Ht+Wt+"?",Wt,Jt,Kt,Gt].join("|")+")",ee=RegExp(Zt+"(?="+Zt+")|"+te+Yt,"g");function re(t){return function(t){return Rt.test(t)}(t)?function(t){for(var e=ee.lastIndex=0;ee.test(t);)++e;return e}(t):Lt(t)}var ne="[object Map]",oe="[object Set]";function ie(e){if(null==e)return 0;if(Dt(e))return"string"==typeof(r=e)||!t(r)&&h(r)&&v(r)==Nt?re(e):e.length;var r,n=Tt(e);return n==ne||n==oe?e.size:mt(e).length}function ue(t){var e=this.__data__=new W(t);this.size=e.size}ue.prototype.clear=function(){this.__data__=new W,this.size=0},ue.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},ue.prototype.get=function(t){return this.__data__.get(t)},ue.prototype.has=function(t){return this.__data__.has(t)},ue.prototype.set=function(t,e){var r=this.__data__;if(r instanceof W){var n=r.__data__;if(!Z||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new J(n)}return r.set(t,e),this.size=r.size,this};function ae(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new J;++e<r;)this.add(t[e])}function fe(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function ce(t,e){return t.has(e)}ae.prototype.add=ae.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ae.prototype.has=function(t){return this.__data__.has(t)};var le=1,se=2;function be(t,e,r,n,o,i){var u=r&le,a=t.length,f=e.length;if(a!=f&&!(u&&f>a))return!1;var c=i.get(t),l=i.get(e);if(c&&l)return c==e&&l==t;var s=-1,b=!0,v=r&se?new ae:void 0;for(i.set(t,e),i.set(e,t);++s<a;){var h=t[s],p=e[s];if(n)var y=u?n(p,h,s,e,t,i):n(h,p,s,t,e,i);if(void 0!==y){if(y)continue;b=!1;break}if(v){if(!fe(e,(function(t,e){if(!ce(v,e)&&(h===t||o(h,t,r,n,i)))return v.push(e)}))){b=!1;break}}else if(h!==p&&!o(h,p,r,n,i)){b=!1;break}}return i.delete(t),i.delete(e),b}var ve=n.Uint8Array;function he(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function pe(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var ye=1,de=2,je="[object Boolean]",ge="[object Date]",me="[object Error]",_e="[object Map]",we="[object Number]",xe="[object RegExp]",Oe="[object Set]",Me="[object String]",Ae="[object Symbol]",Se="[object ArrayBuffer]",Pe="[object DataView]",ke=o?o.prototype:void 0,ze=ke?ke.valueOf:void 0;function Ee(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function Ie(e,r,n){var o=r(e);return t(e)?o:Ee(o,n(e))}function Fe(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i}function Be(){return[]}var Ue=Object.prototype.propertyIsEnumerable,Te=Object.getOwnPropertySymbols,$e=Te?function(t){return null==t?[]:(t=Object(t),Fe(Te(t),(function(e){return Ue.call(t,e)})))}:Be;function qe(t){return h(t)&&"[object Arguments]"==v(t)}var De=Object.prototype,Ne=De.hasOwnProperty,Ce=De.propertyIsEnumerable,Le=qe(function(){return arguments}())?qe:function(t){return h(t)&&Ne.call(t,"callee")&&!Ce.call(t,"callee")},Re=Le;var Ve="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ge=Ve&&"object"==typeof module&&module&&!module.nodeType&&module,We=Ge&&Ge.exports===Ve?n.Buffer:void 0,Ze=(We?We.isBuffer:void 0)||function(){return!1},He=9007199254740991,Je=/^(?:0|[1-9]\d*)$/;function Ke(t,e){var r=typeof t;return!!(e=null==e?He:e)&&("number"==r||"symbol"!=r&&Je.test(t))&&t>-1&&t%1==0&&t<e}var Qe={};function Xe(t){return function(e){return t(e)}}Qe["[object Float32Array]"]=Qe["[object Float64Array]"]=Qe["[object Int8Array]"]=Qe["[object Int16Array]"]=Qe["[object Int32Array]"]=Qe["[object Uint8Array]"]=Qe["[object Uint8ClampedArray]"]=Qe["[object Uint16Array]"]=Qe["[object Uint32Array]"]=!0,Qe["[object Arguments]"]=Qe["[object Array]"]=Qe["[object ArrayBuffer]"]=Qe["[object Boolean]"]=Qe["[object DataView]"]=Qe["[object Date]"]=Qe["[object Error]"]=Qe["[object Function]"]=Qe["[object Map]"]=Qe["[object Number]"]=Qe["[object Object]"]=Qe["[object RegExp]"]=Qe["[object Set]"]=Qe["[object String]"]=Qe["[object WeakMap]"]=!1;var Ye="object"==typeof exports&&exports&&!exports.nodeType&&exports,tr=Ye&&"object"==typeof module&&module&&!module.nodeType&&module,er=tr&&tr.exports===Ye&&e.process,rr=function(){try{var t=tr&&tr.require&&tr.require("util").types;return t||er&&er.binding&&er.binding("util")}catch(t){}}(),nr=rr&&rr.isTypedArray,or=nr?Xe(nr):function(t){return h(t)&&qt(t.length)&&!!Qe[v(t)]},ir=Object.prototype.hasOwnProperty;function ur(e,r){var n=t(e),o=!n&&Re(e),i=!n&&!o&&Ze(e),u=!n&&!o&&!i&&or(e),a=n||o||i||u,f=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(e.length,String):[],c=f.length;for(var l in e)!r&&!ir.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||u&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ke(l,c))||f.push(l);return f}function ar(t){return Dt(t)?ur(t):mt(t)}function fr(t){return Ie(t,ar,$e)}var cr=1,lr=Object.prototype.hasOwnProperty;var sr=1,br="[object Arguments]",vr="[object Array]",hr="[object Object]",pr=Object.prototype.hasOwnProperty;function yr(e,r,n,o,i,u){var a=t(e),f=t(r),c=a?vr:Tt(e),l=f?vr:Tt(r),s=(c=c==br?hr:c)==hr,b=(l=l==br?hr:l)==hr,v=c==l;if(v&&Ze(e)){if(!Ze(r))return!1;a=!0,s=!1}if(v&&!s)return u||(u=new ue),a||or(e)?be(e,r,n,o,i,u):function(t,e,r,n,o,i,u){switch(r){case Pe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Se:return!(t.byteLength!=e.byteLength||!i(new ve(t),new ve(e)));case je:case ge:case we:return R(+t,+e);case me:return t.name==e.name&&t.message==e.message;case xe:case Me:return t==e+"";case _e:var a=he;case Oe:var f=n&ye;if(a||(a=pe),t.size!=e.size&&!f)return!1;var c=u.get(t);if(c)return c==e;n|=de,u.set(t,e);var l=be(a(t),a(e),n,o,i,u);return u.delete(t),l;case Ae:if(ze)return ze.call(t)==ze.call(e)}return!1}(e,r,c,n,o,i,u);if(!(n&sr)){var h=s&&pr.call(e,"__wrapped__"),p=b&&pr.call(r,"__wrapped__");if(h||p){var y=h?e.value():e,d=p?r.value():r;return u||(u=new ue),i(y,d,n,o,u)}}return!!v&&(u||(u=new ue),function(t,e,r,n,o,i){var u=r&cr,a=fr(t),f=a.length;if(f!=fr(e).length&&!u)return!1;for(var c=f;c--;){var l=a[c];if(!(u?l in e:lr.call(e,l)))return!1}var s=i.get(t),b=i.get(e);if(s&&b)return s==e&&b==t;var v=!0;i.set(t,e),i.set(e,t);for(var h=u;++c<f;){var p=t[l=a[c]],y=e[l];if(n)var d=u?n(y,p,l,e,t,i):n(p,y,l,t,e,i);if(!(void 0===d?p===y||o(p,y,r,n,i):d)){v=!1;break}h||(h="constructor"==l)}if(v&&!h){var j=t.constructor,g=e.constructor;j==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof j&&j instanceof j&&"function"==typeof g&&g instanceof g||(v=!1)}return i.delete(t),i.delete(e),v}(e,r,n,o,i,u))}function dr(t,e,r,n,o){return t===e||(null==t||null==e||!h(t)&&!h(e)?t!=t&&e!=e:yr(t,e,r,n,dr,o))}var jr=1,gr=2;function mr(t){return t==t&&!m(t)}function _r(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function wr(t){var e=function(t){for(var e=ar(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,mr(o)]}return e}(t);return 1==e.length&&e[0][2]?_r(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,u=!n;if(null==t)return!i;for(t=Object(t);o--;){var a=r[o];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var f=(a=r[o])[0],c=t[f],l=a[1];if(u&&a[2]){if(void 0===c&&!(f in t))return!1}else{var s=new ue;if(n)var b=n(c,l,f,t,e,s);if(!(void 0===b?dr(l,c,jr|gr,n,s):b))return!1}}return!0}(r,t,e)}}function xr(t,e){return null!=t&&e in Object(t)}function Or(e,r){return null!=e&&function(e,r,n){for(var o=-1,i=(r=lt(r,e)).length,u=!1;++o<i;){var a=bt(r[o]);if(!(u=null!=e&&n(e,a)))break;e=e[a]}return u||++o!=i?u:!!(i=null==e?0:e.length)&&qt(i)&&Ke(a,i)&&(t(e)||Re(e))}(e,r,xr)}var Mr=1,Ar=2;function Sr(t){return t}function Pr(t){return g(t)?Ct(bt(t)):function(t){return function(e){return vt(e,t)}}(t)}function kr(e){return"function"==typeof e?e:null==e?Sr:"object"==typeof e?t(e)?(r=e[0],n=e[1],g(r)&&mr(n)?_r(bt(r),n):function(t){var e=ht(t,r);return void 0===e&&e===n?Or(t,r):dr(n,e,Mr|Ar)}):wr(e):Pr(e);var r,n}var zr,Er=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),u=i.length;u--;){var a=i[zr?u:++n];if(!1===e(o[a],a,o))break}return t};var Ir=function(t,e){return function(r,n){if(null==r)return r;if(!Dt(r))return t(r,n);for(var o=r.length,i=e?o:-1,u=Object(r);(e?i--:++i<o)&&!1!==n(u[i],i,u););return r}}((function(t,e){return t&&Er(t,e,ar)})),Fr=Ir;function Br(t,e){var r=-1,n=Dt(t)?Array(t.length):[];return Fr(t,(function(t,o,i){n[++r]=e(t,o,i)})),n}function Ur(e,r){return(t(e)?it:Br)(e,kr(r))}function Tr(t,e){var r=[];return Fr(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}function $r(e,r){return(t(e)?Fe:Tr)(e,kr(r))}var qr=o?o.isConcatSpreadable:void 0;function Dr(e){return t(e)||Re(e)||!!(qr&&e&&e[qr])}function Nr(t,e,r,n,o){var i=-1,u=t.length;for(r||(r=Dr),o||(o=[]);++i<u;){var a=t[i];e>0&&r(a)?e>1?Nr(a,e-1,r,n,o):Ee(o,a):n||(o[o.length]=a)}return o}function Cr(t,e){if(t!==e){var r=void 0!==t,n=null===t,o=t==t,i=y(t),u=void 0!==e,a=null===e,f=e==e,c=y(e);if(!a&&!c&&!i&&t>e||i&&u&&f&&!a&&!c||n&&u&&f||!r&&f||!o)return 1;if(!n&&!i&&!c&&t<e||c&&r&&o&&!n&&!i||a&&r&&o||!u&&o||!f)return-1}return 0}function Lr(e,r,n){r=r.length?it(r,(function(e){return t(e)?function(t){return vt(t,1===e.length?e[0]:e)}:e})):[Sr];var o=-1;return r=it(r,Xe(kr)),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(Br(e,(function(t,e,n){return{criteria:it(r,(function(e){return e(t)})),index:++o,value:t}})),(function(t,e){return function(t,e,r){for(var n=-1,o=t.criteria,i=e.criteria,u=o.length,a=r.length;++n<u;){var f=Cr(o[n],i[n]);if(f)return n>=a?f:f*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,n)}))}var Rr=Math.max;var Vr=function(){try{var t=q(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Gr=Vr,Wr=Gr?function(t,e){return Gr(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:Sr,Zr=Wr,Hr=Date.now;var Jr=function(t){var e=0,r=0;return function(){var n=Hr(),o=16-(n-r);if(r=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Zr),Kr=Jr;function Qr(t,e,r){if(!m(r))return!1;var n=typeof e;return!!("number"==n?Dt(r)&&Ke(e,r.length):"string"==n&&e in r)&&R(r[e],t)}var Xr=function(t,e){return Kr(function(t,e,r){return e=Rr(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=Rr(n.length-e,0),u=Array(i);++o<i;)u[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=r(u),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,a)}}(t,e,Sr),t+"")}((function(t,e){if(null==t)return[];var r=e.length;return r>1&&Qr(t,e[0],e[1])?e=[]:r>2&&Qr(e[0],e[1],e[2])&&(e=[e[0]]),Lr(t,Nr(e,1),[])})),Yr=Xr;function tn(t){return"[object Array]"===Object.prototype.toString.call(t)}function en(t){if(function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)){for(let e in t)return!1;return!0}return!1}function rn(t){return"[object String]"===Object.prototype.toString.call(t)}function nn(t){return t!=t}function on(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!en(t)||(!!function(t){return!(!rn(t)||""!==t)}(t)||(!!function(t){return!!tn(t)&&0===t.length}(t)||!!nn(t)))))}function un(t){return!!tn(t)&&(0!==t.length&&(1!==t.length||!on(t[0])))}function an(t){let e=!1;if(function(t){return!(!rn(t)||""===t)}(t))e=!isNaN(Number(t));else if(function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)){if(nn(t))return!1;e=!0}return e}var fn="[object Boolean]";function cn(t){return!0===(e=t)||!1===e||h(e)&&v(e)==fn;var e}var ln=/\s/;var sn=/^\s+/;function bn(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&ln.test(t.charAt(e)););return e}(t)+1).replace(sn,""):t}var vn=NaN,hn=/^[-+]0x[0-9a-f]+$/i,pn=/^0b[01]+$/i,yn=/^0o[0-7]+$/i,dn=parseInt;var jn=1/0,gn=17976931348623157e292;function mn(t){return t?(t=function(t){if("number"==typeof t)return t;if(y(t))return vn;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=bn(t);var r=pn.test(t);return r||yn.test(t)?dn(t.slice(2),r?2:8):hn.test(t)?vn:+t}(t))===jn||t===-jn?(t<0?-1:1)*gn:t==t?t:0:0===t?t:0}function _n(t){if(!an(t))return 0;return mn(t)}function wn(t){let e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e}function xn(t){let e,r=Object.prototype.toString.call(t);if(e="[object Promise]"===r,e)return!0;if("[object Function]"!==r)return!1;try{e="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return e}let On=0,Mn=1,An=2;function Sn(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=0;return e}function Pn(t,e){let r=new Array(t),n=0;for(;n<t;)r[n]=Sn(e),n+=1;return r}function kn(t,e,r,n,o){let i=0;for(;i<o;)r[i+n]=t[i+e],i++}function zn(t,e){let r=t[0].length,n=Sn(r);for(let o=0;o<r;++o)n[o]=t[e][o];return n}function En(t,e){let r=t.length,n=Sn(r);for(let o=0;o<r;++o)n[o]=t[o][e];return n}function In(t,e,r){let n=Sn(r-e+1),o=0;for(let i=e;i<=r;++i,++o)n[o]=t[i];return n}function Fn(t,e){let r=0;for(let n=0;n<t.length;++n)r+=t[n]*e[n];return r}async function Bn(t,e,r,n,o,i,u,a,f){let c,l=-1,s=0,b=0,v=e+1,h=r+1,p=i,y=0,d=!1,j=!1,g=0,m=0,_=0,w=Sn(1+n),x=Pn(1+e,1+v),O=Pn(1+e,1+e),M=Pn(1+n,1+v),A=Pn(1+e,1+h),S=Sn(1+e),P=Sn(1+e),k=Sn(1+e),z=Sn(1+e),E=Sn(1+e),I=0,F=1/p;for(let t=1;t<=e;++t)x[t][v]=o[t],x[t][t]=p,O[t][t]=F;let B=v,U=!1,T="";async function $(){if(T="",I>=f&&I>0)return l=Mn,T="break",null;++I,s=await t(e,r,o,w),b=0;for(let t=1;t<=r;++t)b=Math.max(b,-w[t]);w[h]=s,w[n]=b;let i=!0;if(!U){i=!1;for(let t=1;t<=n;++t)M[t][B]=w[t];if(I<=v){if(B<=e)if(M[h][v]<=s)o[B]=x[B][v];else{x[B][v]=o[B];for(let t=1;t<=n;++t)M[t][B]=M[t][v],M[t][v]=w[t];for(let t=1;t<=B;++t){x[B][t]=-p,F=0;for(let e=t;e<=B;++e)F-=O[e][t];O[B][t]=F}}if(I<=e)return B=I,o[B]+=p,T="continue",null}U=!0}let a="";function $(){a="";let t="";function f(){if(t="",!i){let i=M[h][v]+y*M[n][v],u=v;for(let t=1;t<=e;++t)F=M[h][t]+y*M[n][t],F<i?(u=t,i=F):F===i&&0===y&&M[n][t]<M[n][u]&&(u=t);if(u<=e){for(let t=1;t<=n;++t)F=M[t][v],M[t][v]=M[t][u],M[t][u]=F;for(let t=1;t<=e;++t){F=x[t][u],x[t][u]=0,x[t][v]+=F;let r=0;for(let n=1;n<=e;++n)x[t][n]-=F,r-=O[n][t];O[u][t]=r}}let f=0;for(let t=1;t<=e;++t)for(let r=1;r<=e;++r)F=Fn(In(zn(O,t),1,e),In(En(x,r),1,e))-(t===r?1:0),f=Math.max(f,Math.abs(F));if(f>.1)return l=An,T="break",a="break",t="break",null;for(let t=1;t<=h;++t){w[t]=-M[t][v];for(let r=1;r<=e;++r)E[r]=M[t][r]+w[t];for(let r=1;r<=e;++r)A[r][t]=(t===h?-1:1)*Fn(In(E,1,e),In(En(O,r),1,e))}d=!0,g=.25*p;let s=2.1*p;for(let t=1;t<=e;++t){let r=0;for(let n=1;n<=e;++n)r+=O[t][n]*O[t][n];let n=0;for(let r=1;r<=e;++r)n+=x[r][t]*x[r][t];S[t]=1/Math.sqrt(r),P[t]=Math.sqrt(n),(S[t]<g||P[t]>s)&&(d=!1)}if(!U&&!d){B=0,F=s;for(let t=1;t<=e;++t)P[t]>F&&(B=t,F=P[t]);if(0===B)for(let t=1;t<=e;++t)S[t]<F&&(B=t,F=S[t]);F=.5*p*S[B];for(let t=1;t<=e;++t)z[t]=F*O[B][t];let r=0,n=0;c=0;for(let t=1;t<=h;++t)c=Fn(In(En(A,t),1,e),In(z,1,e)),t<h&&(F=M[t][v],r=Math.max(r,-c-F),n=Math.max(n,c-F));let i=y*(r-n)>2*c?-1:1;F=0;for(let t=1;t<=e;++t)z[t]=i*z[t],x[t][B]=z[t],F+=O[B][t]*z[t];for(let t=1;t<=e;++t)O[B][t]/=F;for(let t=1;t<=e;++t){if(t!==B){F=Fn(In(zn(O,t),1,e),In(z,1,e));for(let r=1;r<=e;++r)O[t][r]-=F*O[B][r]}o[t]=x[t][v]+z[t]}return T="continue",a="break",t="break",null}if(j=function(t,e,r,n,o,i){let u=0,a=0,f=0,c=Pn(1+t,1+t),l=Sn(2+e),s=Sn(2+e),b=Sn(1+t),v=Sn(1+t),h=Sn(2+e),p=Sn(2+e),y=e,d=0;for(let e=1;e<=t;++e)c[e][e]=1,i[e]=0;let j=0,g=0;if(e>=1){for(let t=1;t<=e;++t)n[t]>g&&(g=n[t],j=t);for(let t=1;t<=e;++t)p[t]=t,s[t]=g-n[t]}let m=!0,_=!1;function w(){(!m||m&&0===g)&&(y=e+1,j=y,p[y]=y,s[y]=0),m=!1;let x=0,O=0,M=0,A=0;function S(){let m=y===e?g:-Fn(In(i,1,t),In(En(r,y),1,t));if(0===O||m<x?(x=m,a=d,O=3):d>a?(a=d,O=3):--O,0===O)return null;let _=0;if(j<=d){if(j<d){let e=p[j],n=s[j],o=j;do{let e=o+1,n=p[e],i=Fn(In(En(c,o),1,t),In(En(r,n),1,t));u=Math.sqrt(i*i+l[e]*l[e]);let a=l[e]/u,f=i/u;l[e]=a*l[o],l[o]=u;for(let r=1;r<=t;++r)u=a*c[r][e]+f*c[r][o],c[r][e]=a*c[r][o]-f*c[r][e],c[r][o]=u;p[o]=n,s[o]=s[e],o=e}while(o<d);p[o]=e,s[o]=n}if(--d,y>e){u=1/l[d];for(let e=1;e<=t;++e)b[e]=u*c[e][d]}else{u=Fn(In(b,1,t),In(En(c,d+1),1,t));for(let e=1;e<=t;++e)b[e]-=u*c[e][d+1]}}else{let n=p[j],o=0;for(let e=1;e<=t;++e)v[e]=r[e][n];let i=t;for(;i>d;){let e=0,r=0;for(let n=1;n<=t;++n)u=c[n][i]*v[n],e+=u,r+=Math.abs(u);let n=r+.1*Math.abs(e),a=r+.2*Math.abs(e);if((r>=n||n>=a)&&(e=0),0===o)o=e;else{let r=i+1;u=Math.sqrt(e*e+o*o);let n=e/u,a=o/u;o=u;for(let e=1;e<=t;++e)u=n*c[e][i]+a*c[e][r],c[e][r]=n*c[e][r]-a*c[e][i],c[e][i]=u}--i}if(0===o){_=-1;let o=d;do{let n=0,i=0;for(let e=1;e<=t;++e)u=c[e][o]*v[e],n+=u,i+=Math.abs(u);let a=i+.1*Math.abs(n),f=i+.2*Math.abs(n);if(i<a&&a<f){if(u=n/l[o],u>0&&p[o]<=e){let t=s[o]/u;(_<0||t<_)&&(_=t)}if(o>=2){let e=p[o];for(let n=1;n<=t;++n)v[n]-=u*r[n][e]}h[o]=u}else h[o]=0}while(--o>0);if(_<0)return null;for(let t=1;t<=d;++t)s[t]=Math.max(0,s[t]-_*h[t]);if(j<d){let e=p[j],n=s[j],o=j;do{let e=o+1,n=p[e],i=Fn(In(En(c,o),1,t),In(En(r,n),1,t));u=Math.sqrt(i*i+l[e]*l[e]);let a=l[e]/u,f=i/u;l[e]=a*l[o],l[o]=u;for(let r=1;r<=t;++r)u=a*c[r][e]+f*c[r][o],c[r][e]=a*c[r][o]-f*c[r][e],c[r][o]=u;p[o]=n,s[o]=s[e],o=e}while(o<d);p[o]=e,s[o]=n}if(u=Fn(In(En(c,d),1,t),In(En(r,n),1,t)),0===u)return null;l[d]=u,s[j]=0,s[d]=_}else++d,l[d]=o,s[j]=s[d],s[d]=0;if(p[j]=p[d],p[d]=n,y>e&&n!==y){let e=d-1,o=Fn(In(En(c,e),1,t),In(En(r,n),1,t));u=Math.sqrt(o*o+l[d]*l[d]);let i=l[d]/u,a=o/u;l[d]=i*l[e],l[e]=u;for(let r=1;r<=t;++r)u=i*c[r][d]+a*c[r][e],c[r][d]=i*c[r][e]-a*c[r][d],c[r][e]=u;p[d]=p[e],p[e]=n,u=s[e],s[e]=s[d],s[d]=u}if(y>e){u=1/l[d];for(let e=1;e<=t;++e)b[e]=u*c[e][d]}else{n=p[d],u=(Fn(In(b,1,t),In(En(r,n),1,t))-1)/l[d];for(let e=1;e<=t;++e)b[e]-=u*c[e][d]}}let w=o*o,P=0,k=0;for(let e=1;e<=t;++e)Math.abs(i[e])>=1e-6*o&&(w-=i[e]*i[e]),P+=i[e]*b[e],k+=b[e]*b[e];if(w<=0)return null;if(u=Math.sqrt(k*w),Math.abs(P)>=1e-6*u&&(u=Math.sqrt(k*w+P*P)),A=w/(u+P),M=A,y===e){let t=M+.1*g;if(M>=t||t>=M+.2*g)return null;M=Math.min(M,g)}for(let e=1;e<=t;++e)v[e]=i[e]+M*b[e];if(y===e){f=g,g=0;for(let e=1;e<=d;++e){let o=p[e];u=n[o]-Fn(In(En(r,o),1,t),In(v,1,t)),g=Math.max(g,u)}}let z=d;do{let e=0,n=0;for(let r=1;r<=t;++r)u=c[r][z]*v[r],e+=u,n+=Math.abs(u);let o=n+.1*Math.abs(e),i=n+.2*Math.abs(e);if((n>=o||o>=i)&&(e=0),h[z]=e/l[z],z>=2){let e=p[z];for(let n=1;n<=t;++n)v[n]-=h[z]*r[n][e]}}while(z-- >=2);y>e&&(h[d]=Math.max(0,h[d]));for(let e=1;e<=t;++e)v[e]=i[e]+M*b[e];if(y>d){for(let e=d+1;e<=y;++e){let o=p[e],i=g-n[o],a=g+Math.abs(n[o]);for(let e=1;e<=t;++e)u=r[e][o]*v[e],i+=u,a+=Math.abs(u);let f=a+.1*Math.abs(i),c=a+.2*Math.abs(i);(a>=f||f>=c)&&(i=0),h[e]=i}}_=1,j=0;for(let t=1;t<=y;++t)h[t]<0&&(u=s[t]/(s[t]-h[t]),u<_&&(_=u,j=t));u=1-_;for(let e=1;e<=t;++e)i[e]=u*i[e]+_*v[e];for(let t=1;t<=y;++t)s[t]=Math.max(0,u*s[t]+_*h[t]);y===e&&(g=f+_*(g-f)),j>0&&S()}if(S(),M===A)return _=!0,null;y===e&&w()}return w(),_}(e,r,A,w,p,z),!j){F=0;for(let t=1;t<=e;++t)F+=z[t]*z[t];if(F<.25*p*p)return U=!0,t="break",null}c=0;let b=0;w[h]=0;for(let t=1;t<=h;++t)c=w[t]-Fn(In(En(A,t),1,e),In(z,1,e)),t<h&&(b=Math.max(b,c));m=M[n][v]-b;let k=m>0?c/m:0;if(y<1.5*k){y=2*k;let r=M[h][v]+y*M[n][v];for(let o=1;o<=e;++o)if(F=M[h][o]+y*M[n][o],F<r||F===r&&0===y&&M[n][o]<M[n][v])return a="continue",t="break",null}_=y*m-c;for(let t=1;t<=e;++t)o[t]=x[t][v]+z[t];return U=!0,T="continue",a="break",t="break",null}i=!1;let u=M[h][v]+y*M[n][v]-(s+y*b);0===y&&s===M[h][v]&&(_=m,u=M[n][v]-b);let f=u<=0?1:0;B=0;for(let t=1;t<=e;++t)F=Math.abs(Fn(In(zn(O,t),1,e),In(z,1,e))),F>f&&(B=t,f=F),k[t]=F*S[t];let I=1.1*p,$=0;for(let t=1;t<=e;++t)if(k[t]>=g||k[t]>=S[t]){if(F=P[t],u>0){F=0;for(let r=1;r<=e;++r)F+=Math.pow(z[r]-x[r][t],2);F=Math.sqrt(F)}F>I&&($=t,I=F)}if($>0&&(B=$),0!==B){F=0;for(let t=1;t<=e;++t)x[t][B]=z[t],F+=O[B][t]*z[t];for(let t=1;t<=e;++t)O[B][t]/=F;for(let t=1;t<=e;++t)if(t!==B){F=Fn(In(zn(O,t),1,e),In(z,1,e));for(let r=1;r<=e;++r)O[t][r]-=F*O[B][r]}for(let t=1;t<=n;++t)M[t][B]=w[t];if(u>0&&u>=.1*_)return a="continue",t="break",null}t="break"}do{f()}while("break"!==t);if(""!==T)return null;if(""!==a)return null;if(!d)return U=!1,a="continue",null;if(p<=u)return l=On,T="break",a="break",null;let I=0,$=0;if(p*=.5,p<=1.5*u&&(p=u),y>0){let t=0;for(let n=1;n<=h;++n){I=M[n][v],$=I;for(let t=1;t<=e;++t)I=Math.min(I,M[n][t]),$=Math.max($,M[n][t]);n<=r&&I<.5*$&&(F=Math.max($,0)-I,t=t<=0?F:Math.min(t,F))}0===t?y=0:$-I<y*t&&(y=($-I)/t)}a="continue"}do{$()}while("break"!==a);if(""!==T)return null;T="continue"}do{await $()}while("break"!==T);for(let t=1;t<=e;++t)o[t]=x[t][v];return s=M[h][v],b=M[n][v],l}var Un="[object Number]";function Tn(t){return"number"==typeof t||h(t)&&v(t)==Un}async function $n(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!wn(t))return Promise.reject("invalid fun");if(!an(e))return Promise.reject("xL is not a number");if(!an(r))return Promise.reject("xU is not a number");let o=ht(n,"minTolerance");an(o)||(o=1e-8),o=_n(o);let i=ht(n,"maxIterations");an(i)||(i=100),i=_n(i);let u,a,f=0;async function c(){let e=t(...arguments);return xn(e)&&(e=await e),f++,e}let l=2/(1+Math.sqrt(5)),s=0,b=r-l*(r-e),v=e+l*(r-e),h=await c(b),p=await c(v),y=await c(e),d=await c(r),j=e,g=r;for(;++s<i&&Math.abs(r-e)>o;)p>h?(r=v,v=b,p=h,b=r-l*(r-e),h=await c(b)):(e=b,b=v,h=p,v=e+l*(r-e),p=await c(v));if(u=.5*(r+e),a=.5*(h+p),!Tn(p)||!Tn(h)||s===i)return null;let m=null,_=null;return y<a?(m=j,_=y):d<a?(m=g,_=d):(m=u,_=a),{count:f,y:_,x:m}}async function qn(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!wn(t))return Promise.reject("invalid fun");if(!an(e))return Promise.reject("x is not a number");let n=ht(r,"delta");an(n)||(n=.1),n=_n(n);let o=ht(r,"dxR");an(o)&&"speed"===o?an(o)&&(o=_n(o)):o=2;let i=ht(r,"min");an(i)||(i=-1e20),i=_n(i);let u=ht(r,"max");an(u)||(u=1e20),u=_n(u);let a=0;async function f(){let e=t(...arguments);return xn(e)&&(e=await e),a++,e}let c=e,l=e,s=e,b=await f(e),v=b,h=b,p=!1,y=1;for(;!p;)if(++y,p=!0,v<=b&&(s=c,b=v,c=Math.max(i,c-n),v=await f(c),p=!1),h<=b&&(s=l,b=h,l=Math.min(u,l+n),h=await f(l),p=!1),b=Math.min(b,v,h),(v===b&&c===i||h===b&&l===u)&&(p=!0),Tn(o)?n*=o:"speed"===o&&(n*=y<4?2:Math.exp(.5*y)),!isFinite(n))return null;return{count:a,bounded:p,min:c,max:l,guess:s,fMin:v,fMax:h,fGuess:b}}async function Dn(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!wn(t))return Promise.reject("invalid fun");if(!an(e))return Promise.reject("x is not a number");let n=ht(r,"min");an(n)&&(n=_n(n));let o=ht(r,"max");an(o)&&(o=_n(o));let i=0;if(!Tn(o)||!Tn(n)){let u=await qn(t,e,r);if(n=ht(u,"min"),o=ht(u,"max"),!Tn(n)||!Tn(o))return Promise.reject("can not find bounds by setpBracket");i+=u.count}let u=await $n(t,n,o,r);return i+=u.count,u.count=i,u}function Nn(t,e,r){"__proto__"==e&&Gr?Gr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Cn=Object.prototype.hasOwnProperty;function Ln(t,e,r){var n=t[e];Cn.call(t,e)&&R(n,r)&&(void 0!==r||e in t)||Nn(t,e,r)}function Rn(t,e,r,n){var o=!r;r||(r={});for(var i=-1,u=e.length;++i<u;){var a=e[i],f=n?n(r[a],t[a],a,r,t):void 0;void 0===f&&(f=t[a]),o?Nn(r,a,f):Ln(r,a,f)}return r}var Vn=Object.prototype.hasOwnProperty;function Gn(t){if(!m(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=yt(t),r=[];for(var n in t)("constructor"!=n||!e&&Vn.call(t,n))&&r.push(n);return r}function Wn(t){return Dt(t)?ur(t,!0):Gn(t)}var Zn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Hn=Zn&&"object"==typeof module&&module&&!module.nodeType&&module,Jn=Hn&&Hn.exports===Zn?n.Buffer:void 0,Kn=Jn?Jn.allocUnsafe:void 0;var Qn=dt(Object.getPrototypeOf,Object),Xn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ee(e,$e(t)),t=Qn(t);return e}:Be,Yn=Xn;function to(t){return Ie(t,Wn,Yn)}var eo=Object.prototype.hasOwnProperty;function ro(t){var e=new t.constructor(t.byteLength);return new ve(e).set(new ve(t)),e}var no=/\w*$/;var oo=o?o.prototype:void 0,io=oo?oo.valueOf:void 0;var uo="[object Boolean]",ao="[object Date]",fo="[object Map]",co="[object Number]",lo="[object RegExp]",so="[object Set]",bo="[object String]",vo="[object Symbol]",ho="[object ArrayBuffer]",po="[object DataView]",yo="[object Float32Array]",jo="[object Float64Array]",go="[object Int8Array]",mo="[object Int16Array]",_o="[object Int32Array]",wo="[object Uint8Array]",xo="[object Uint8ClampedArray]",Oo="[object Uint16Array]",Mo="[object Uint32Array]";function Ao(t,e,r){var n,o=t.constructor;switch(e){case ho:return ro(t);case uo:case ao:return new o(+t);case po:return function(t,e){var r=e?ro(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case yo:case jo:case go:case mo:case _o:case wo:case xo:case Oo:case Mo:return function(t,e){var r=e?ro(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case fo:return new o;case co:case bo:return new o(t);case lo:return function(t){var e=new t.constructor(t.source,no.exec(t));return e.lastIndex=t.lastIndex,e}(t);case so:return new o;case vo:return n=t,io?Object(io.call(n)):{}}}var So=Object.create,Po=function(){function t(){}return function(e){if(!m(e))return{};if(So)return So(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),ko=Po;var zo=rr&&rr.isMap,Eo=zo?Xe(zo):function(t){return h(t)&&"[object Map]"==Tt(t)};var Io=rr&&rr.isSet,Fo=Io?Xe(Io):function(t){return h(t)&&"[object Set]"==Tt(t)},Bo=1,Uo=2,To=4,$o="[object Arguments]",qo="[object Function]",Do="[object GeneratorFunction]",No="[object Object]",Co={};function Lo(e,r,n,o,i,u){var a,f=r&Bo,c=r&Uo,l=r&To;if(n&&(a=i?n(e,o,i,u):n(e)),void 0!==a)return a;if(!m(e))return e;var s=t(e);if(s){if(a=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&eo.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(e),!f)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(e,a)}else{var b=Tt(e),v=b==qo||b==Do;if(Ze(e))return function(t,e){if(e)return t.slice();var r=t.length,n=Kn?Kn(r):new t.constructor(r);return t.copy(n),n}(e,f);if(b==No||b==$o||v&&!i){if(a=c||v?{}:function(t){return"function"!=typeof t.constructor||yt(t)?{}:ko(Qn(t))}(e),!f)return c?function(t,e){return Rn(t,Yn(t),e)}(e,function(t,e){return t&&Rn(e,Wn(e),t)}(a,e)):function(t,e){return Rn(t,$e(t),e)}(e,function(t,e){return t&&Rn(e,ar(e),t)}(a,e))}else{if(!Co[b])return i?e:{};a=Ao(e,b,f)}}u||(u=new ue);var h=u.get(e);if(h)return h;u.set(e,a),Fo(e)?e.forEach((function(t){a.add(Lo(t,r,n,t,e,u))})):Eo(e)&&e.forEach((function(t,o){a.set(o,Lo(t,r,n,o,e,u))}));var p=s?void 0:(l?c?to:fr:c?Wn:ar)(e);return function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););}(p||e,(function(t,o){p&&(t=e[o=t]),Ln(a,o,Lo(t,r,n,o,e,u))})),a}Co[$o]=Co["[object Array]"]=Co["[object ArrayBuffer]"]=Co["[object DataView]"]=Co["[object Boolean]"]=Co["[object Date]"]=Co["[object Float32Array]"]=Co["[object Float64Array]"]=Co["[object Int8Array]"]=Co["[object Int16Array]"]=Co["[object Int32Array]"]=Co["[object Map]"]=Co["[object Number]"]=Co[No]=Co["[object RegExp]"]=Co["[object Set]"]=Co["[object String]"]=Co["[object Symbol]"]=Co["[object Uint8Array]"]=Co["[object Uint8ClampedArray]"]=Co["[object Uint16Array]"]=Co["[object Uint32Array]"]=!0,Co["[object Error]"]=Co[qo]=Co["[object WeakMap]"]=!1;var Ro=1,Vo=4;function Go(t,e,r,n,o){for(let i=0;i<t.length;++i)t[i]=e*r[i]+n*o[i]}function Wo(t,e){return t.y-e.y}let Zo={arrBinarySearch:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!un(t))return null;let n=ht(r,"sorted");cn(n)||(n=!1),t=Ur(t=$r(t,an),_n),t=Ur(t,((t,e)=>({v:t,k:e}))),n||(t=Yr(t,"v"));let o=0,i=ie(t)-1;for(;o<=i;){let r=Math.floor((o+i)/2);if(t[r].v===e)return{ind:t[r].k,indSorted:r,value:e};e<t[r].v?i=r-1:o=r+1}return null},arrBinarySearchClosest:function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!un(t))return null;let n=ht(r,"sorted");cn(n)||(n=!1),t=Ur(t=$r(t,an),_n),t=Ur(t,((t,e)=>({v:t,k:e}))),n||(t=Yr(t,"v"));let o={ind:null,indSorted:null,value:null,diff:1e20},i=0,u=ie(t)-1;for(;i<=u;){let r=Math.floor((i+u)/2);if(t[r].v===e){o={ind:t[r].k,indSorted:r,value:e,diff:0};break}let n=Math.abs(e-t[r].v);o.diff>n&&(o={ind:t[r].k,indSorted:r,value:t[r].v,diff:n}),e<t[r].v?u=r-1:i=r+1}return o},binarySearch:function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!wn(t))throw new Error("invalid fun");if(!an(e))throw new Error("xMin is not a number");if(e=_n(e),!an(r))throw new Error("xMax is not a number");r=_n(r);let o=ht(n,"delta");an(o)||(o=.1),o=_n(o);let i=ht(n,"maxIterations");an(i)||(i=100),i=_n(i);let u=t(e),a=t(r),f=(e+r)/2,c=t(f),l=0,s=null;for(;;){if(l++,l>i)return null;if(u<=a&&u<=c){s={y:u,x:e};break}if(a<=u&&a<=c){s={y:a,x:r};break}a>=u?(a=c,a=t(r=f)):(u=c,u=t(e=f)),f=(e+r)/2,c=t(f)}return s},cobyla:async function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!wn(t))return Promise.reject("invalid fun");if(!un(e))return Promise.reject("params is not an effective array");let n=ie(e),o=ht(r,"maxIterations");an(o)||(o=2e3*n),o=_n(o);let i=ht(r,"rhobeg");an(i)||(i=10),i=_n(i);let u=ht(r,"rhoend");an(u)||(u=1e-5),u=_n(u);let a=o,f=0,c=null,l=null,s=new Array(n);for(let t=0;t<n;t++)s[t]=e[t];let b=await async function(t,e,r,n,o,i,u,a){let f=r+2,c=Sn(e+1);c[0]=0,kn(n,0,c,1,e);let l=Bn((async function(e,r,n,o){let i=Sn(e);kn(n,1,i,0,e);let u=Sn(r),a=await t(e,r,i,u);return kn(u,0,o,1,r),a}),e,r,f,c,o,i,0,a);return kn(c,1,n,0,e),l}((async function(e,r,n,o){let i=t(n);return xn(i)&&(i=await i),f++,(null===c||c>i)&&(c=i,l=n),i}),n,0,s,i,u,0,a);return b!==On?b===Mn?Promise.reject("maxIterations error"):b===An?Promise.reject("rounding error"):Promise.reject("unexpected error"):{count:f,y:c,x:l}},goldenSection:$n,goldenSectionLiberate:Dn,limitBFGS:async function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!wn(t))return Promise.reject("invalid fun");if(!un(e))return Promise.reject("params is not an effective array");let n=ht(r,"maxIterations");an(n)||(n=200),n=_n(n);let o=ht(r,"minTolerance");an(o)||(o=1e-6),o=_n(o);let i=ht(r,"delta");an(i)||(i=1e-5),i=_n(i);let u=ie(e),a=Lo(e,Ro|Vo),f=0;async function c(){let e=t(...arguments);return xn(e)&&(e=await e),f++,e}let l=function(t,e){async function r(){let e=t(...arguments);return xn(e)&&(e=await e),e}return async function(t){let n,o,i,u=e,a=[],f=[],c=t.length;for(o=0;o<c;o++){for(i=0;i<c;i++)a[i]=o===i?t[i]+u:t[i];n=await r(a)-await r(t),f[o]=n/u}return f}}(c,i),s=await l(a),b=function(t){let e,r,n=[];for(e=0;e<t;e++){for(n[e]=[],r=0;r<t;r++)n[e][r]=0;n[e][e]=1}return n}(u),v=[],h=0,p=!1,y=-1,d=1e20,j=null;async function g(){let t,e,r=u,n=0;for(t=0;t<r;t++)n+=s[t]*s[t];if(n=Math.sqrt(n),!Tn(n))return Promise.reject("the norm of the gradient was unconverged");if(n<o)return p=!0,Promise.resolve();for(y++,t=0;t<r;t++)for(v[t]=0,e=0;e<r;e++)v[t]+=-b[t][e]*s[e];let i=await Dn((async function(e){let n=[];for(t=0;t<r;t++)n[t]=a[t]+e*v[t];let o=await c(n);return d>o&&(d=o,j=n),o}),0);if(h=ht(i,"x"),!Tn(h))return Promise.reject("can not find approximate stepsize");let f=[];for(t=0;t<r;t++)f[t]=h*v[t],a[t]+=f[t];let g=await l(a),m=[];for(t=0;t<r;t++)m[t]=g[t]-s[t];s=g;let _=0;for(t=0;t<r;t++)_+=f[t]*m[t];let w=[];for(t=0;t<r;t++)for(w[t]=0,e=0;e<r;e++)w[t]+=b[t][e]*m[e];let x=0;for(t=0;t<r;t++)x+=m[t]*w[t];for(x=(_+x)/(_*_),t=0;t<r;t++)for(e=0;e<r;e++)b[t][e]+=x*f[t]*f[e]-(w[t]*f[e]+f[t]*w[e])/_}for(;!p;){if(y>n)return Promise.reject(`iterator > maxIterations[${n}]`);await g()}return{count:f,y:d,x:j}},nelderMead:async function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!wn(t))return Promise.reject("invalid fun");if(!un(e))return Promise.reject("params is not an effective array");let n=ie(e),o=ht(r,"maxIterations");an(o)||(o=200*n),o=_n(o);let i=ht(r,"nonZeroDelta");an(i)||(i=1.05),i=_n(i);let u=ht(r,"delta");an(u)||(u=.001),u=_n(u);let a=ht(r,"minErrorDelta");an(a)||(a=1e-6),a=_n(a);let f=ht(r,"minTolerance");an(f)||(f=1e-5),f=_n(f);let c=ht(r,"rho");an(c)||(c=1),c=_n(c);let l=ht(r,"chi");an(l)||(l=2),l=_n(l);let s=ht(r,"psi");an(s)||(s=-.5),s=_n(s);let b=ht(r,"sigma");an(b)||(b=.5),b=_n(b);let v=0;async function h(){let e=t(...arguments);return xn(e)&&(e=await e),v++,e}let p=new Array(n+1);p[0]=e,p[0].y=await h(e),p[0].id=0;for(let t=0;t<n;++t){let r=e.slice();r[t]=r[t]?r[t]*i:u,p[t+1]=r,p[t+1].y=await h(r),p[t+1].id=t+1}let y,d=t=>{for(let e=0;e<t.length;e++)p[n][e]=t[e];p[n].y=t.y},j=e.slice(),g=e.slice(),m=e.slice(),_=e.slice();for(let t=0;t<o;++t){p.sort(Wo),y=0;for(let t=0;t<n;++t)y=Math.max(y,Math.abs(p[0][t]-p[1][t]));if(Math.abs(p[0].y-p[n].y)<a&&y<f)break;for(let t=0;t<n;++t){j[t]=0;for(let e=0;e<n;++e)j[t]+=p[e][t];j[t]/=n}let t=p[n];if(Go(g,1+c,j,-c,t),g.y=await h(g),g.y<p[0].y)Go(_,1+l,j,-l,t),_.y=await h(_),_.y<g.y?d(_):d(g);else if(g.y>=p[n-1].y){let e=!1;if(g.y>t.y?(Go(m,1+s,j,-s,t),m.y=await h(m),m.y<t.y?d(m):e=!0):(Go(m,1-s*c,j,s*c,t),m.y=await h(m),m.y<g.y?d(m):e=!0),e){if(b>=1)break;for(let t=1;t<p.length;++t)Go(p[t],1-b,p[0],b,p[t]),p[t].y=await h(p[t])}}else d(g)}p.sort(Wo);let w=[],x=p[0];for(let t=0;t<n;t++)w.push(x[t]);return{count:v,y:p[0].y,x:w}},setpBracket:qn};return Zo}));
//# sourceMappingURL=w-optimization.umd.js.map
