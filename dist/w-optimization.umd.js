/*!
 * w-optimization v1.0.9
 * (c) 2018-2021 yuda-lyu(semisphere)
 * Released under the MIT License.
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t="undefined"!=typeof globalThis?globalThis:t||self)["w-optimization"]=r()}(this,(function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=Array.isArray,e="object"==typeof t&&t&&t.Object===Object&&t,n=e,o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")(),i=a.Symbol,u=i,f=Object.prototype,c=f.hasOwnProperty,l=f.toString,s=u?u.toStringTag:void 0;var v=function(t){var r=c.call(t,s),e=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=l.call(t);return n&&(r?t[s]=e:delete t[s]),o},b=Object.prototype.toString;var h=v,y=function(t){return b.call(t)},p=i?i.toStringTag:void 0;var d=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":p&&p in Object(t)?h(t):y(t)};var j=function(t){return null!=t&&"object"==typeof t},g=d,_=j;var w=function(t){return"symbol"==typeof t||_(t)&&"[object Symbol]"==g(t)},m=r,x=w,O=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M=/^\w*$/;var A=function(t,r){if(m(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!x(t))||(M.test(t)||!O.test(t)||null!=r&&t in Object(r))};var S=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)},P=d,k=S;var z,I=function(t){if(!k(t))return!1;var r=P(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r},E=a["__core-js_shared__"],F=(z=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var B=function(t){return!!F&&F in t},T=Function.prototype.toString;var U=function(t){if(null!=t){try{return T.call(t)}catch(t){}try{return t+""}catch(t){}}return""},N=I,$=B,q=S,D=U,C=/^\[object .+?Constructor\]$/,L=Function.prototype,R=Object.prototype,V=L.toString,G=R.hasOwnProperty,W=RegExp("^"+V.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Z=function(t){return!(!q(t)||$(t))&&(N(t)?W:C).test(D(t))},H=function(t,r){return null==t?void 0:t[r]};var J=function(t,r){var e=H(t,r);return Z(e)?e:void 0},K=J(Object,"create"),Q=K;var X=function(){this.__data__=Q?Q(null):{},this.size=0};var Y=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},tt=K,rt=Object.prototype.hasOwnProperty;var et=function(t){var r=this.__data__;if(tt){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return rt.call(r,t)?r[t]:void 0},nt=K,ot=Object.prototype.hasOwnProperty;var at=K;var it=X,ut=Y,ft=et,ct=function(t){var r=this.__data__;return nt?void 0!==r[t]:ot.call(r,t)},lt=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=at&&void 0===r?"__lodash_hash_undefined__":r,this};function st(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}st.prototype.clear=it,st.prototype.delete=ut,st.prototype.get=ft,st.prototype.has=ct,st.prototype.set=lt;var vt=st;var bt=function(){this.__data__=[],this.size=0};var ht=function(t,r){return t===r||t!=t&&r!=r},yt=ht;var pt=function(t,r){for(var e=t.length;e--;)if(yt(t[e][0],r))return e;return-1},dt=pt,jt=Array.prototype.splice;var gt=pt;var _t=pt;var wt=pt;var mt=bt,xt=function(t){var r=this.__data__,e=dt(r,t);return!(e<0)&&(e==r.length-1?r.pop():jt.call(r,e,1),--this.size,!0)},Ot=function(t){var r=this.__data__,e=gt(r,t);return e<0?void 0:r[e][1]},Mt=function(t){return _t(this.__data__,t)>-1},At=function(t,r){var e=this.__data__,n=wt(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this};function St(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}St.prototype.clear=mt,St.prototype.delete=xt,St.prototype.get=Ot,St.prototype.has=Mt,St.prototype.set=At;var Pt=St,kt=J(a,"Map"),zt=vt,It=Pt,Et=kt;var Ft=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var Bt=function(t,r){var e=t.__data__;return Ft(r)?e["string"==typeof r?"string":"hash"]:e.map},Tt=Bt;var Ut=Bt;var Nt=Bt;var $t=Bt;var qt=function(t,r){var e=$t(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this},Dt=function(){this.size=0,this.__data__={hash:new zt,map:new(Et||It),string:new zt}},Ct=function(t){var r=Tt(this,t).delete(t);return this.size-=r?1:0,r},Lt=function(t){return Ut(this,t).get(t)},Rt=function(t){return Nt(this,t).has(t)},Vt=qt;function Gt(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}Gt.prototype.clear=Dt,Gt.prototype.delete=Ct,Gt.prototype.get=Lt,Gt.prototype.has=Rt,Gt.prototype.set=Vt;var Wt=Gt,Zt=Wt;function Ht(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],a=e.cache;if(a.has(o))return a.get(o);var i=t.apply(this,n);return e.cache=a.set(o,i)||a,i};return e.cache=new(Ht.Cache||Zt),e}Ht.Cache=Zt;var Jt=Ht;var Kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qt=/\\(\\)?/g,Xt=function(t){var r=Jt(t,(function(t){return 500===e.size&&e.clear(),t})),e=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Kt,(function(t,e,n,o){r.push(n?o.replace(Qt,"$1"):e||t)})),r}));var Yt=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o},tr=Yt,rr=r,er=w,nr=i?i.prototype:void 0,or=nr?nr.toString:void 0;var ar=function t(r){if("string"==typeof r)return r;if(rr(r))return tr(r,t)+"";if(er(r))return or?or.call(r):"";var e=r+"";return"0"==e&&1/r==-Infinity?"-0":e},ir=ar;var ur=r,fr=A,cr=Xt,lr=function(t){return null==t?"":ir(t)};var sr=function(t,r){return ur(t)?t:fr(t,r)?[t]:cr(lr(t))},vr=w;var br=function(t){if("string"==typeof t||vr(t))return t;var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r},hr=sr,yr=br;var pr=function(t,r){for(var e=0,n=(r=hr(r,t)).length;null!=t&&e<n;)t=t[yr(r[e++])];return e&&e==n?t:void 0},dr=pr;var jr=function(t,r,e){var n=null==t?void 0:dr(t,r);return void 0===n?e:n},gr=Object.prototype;var _r=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||gr)};var wr=function(t,r){return function(e){return t(r(e))}},mr=wr(Object.keys,Object),xr=_r,Or=mr,Mr=Object.prototype.hasOwnProperty;var Ar=function(t){if(!xr(t))return Or(t);var r=[];for(var e in Object(t))Mr.call(t,e)&&"constructor"!=e&&r.push(e);return r},Sr=J(a,"DataView"),Pr=kt,kr=J(a,"Promise"),zr=J(a,"Set"),Ir=J(a,"WeakMap"),Er=d,Fr=U,Br="[object Map]",Tr="[object Promise]",Ur="[object Set]",Nr="[object WeakMap]",$r="[object DataView]",qr=Fr(Sr),Dr=Fr(Pr),Cr=Fr(kr),Lr=Fr(zr),Rr=Fr(Ir),Vr=Er;(Sr&&Vr(new Sr(new ArrayBuffer(1)))!=$r||Pr&&Vr(new Pr)!=Br||kr&&Vr(kr.resolve())!=Tr||zr&&Vr(new zr)!=Ur||Ir&&Vr(new Ir)!=Nr)&&(Vr=function(t){var r=Er(t),e="[object Object]"==r?t.constructor:void 0,n=e?Fr(e):"";if(n)switch(n){case qr:return $r;case Dr:return Br;case Cr:return Tr;case Lr:return Ur;case Rr:return Nr}return r});var Gr=Vr;var Wr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Zr=I,Hr=Wr;var Jr=function(t){return null!=t&&Hr(t.length)&&!Zr(t)},Kr=d,Qr=r,Xr=j;var Yr=function(t){return"string"==typeof t||!Qr(t)&&Xr(t)&&"[object String]"==Kr(t)};var te=function(t){return function(r){return null==r?void 0:r[t]}},re=te("length"),ee=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ne=function(t){return ee.test(t)},oe="\\ud800-\\udfff",ae="["+oe+"]",ie="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ue="\\ud83c[\\udffb-\\udfff]",fe="[^"+oe+"]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",le="[\\ud800-\\udbff][\\udc00-\\udfff]",se="(?:"+ie+"|"+ue+")"+"?",ve="[\\ufe0e\\ufe0f]?",be=ve+se+("(?:\\u200d(?:"+[fe,ce,le].join("|")+")"+ve+se+")*"),he="(?:"+[fe+ie+"?",ie,ce,le,ae].join("|")+")",ye=RegExp(ue+"(?="+ue+")|"+he+be,"g");var pe=re,de=ne,je=function(t){for(var r=ye.lastIndex=0;ye.test(t);)++r;return r};var ge=Ar,_e=Gr,we=Jr,me=Yr,xe=function(t){return de(t)?je(t):pe(t)};var Oe=function(t){if(null==t)return 0;if(we(t))return me(t)?xe(t):t.length;var r=_e(t);return"[object Map]"==r||"[object Set]"==r?t.size:ge(t).length},Me=Pt;var Ae=Pt,Se=kt,Pe=Wt;var ke=Pt,ze=function(){this.__data__=new Me,this.size=0},Ie=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e},Ee=function(t){return this.__data__.get(t)},Fe=function(t){return this.__data__.has(t)},Be=function(t,r){var e=this.__data__;if(e instanceof Ae){var n=e.__data__;if(!Se||n.length<199)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new Pe(n)}return e.set(t,r),this.size=e.size,this};function Te(t){var r=this.__data__=new ke(t);this.size=r.size}Te.prototype.clear=ze,Te.prototype.delete=Ie,Te.prototype.get=Ee,Te.prototype.has=Fe,Te.prototype.set=Be;var Ue=Te;var Ne=Wt,$e=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},qe=function(t){return this.__data__.has(t)};function De(t){var r=-1,e=null==t?0:t.length;for(this.__data__=new Ne;++r<e;)this.add(t[r])}De.prototype.add=De.prototype.push=$e,De.prototype.has=qe;var Ce=De,Le=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1},Re=function(t,r){return t.has(r)};var Ve=function(t,r,e,n,o,a){var i=1&e,u=t.length,f=r.length;if(u!=f&&!(i&&f>u))return!1;var c=a.get(t),l=a.get(r);if(c&&l)return c==r&&l==t;var s=-1,v=!0,b=2&e?new Ce:void 0;for(a.set(t,r),a.set(r,t);++s<u;){var h=t[s],y=r[s];if(n)var p=i?n(y,h,s,r,t,a):n(h,y,s,t,r,a);if(void 0!==p){if(p)continue;v=!1;break}if(b){if(!Le(r,(function(t,r){if(!Re(b,r)&&(h===t||o(h,t,e,n,a)))return b.push(r)}))){v=!1;break}}else if(h!==y&&!o(h,y,e,n,a)){v=!1;break}}return a.delete(t),a.delete(r),v},Ge=a.Uint8Array;var We=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t,n){e[++r]=[n,t]})),e};var Ze=Ge,He=ht,Je=Ve,Ke=We,Qe=function(t){var r=-1,e=Array(t.size);return t.forEach((function(t){e[++r]=t})),e},Xe=i?i.prototype:void 0,Ye=Xe?Xe.valueOf:void 0;var tn=function(t,r,e,n,o,a,i){switch(e){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!a(new Ze(t),new Ze(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return He(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var u=Ke;case"[object Set]":var f=1&n;if(u||(u=Qe),t.size!=r.size&&!f)return!1;var c=i.get(t);if(c)return c==r;n|=2,i.set(t,r);var l=Je(u(t),u(r),n,o,a,i);return i.delete(t),l;case"[object Symbol]":if(Ye)return Ye.call(t)==Ye.call(r)}return!1};var rn=function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t},en=rn,nn=r;var on=function(t,r,e){var n=r(t);return nn(t)?n:en(n,e(t))};var an=function(t,r){for(var e=-1,n=null==t?0:t.length,o=0,a=[];++e<n;){var i=t[e];r(i,e,t)&&(a[o++]=i)}return a};var un=function(){return[]},fn=an,cn=un,ln=Object.prototype.propertyIsEnumerable,sn=Object.getOwnPropertySymbols,vn=sn?function(t){return null==t?[]:(t=Object(t),fn(sn(t),(function(r){return ln.call(t,r)})))}:cn;var bn=function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n},hn=d,yn=j;var pn=function(t){return yn(t)&&"[object Arguments]"==hn(t)},dn=j,jn=Object.prototype,gn=jn.hasOwnProperty,_n=jn.propertyIsEnumerable,wn=pn(function(){return arguments}())?pn:function(t){return dn(t)&&gn.call(t,"callee")&&!_n.call(t,"callee")},mn=wn,xn={};var On=function(){return!1};!function(t,r){var e=a,n=On,o=r&&!r.nodeType&&r,i=o&&t&&!t.nodeType&&t,u=i&&i.exports===o?e.Buffer:void 0,f=(u?u.isBuffer:void 0)||n;t.exports=f}({get exports(){return xn},set exports(t){xn=t}},xn);var Mn=/^(?:0|[1-9]\d*)$/;var An=function(t,r){var e=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==e||"symbol"!=e&&Mn.test(t))&&t>-1&&t%1==0&&t<r},Sn=d,Pn=Wr,kn=j,zn={};zn["[object Float32Array]"]=zn["[object Float64Array]"]=zn["[object Int8Array]"]=zn["[object Int16Array]"]=zn["[object Int32Array]"]=zn["[object Uint8Array]"]=zn["[object Uint8ClampedArray]"]=zn["[object Uint16Array]"]=zn["[object Uint32Array]"]=!0,zn["[object Arguments]"]=zn["[object Array]"]=zn["[object ArrayBuffer]"]=zn["[object Boolean]"]=zn["[object DataView]"]=zn["[object Date]"]=zn["[object Error]"]=zn["[object Function]"]=zn["[object Map]"]=zn["[object Number]"]=zn["[object Object]"]=zn["[object RegExp]"]=zn["[object Set]"]=zn["[object String]"]=zn["[object WeakMap]"]=!1;var In=function(t){return kn(t)&&Pn(t.length)&&!!zn[Sn(t)]};var En=function(t){return function(r){return t(r)}},Fn={};!function(t,r){var n=e,o=r&&!r.nodeType&&r,a=o&&t&&!t.nodeType&&t,i=a&&a.exports===o&&n.process,u=function(){try{var t=a&&a.require&&a.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=u}({get exports(){return Fn},set exports(t){Fn=t}},Fn);var Bn=In,Tn=En,Un=Fn&&Fn.isTypedArray,Nn=Un?Tn(Un):Bn,$n=bn,qn=mn,Dn=r,Cn=xn,Ln=An,Rn=Nn,Vn=Object.prototype.hasOwnProperty;var Gn=function(t,r){var e=Dn(t),n=!e&&qn(t),o=!e&&!n&&Cn(t),a=!e&&!n&&!o&&Rn(t),i=e||n||o||a,u=i?$n(t.length,String):[],f=u.length;for(var c in t)!r&&!Vn.call(t,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ln(c,f))||u.push(c);return u},Wn=Gn,Zn=Ar,Hn=Jr;var Jn=function(t){return Hn(t)?Wn(t):Zn(t)},Kn=on,Qn=vn,Xn=Jn;var Yn=function(t){return Kn(t,Xn,Qn)},to=Yn,ro=Object.prototype.hasOwnProperty;var eo=Ue,no=Ve,oo=tn,ao=function(t,r,e,n,o,a){var i=1&e,u=to(t),f=u.length;if(f!=to(r).length&&!i)return!1;for(var c=f;c--;){var l=u[c];if(!(i?l in r:ro.call(r,l)))return!1}var s=a.get(t),v=a.get(r);if(s&&v)return s==r&&v==t;var b=!0;a.set(t,r),a.set(r,t);for(var h=i;++c<f;){var y=t[l=u[c]],p=r[l];if(n)var d=i?n(p,y,l,r,t,a):n(y,p,l,t,r,a);if(!(void 0===d?y===p||o(y,p,e,n,a):d)){b=!1;break}h||(h="constructor"==l)}if(b&&!h){var j=t.constructor,g=r.constructor;j==g||!("constructor"in t)||!("constructor"in r)||"function"==typeof j&&j instanceof j&&"function"==typeof g&&g instanceof g||(b=!1)}return a.delete(t),a.delete(r),b},io=Gr,uo=r,fo=xn,co=Nn,lo="[object Arguments]",so="[object Array]",vo="[object Object]",bo=Object.prototype.hasOwnProperty;var ho=function(t,r,e,n,o,a){var i=uo(t),u=uo(r),f=i?so:io(t),c=u?so:io(r),l=(f=f==lo?vo:f)==vo,s=(c=c==lo?vo:c)==vo,v=f==c;if(v&&fo(t)){if(!fo(r))return!1;i=!0,l=!1}if(v&&!l)return a||(a=new eo),i||co(t)?no(t,r,e,n,o,a):oo(t,r,f,e,n,o,a);if(!(1&e)){var b=l&&bo.call(t,"__wrapped__"),h=s&&bo.call(r,"__wrapped__");if(b||h){var y=b?t.value():t,p=h?r.value():r;return a||(a=new eo),o(y,p,e,n,a)}}return!!v&&(a||(a=new eo),ao(t,r,e,n,o,a))},yo=j;var po=function t(r,e,n,o,a){return r===e||(null==r||null==e||!yo(r)&&!yo(e)?r!=r&&e!=e:ho(r,e,n,o,t,a))},jo=Ue,go=po;var _o=S;var wo=function(t){return t==t&&!_o(t)},mo=wo,xo=Jn;var Oo=function(t,r){return function(e){return null!=e&&(e[t]===r&&(void 0!==r||t in Object(e)))}},Mo=function(t,r,e,n){var o=e.length,a=o,i=!n;if(null==t)return!a;for(t=Object(t);o--;){var u=e[o];if(i&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var f=(u=e[o])[0],c=t[f],l=u[1];if(i&&u[2]){if(void 0===c&&!(f in t))return!1}else{var s=new jo;if(n)var v=n(c,l,f,t,r,s);if(!(void 0===v?go(l,c,3,n,s):v))return!1}}return!0},Ao=function(t){for(var r=xo(t),e=r.length;e--;){var n=r[e],o=t[n];r[e]=[n,o,mo(o)]}return r},So=Oo;var Po=sr,ko=mn,zo=r,Io=An,Eo=Wr,Fo=br;var Bo=function(t,r){return null!=t&&r in Object(t)},To=function(t,r,e){for(var n=-1,o=(r=Po(r,t)).length,a=!1;++n<o;){var i=Fo(r[n]);if(!(a=null!=t&&e(t,i)))break;t=t[i]}return a||++n!=o?a:!!(o=null==t?0:t.length)&&Eo(o)&&Io(i,o)&&(zo(t)||ko(t))};var Uo=po,No=jr,$o=function(t,r){return null!=t&&To(t,r,Bo)},qo=A,Do=wo,Co=Oo,Lo=br;var Ro=function(t){return t},Vo=pr;var Go=te,Wo=function(t){return function(r){return Vo(r,t)}},Zo=A,Ho=br;var Jo=function(t){var r=Ao(t);return 1==r.length&&r[0][2]?So(r[0][0],r[0][1]):function(e){return e===t||Mo(e,t,r)}},Ko=function(t,r){return qo(t)&&Do(r)?Co(Lo(t),r):function(e){var n=No(e,t);return void 0===n&&n===r?$o(e,t):Uo(r,n,3)}},Qo=Ro,Xo=r,Yo=function(t){return Zo(t)?Go(Ho(t)):Wo(t)};var ta=function(t){return"function"==typeof t?t:null==t?Qo:"object"==typeof t?Xo(t)?Ko(t[0],t[1]):Jo(t):Yo(t)};var ra=function(t){return function(r,e,n){for(var o=-1,a=Object(r),i=n(r),u=i.length;u--;){var f=i[t?u:++o];if(!1===e(a[f],f,a))break}return r}}(),ea=Jn;var na=Jr;var oa=function(t,r){return function(e,n){if(null==e)return e;if(!na(e))return t(e,n);for(var o=e.length,a=r?o:-1,i=Object(e);(r?a--:++a<o)&&!1!==n(i[a],a,i););return e}}((function(t,r){return t&&ra(t,r,ea)})),aa=oa,ia=Jr;var ua=function(t,r){var e=-1,n=ia(t)?Array(t.length):[];return aa(t,(function(t,o,a){n[++e]=r(t,o,a)})),n},fa=Yt,ca=ta,la=ua,sa=r;var va=function(t,r){return(sa(t)?fa:la)(t,ca(r))},ba=oa;var ha=an,ya=function(t,r){var e=[];return ba(t,(function(t,n,o){r(t,n,o)&&e.push(t)})),e},pa=ta,da=r;var ja=function(t,r){return(da(t)?ha:ya)(t,pa(r))},ga=mn,_a=r,wa=i?i.isConcatSpreadable:void 0;var ma=rn,xa=function(t){return _a(t)||ga(t)||!!(wa&&t&&t[wa])};var Oa=function t(r,e,n,o,a){var i=-1,u=r.length;for(n||(n=xa),a||(a=[]);++i<u;){var f=r[i];e>0&&n(f)?e>1?t(f,e-1,n,o,a):ma(a,f):o||(a[a.length]=f)}return a};var Ma=w;var Aa=function(t,r){if(t!==r){var e=void 0!==t,n=null===t,o=t==t,a=Ma(t),i=void 0!==r,u=null===r,f=r==r,c=Ma(r);if(!u&&!c&&!a&&t>r||a&&i&&f&&!u&&!c||n&&i&&f||!e&&f||!o)return 1;if(!n&&!a&&!c&&t<r||c&&e&&o&&!n&&!a||u&&e&&o||!i&&o||!f)return-1}return 0};var Sa=Yt,Pa=pr,ka=ta,za=ua,Ia=function(t,r){var e=t.length;for(t.sort(r);e--;)t[e]=t[e].value;return t},Ea=En,Fa=function(t,r,e){for(var n=-1,o=t.criteria,a=r.criteria,i=o.length,u=e.length;++n<i;){var f=Aa(o[n],a[n]);if(f)return n>=u?f:f*("desc"==e[n]?-1:1)}return t.index-r.index},Ba=Ro,Ta=r;var Ua=function(t,r,e){r=r.length?Sa(r,(function(t){return Ta(t)?function(r){return Pa(r,1===t.length?t[0]:t)}:t})):[Ba];var n=-1;r=Sa(r,Ea(ka));var o=za(t,(function(t,e,o){return{criteria:Sa(r,(function(r){return r(t)})),index:++n,value:t}}));return Ia(o,(function(t,r){return Fa(t,r,e)}))};var Na=function(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)},$a=Math.max;var qa=function(t,r,e){return r=$a(void 0===r?t.length-1:r,0),function(){for(var n=arguments,o=-1,a=$a(n.length-r,0),i=Array(a);++o<a;)i[o]=n[r+o];o=-1;for(var u=Array(r+1);++o<r;)u[o]=n[o];return u[r]=e(i),Na(t,this,u)}};var Da=function(t){return function(){return t}},Ca=J,La=function(){try{var t=Ca(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ra=Da,Va=La,Ga=Va?function(t,r){return Va(t,"toString",{configurable:!0,enumerable:!1,value:Ra(r),writable:!0})}:Ro,Wa=Date.now;var Za=function(t){var r=0,e=0;return function(){var n=Wa(),o=16-(n-e);if(e=n,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}},Ha=Za(Ga),Ja=Ro,Ka=qa,Qa=Ha;var Xa=ht,Ya=Jr,ti=An,ri=S;var ei=Oa,ni=Ua,oi=function(t,r,e){if(!ri(e))return!1;var n=typeof r;return!!("number"==n?Ya(e)&&ti(r,e.length):"string"==n&&r in e)&&Xa(e[r],t)},ai=function(t,r){return Qa(Ka(t,r,Ja),t+"")}((function(t,r){if(null==t)return[];var e=r.length;return e>1&&oi(t,r[0],r[1])?r=[]:e>2&&oi(r[0],r[1],r[2])&&(r=[r[0]]),ni(t,ei(r,1),[])}));function ii(t){return"[object Array]"===Object.prototype.toString.call(t)}function ui(t){if(function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)){for(let r in t)return!1;return!0}return!1}function fi(t){return"[object String]"===Object.prototype.toString.call(t)}function ci(t){return!!function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}(t)||(!!function(t){return"[object Null]"===Object.prototype.toString.call(t)}(t)||(!!ui(t)||(!!function(t){return!(!fi(t)||""!==t)}(t)||!!function(t){return!!ii(t)&&0===t.length}(t))))}function li(t){return!!ii(t)&&(0!==t.length&&(1!==t.length||!ci(t[0])))}function si(t){let r=!1;return!function(t){return!(!fi(t)||""===t)}(t)?function(t){return"[object Number]"===Object.prototype.toString.call(t)}(t)&&(r=!0):r=!isNaN(Number(t)),r}var vi=d,bi=j;var hi=function(t){return!0===t||!1===t||bi(t)&&"[object Boolean]"==vi(t)};function yi(t){return hi(t)}var pi=/\s/;var di=function(t){for(var r=t.length;r--&&pi.test(t.charAt(r)););return r},ji=/^\s+/;var gi=function(t){return t?t.slice(0,di(t)+1).replace(ji,""):t},_i=S,wi=w,mi=/^[-+]0x[0-9a-f]+$/i,xi=/^0b[01]+$/i,Oi=/^0o[0-7]+$/i,Mi=parseInt;var Ai=function(t){if("number"==typeof t)return t;if(wi(t))return NaN;if(_i(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=_i(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=gi(t);var e=xi.test(t);return e||Oi.test(t)?Mi(t.slice(2),e?2:8):mi.test(t)?NaN:+t},Si=1/0;var Pi=function(t){return t?(t=Ai(t))===Si||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};function ki(t){if(!si(t))return 0;return Pi(t)}function zi(t){let r=Object.prototype.toString.call(t);return"[object Function]"===r||"[object AsyncFunction]"===r}function Ii(t){let r,e=Object.prototype.toString.call(t);if(r="[object Promise]"===e,r)return!0;if("[object Function]"!==e)return!1;try{r="function"!=typeof t.subscribe&&"function"==typeof t.then}catch(t){}return r}let Ei=0,Fi=1,Bi=2;function Ti(t){let r=new Array(t);for(let e=0;e<t;e++)r[e]=0;return r}function Ui(t,r){let e=new Array(t),n=0;for(;n<t;)e[n]=Ti(r),n+=1;return e}function Ni(t,r,e,n,o){let a=0;for(;a<o;)e[a+n]=t[a+r],a++}function $i(t,r){let e=t[0].length,n=Ti(e);for(let o=0;o<e;++o)n[o]=t[r][o];return n}function qi(t,r){let e=t.length,n=Ti(e);for(let o=0;o<e;++o)n[o]=t[o][r];return n}function Di(t,r,e){let n=Ti(e-r+1),o=0;for(let a=r;a<=e;++a,++o)n[o]=t[a];return n}function Ci(t,r){let e=0;for(let n=0;n<t.length;++n)e+=t[n]*r[n];return e}async function Li(t,r,e,n,o,a,i,u,f){let c,l=-1,s=0,v=0,b=r+1,h=e+1,y=a,p=0,d=!1,j=!1,g=0,_=0,w=0,m=Ti(1+n),x=Ui(1+r,1+b),O=Ui(1+r,1+r),M=Ui(1+n,1+b),A=Ui(1+r,1+h),S=Ti(1+r),P=Ti(1+r),k=Ti(1+r),z=Ti(1+r),I=Ti(1+r),E=0,F=1/y;for(let t=1;t<=r;++t)x[t][b]=o[t],x[t][t]=y,O[t][t]=F;let B=b,T=!1,U="";async function N(){if(U="",E>=f&&E>0)return l=Fi,U="break",null;++E,s=await t(r,e,o,m),v=0;for(let t=1;t<=e;++t)v=Math.max(v,-m[t]);m[h]=s,m[n]=v;let a=!0;if(!T){a=!1;for(let t=1;t<=n;++t)M[t][B]=m[t];if(E<=b){if(B<=r)if(M[h][b]<=s)o[B]=x[B][b];else{x[B][b]=o[B];for(let t=1;t<=n;++t)M[t][B]=M[t][b],M[t][b]=m[t];for(let t=1;t<=B;++t){x[B][t]=-y,F=0;for(let r=t;r<=B;++r)F-=O[r][t];O[B][t]=F}}if(E<=r)return B=E,o[B]+=y,U="continue",null}T=!0}let u="";function N(){u="";let t="";function f(){if(t="",!a){let a=M[h][b]+p*M[n][b],i=b;for(let t=1;t<=r;++t)F=M[h][t]+p*M[n][t],F<a?(i=t,a=F):F===a&&0===p&&M[n][t]<M[n][i]&&(i=t);if(i<=r){for(let t=1;t<=n;++t)F=M[t][b],M[t][b]=M[t][i],M[t][i]=F;for(let t=1;t<=r;++t){F=x[t][i],x[t][i]=0,x[t][b]+=F;let e=0;for(let n=1;n<=r;++n)x[t][n]-=F,e-=O[n][t];O[i][t]=e}}let f=0;for(let t=1;t<=r;++t)for(let e=1;e<=r;++e)F=Ci(Di($i(O,t),1,r),Di(qi(x,e),1,r))-(t===e?1:0),f=Math.max(f,Math.abs(F));if(f>.1)return l=Bi,U="break",u="break",t="break",null;for(let t=1;t<=h;++t){m[t]=-M[t][b];for(let e=1;e<=r;++e)I[e]=M[t][e]+m[t];for(let e=1;e<=r;++e)A[e][t]=(t===h?-1:1)*Ci(Di(I,1,r),Di(qi(O,e),1,r))}d=!0,g=.25*y;let s=2.1*y;for(let t=1;t<=r;++t){let e=0;for(let n=1;n<=r;++n)e+=O[t][n]*O[t][n];let n=0;for(let e=1;e<=r;++e)n+=x[e][t]*x[e][t];S[t]=1/Math.sqrt(e),P[t]=Math.sqrt(n),(S[t]<g||P[t]>s)&&(d=!1)}if(!T&&!d){B=0,F=s;for(let t=1;t<=r;++t)P[t]>F&&(B=t,F=P[t]);if(0===B)for(let t=1;t<=r;++t)S[t]<F&&(B=t,F=S[t]);F=.5*y*S[B];for(let t=1;t<=r;++t)z[t]=F*O[B][t];let e=0,n=0;c=0;for(let t=1;t<=h;++t)c=Ci(Di(qi(A,t),1,r),Di(z,1,r)),t<h&&(F=M[t][b],e=Math.max(e,-c-F),n=Math.max(n,c-F));let a=p*(e-n)>2*c?-1:1;F=0;for(let t=1;t<=r;++t)z[t]=a*z[t],x[t][B]=z[t],F+=O[B][t]*z[t];for(let t=1;t<=r;++t)O[B][t]/=F;for(let t=1;t<=r;++t){if(t!==B){F=Ci(Di($i(O,t),1,r),Di(z,1,r));for(let e=1;e<=r;++e)O[t][e]-=F*O[B][e]}o[t]=x[t][b]+z[t]}return U="continue",u="break",t="break",null}if(j=function(t,r,e,n,o,a){let i=0,u=0,f=0,c=Ui(1+t,1+t),l=Ti(2+r),s=Ti(2+r),v=Ti(1+t),b=Ti(1+t),h=Ti(2+r),y=Ti(2+r),p=r,d=0;for(let r=1;r<=t;++r)c[r][r]=1,a[r]=0;let j=0,g=0;if(r>=1){for(let t=1;t<=r;++t)n[t]>g&&(g=n[t],j=t);for(let t=1;t<=r;++t)y[t]=t,s[t]=g-n[t]}let _=!0,w=!1;function m(){(!_||_&&0===g)&&(p=r+1,j=p,y[p]=p,s[p]=0),_=!1;let x=0,O=0,M=0,A=0;function S(){let _=p===r?g:-Ci(Di(a,1,t),Di(qi(e,p),1,t));if(0===O||_<x?(x=_,u=d,O=3):d>u?(u=d,O=3):--O,0===O)return null;let w=0;if(j<=d){if(j<d){let r=y[j],n=s[j],o=j;do{let r=o+1,n=y[r],a=Ci(Di(qi(c,o),1,t),Di(qi(e,n),1,t));i=Math.sqrt(a*a+l[r]*l[r]);let u=l[r]/i,f=a/i;l[r]=u*l[o],l[o]=i;for(let e=1;e<=t;++e)i=u*c[e][r]+f*c[e][o],c[e][r]=u*c[e][o]-f*c[e][r],c[e][o]=i;y[o]=n,s[o]=s[r],o=r}while(o<d);y[o]=r,s[o]=n}if(--d,p>r){i=1/l[d];for(let r=1;r<=t;++r)v[r]=i*c[r][d]}else{i=Ci(Di(v,1,t),Di(qi(c,d+1),1,t));for(let r=1;r<=t;++r)v[r]-=i*c[r][d+1]}}else{let n=y[j],o=0;for(let r=1;r<=t;++r)b[r]=e[r][n];let a=t;for(;a>d;){let r=0,e=0;for(let n=1;n<=t;++n)i=c[n][a]*b[n],r+=i,e+=Math.abs(i);let n=e+.1*Math.abs(r),u=e+.2*Math.abs(r);if((e>=n||n>=u)&&(r=0),0===o)o=r;else{let e=a+1;i=Math.sqrt(r*r+o*o);let n=r/i,u=o/i;o=i;for(let r=1;r<=t;++r)i=n*c[r][a]+u*c[r][e],c[r][e]=n*c[r][e]-u*c[r][a],c[r][a]=i}--a}if(0===o){w=-1;let o=d;do{let n=0,a=0;for(let r=1;r<=t;++r)i=c[r][o]*b[r],n+=i,a+=Math.abs(i);let u=a+.1*Math.abs(n),f=a+.2*Math.abs(n);if(a<u&&u<f){if(i=n/l[o],i>0&&y[o]<=r){let t=s[o]/i;(w<0||t<w)&&(w=t)}if(o>=2){let r=y[o];for(let n=1;n<=t;++n)b[n]-=i*e[n][r]}h[o]=i}else h[o]=0}while(--o>0);if(w<0)return null;for(let t=1;t<=d;++t)s[t]=Math.max(0,s[t]-w*h[t]);if(j<d){let r=y[j],n=s[j],o=j;do{let r=o+1,n=y[r],a=Ci(Di(qi(c,o),1,t),Di(qi(e,n),1,t));i=Math.sqrt(a*a+l[r]*l[r]);let u=l[r]/i,f=a/i;l[r]=u*l[o],l[o]=i;for(let e=1;e<=t;++e)i=u*c[e][r]+f*c[e][o],c[e][r]=u*c[e][o]-f*c[e][r],c[e][o]=i;y[o]=n,s[o]=s[r],o=r}while(o<d);y[o]=r,s[o]=n}if(i=Ci(Di(qi(c,d),1,t),Di(qi(e,n),1,t)),0===i)return null;l[d]=i,s[j]=0,s[d]=w}else++d,l[d]=o,s[j]=s[d],s[d]=0;if(y[j]=y[d],y[d]=n,p>r&&n!==p){let r=d-1,o=Ci(Di(qi(c,r),1,t),Di(qi(e,n),1,t));i=Math.sqrt(o*o+l[d]*l[d]);let a=l[d]/i,u=o/i;l[d]=a*l[r],l[r]=i;for(let e=1;e<=t;++e)i=a*c[e][d]+u*c[e][r],c[e][d]=a*c[e][r]-u*c[e][d],c[e][r]=i;y[d]=y[r],y[r]=n,i=s[r],s[r]=s[d],s[d]=i}if(p>r){i=1/l[d];for(let r=1;r<=t;++r)v[r]=i*c[r][d]}else{n=y[d],i=(Ci(Di(v,1,t),Di(qi(e,n),1,t))-1)/l[d];for(let r=1;r<=t;++r)v[r]-=i*c[r][d]}}let m=o*o,P=0,k=0;for(let r=1;r<=t;++r)Math.abs(a[r])>=1e-6*o&&(m-=a[r]*a[r]),P+=a[r]*v[r],k+=v[r]*v[r];if(m<=0)return null;if(i=Math.sqrt(k*m),Math.abs(P)>=1e-6*i&&(i=Math.sqrt(k*m+P*P)),A=m/(i+P),M=A,p===r){let t=M+.1*g;if(M>=t||t>=M+.2*g)return null;M=Math.min(M,g)}for(let r=1;r<=t;++r)b[r]=a[r]+M*v[r];if(p===r){f=g,g=0;for(let r=1;r<=d;++r){let o=y[r];i=n[o]-Ci(Di(qi(e,o),1,t),Di(b,1,t)),g=Math.max(g,i)}}let z=d;do{let r=0,n=0;for(let e=1;e<=t;++e)i=c[e][z]*b[e],r+=i,n+=Math.abs(i);let o=n+.1*Math.abs(r),a=n+.2*Math.abs(r);if((n>=o||o>=a)&&(r=0),h[z]=r/l[z],z>=2){let r=y[z];for(let n=1;n<=t;++n)b[n]-=h[z]*e[n][r]}}while(z-- >=2);p>r&&(h[d]=Math.max(0,h[d]));for(let r=1;r<=t;++r)b[r]=a[r]+M*v[r];if(p>d){for(let r=d+1;r<=p;++r){let o=y[r],a=g-n[o],u=g+Math.abs(n[o]);for(let r=1;r<=t;++r)i=e[r][o]*b[r],a+=i,u+=Math.abs(i);let f=u+.1*Math.abs(a),c=u+.2*Math.abs(a);(u>=f||f>=c)&&(a=0),h[r]=a}}w=1,j=0;for(let t=1;t<=p;++t)h[t]<0&&(i=s[t]/(s[t]-h[t]),i<w&&(w=i,j=t));i=1-w;for(let r=1;r<=t;++r)a[r]=i*a[r]+w*b[r];for(let t=1;t<=p;++t)s[t]=Math.max(0,i*s[t]+w*h[t]);p===r&&(g=f+w*(g-f)),j>0&&S()}if(S(),M===A)return w=!0,null;p===r&&m()}return m(),w}(r,e,A,m,y,z),!j){F=0;for(let t=1;t<=r;++t)F+=z[t]*z[t];if(F<.25*y*y)return T=!0,t="break",null}c=0;let v=0;m[h]=0;for(let t=1;t<=h;++t)c=m[t]-Ci(Di(qi(A,t),1,r),Di(z,1,r)),t<h&&(v=Math.max(v,c));_=M[n][b]-v;let k=_>0?c/_:0;if(p<1.5*k){p=2*k;let e=M[h][b]+p*M[n][b];for(let o=1;o<=r;++o)if(F=M[h][o]+p*M[n][o],F<e||F===e&&0===p&&M[n][o]<M[n][b])return u="continue",t="break",null}w=p*_-c;for(let t=1;t<=r;++t)o[t]=x[t][b]+z[t];return T=!0,U="continue",u="break",t="break",null}a=!1;let i=M[h][b]+p*M[n][b]-(s+p*v);0===p&&s===M[h][b]&&(w=_,i=M[n][b]-v);let f=i<=0?1:0;B=0;for(let t=1;t<=r;++t)F=Math.abs(Ci(Di($i(O,t),1,r),Di(z,1,r))),F>f&&(B=t,f=F),k[t]=F*S[t];let E=1.1*y,N=0;for(let t=1;t<=r;++t)if(k[t]>=g||k[t]>=S[t]){if(F=P[t],i>0){F=0;for(let e=1;e<=r;++e)F+=Math.pow(z[e]-x[e][t],2);F=Math.sqrt(F)}F>E&&(N=t,E=F)}if(N>0&&(B=N),0!==B){F=0;for(let t=1;t<=r;++t)x[t][B]=z[t],F+=O[B][t]*z[t];for(let t=1;t<=r;++t)O[B][t]/=F;for(let t=1;t<=r;++t)if(t!==B){F=Ci(Di($i(O,t),1,r),Di(z,1,r));for(let e=1;e<=r;++e)O[t][e]-=F*O[B][e]}for(let t=1;t<=n;++t)M[t][B]=m[t];if(i>0&&i>=.1*w)return u="continue",t="break",null}t="break"}do{f()}while("break"!==t);if(""!==U)return null;if(""!==u)return null;if(!d)return T=!1,u="continue",null;if(y<=i)return l=Ei,U="break",u="break",null;let E=0,N=0;if(y*=.5,y<=1.5*i&&(y=i),p>0){let t=0;for(let n=1;n<=h;++n){E=M[n][b],N=E;for(let t=1;t<=r;++t)E=Math.min(E,M[n][t]),N=Math.max(N,M[n][t]);n<=e&&E<.5*N&&(F=Math.max(N,0)-E,t=t<=0?F:Math.min(t,F))}0===t?p=0:N-E<p*t&&(p=(N-E)/t)}u="continue"}do{N()}while("break"!==u);if(""!==U)return null;U="continue"}do{await N()}while("break"!==U);for(let t=1;t<=r;++t)o[t]=x[t][b];return s=M[h][b],v=M[n][b],l}var Ri=d,Vi=j;var Gi=function(t){return"number"==typeof t||Vi(t)&&"[object Number]"==Ri(t)};async function Wi(t,r,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!zi(t))return Promise.reject("invalid fun");if(!si(r))return Promise.reject("xL is not a number");if(!si(e))return Promise.reject("xU is not a number");let o=jr(n,"minTolerance");si(o)||(o=1e-8),o=ki(o);let a=jr(n,"maxIterations");si(a)||(a=100),a=ki(a);let i,u,f=0;async function c(){let r=t(...arguments);return Ii(r)&&(r=await r),f++,r}let l=2/(1+Math.sqrt(5)),s=0,v=e-l*(e-r),b=r+l*(e-r),h=await c(v),y=await c(b),p=await c(r),d=await c(e),j=r,g=e;for(;++s<a&&Math.abs(e-r)>o;)y>h?(e=b,b=v,y=h,v=e-l*(e-r),h=await c(v)):(r=v,v=b,h=y,b=r+l*(e-r),y=await c(b));if(i=.5*(e+r),u=.5*(h+y),!Gi(y)||!Gi(h)||s===a)return null;let _=null,w=null;return p<u?(_=j,w=p):d<u?(_=g,w=d):(_=i,w=u),{count:f,y:w,x:_}}async function Zi(t,r){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!zi(t))return Promise.reject("invalid fun");if(!si(r))return Promise.reject("x is not a number");let n=jr(e,"delta");si(n)||(n=.1),n=ki(n);let o=jr(e,"dxR");si(o)&&"speed"===o?si(o)&&(o=ki(o)):o=2;let a=jr(e,"min");si(a)||(a=-1e20),a=ki(a);let i=jr(e,"max");si(i)||(i=1e20),i=ki(i);let u=0;async function f(){let r=t(...arguments);return Ii(r)&&(r=await r),u++,r}let c=r,l=r,s=r,v=await f(r),b=v,h=v,y=!1,p=1;for(;!y;)if(++p,y=!0,b<=v&&(s=c,v=b,c=Math.max(a,c-n),b=await f(c),y=!1),h<=v&&(s=l,v=h,l=Math.min(i,l+n),h=await f(l),y=!1),v=Math.min(v,b,h),(b===v&&c===a||h===v&&l===i)&&(y=!0),Gi(o)?n*=o:"speed"===o&&(n*=p<4?2:Math.exp(.5*p)),!isFinite(n))return null;return{count:u,bounded:y,min:c,max:l,guess:s,fMin:b,fMax:h,fGuess:v}}async function Hi(t,r){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!zi(t))return Promise.reject("invalid fun");if(!si(r))return Promise.reject("x is not a number");let n=jr(e,"min");si(n)&&(n=ki(n));let o=jr(e,"max");si(o)&&(o=ki(o));let a=0;if(!Gi(o)||!Gi(n)){let i=await Zi(t,r,e);if(n=jr(i,"min"),o=jr(i,"max"),!Gi(n)||!Gi(o))return Promise.reject("can not find bounds by setpBracket");a+=i.count}let i=await Wi(t,n,o,e);return a+=i.count,i.count=a,i}var Ji=function(t,r){for(var e=-1,n=null==t?0:t.length;++e<n&&!1!==r(t[e],e,t););return t},Ki=La;var Qi=function(t,r,e){"__proto__"==r&&Ki?Ki(t,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[r]=e},Xi=Qi,Yi=ht,tu=Object.prototype.hasOwnProperty;var ru=function(t,r,e){var n=t[r];tu.call(t,r)&&Yi(n,e)&&(void 0!==e||r in t)||Xi(t,r,e)},eu=ru,nu=Qi;var ou=function(t,r,e,n){var o=!e;e||(e={});for(var a=-1,i=r.length;++a<i;){var u=r[a],f=n?n(e[u],t[u],u,e,t):void 0;void 0===f&&(f=t[u]),o?nu(e,u,f):eu(e,u,f)}return e},au=ou,iu=Jn;var uu=function(t,r){return t&&au(r,iu(r),t)};var fu=S,cu=_r,lu=function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r},su=Object.prototype.hasOwnProperty;var vu=Gn,bu=function(t){if(!fu(t))return lu(t);var r=cu(t),e=[];for(var n in t)("constructor"!=n||!r&&su.call(t,n))&&e.push(n);return e},hu=Jr;var yu=function(t){return hu(t)?vu(t,!0):bu(t)},pu=ou,du=yu;var ju=function(t,r){return t&&pu(r,du(r),t)},gu={};!function(t,r){var e=a,n=r&&!r.nodeType&&r,o=n&&t&&!t.nodeType&&t,i=o&&o.exports===n?e.Buffer:void 0,u=i?i.allocUnsafe:void 0;t.exports=function(t,r){if(r)return t.slice();var e=t.length,n=u?u(e):new t.constructor(e);return t.copy(n),n}}({get exports(){return gu},set exports(t){gu=t}},gu);var _u=function(t,r){var e=-1,n=t.length;for(r||(r=Array(n));++e<n;)r[e]=t[e];return r},wu=ou,mu=vn;var xu=function(t,r){return wu(t,mu(t),r)},Ou=wr(Object.getPrototypeOf,Object),Mu=rn,Au=Ou,Su=vn,Pu=un,ku=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)Mu(r,Su(t)),t=Au(t);return r}:Pu,zu=ou,Iu=ku;var Eu=function(t,r){return zu(t,Iu(t),r)},Fu=on,Bu=ku,Tu=yu;var Uu=function(t){return Fu(t,Tu,Bu)},Nu=Object.prototype.hasOwnProperty;var $u=function(t){var r=t.length,e=new t.constructor(r);return r&&"string"==typeof t[0]&&Nu.call(t,"index")&&(e.index=t.index,e.input=t.input),e},qu=Ge;var Du=function(t){var r=new t.constructor(t.byteLength);return new qu(r).set(new qu(t)),r},Cu=Du;var Lu=function(t,r){var e=r?Cu(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)},Ru=/\w*$/;var Vu=function(t){var r=new t.constructor(t.source,Ru.exec(t));return r.lastIndex=t.lastIndex,r},Gu=i?i.prototype:void 0,Wu=Gu?Gu.valueOf:void 0;var Zu=Du;var Hu=Du,Ju=Lu,Ku=Vu,Qu=function(t){return Wu?Object(Wu.call(t)):{}},Xu=function(t,r){var e=r?Zu(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)};var Yu=function(t,r,e){var n=t.constructor;switch(r){case"[object ArrayBuffer]":return Hu(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Ju(t,e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Xu(t,e);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Ku(t);case"[object Symbol]":return Qu(t)}},tf=S,rf=Object.create,ef=function(){function t(){}return function(r){if(!tf(r))return{};if(rf)return rf(r);t.prototype=r;var e=new t;return t.prototype=void 0,e}}(),nf=Ou,of=_r;var af=function(t){return"function"!=typeof t.constructor||of(t)?{}:ef(nf(t))},uf=Gr,ff=j;var cf=function(t){return ff(t)&&"[object Map]"==uf(t)},lf=En,sf=Fn&&Fn.isMap,vf=sf?lf(sf):cf,bf=Gr,hf=j;var yf=function(t){return hf(t)&&"[object Set]"==bf(t)},pf=En,df=Fn&&Fn.isSet,jf=df?pf(df):yf,gf=Ue,_f=Ji,wf=ru,mf=uu,xf=ju,Of=gu,Mf=_u,Af=xu,Sf=Eu,Pf=Yn,kf=Uu,zf=Gr,If=$u,Ef=Yu,Ff=af,Bf=r,Tf=xn,Uf=vf,Nf=S,$f=jf,qf=Jn,Df=yu,Cf="[object Arguments]",Lf="[object Function]",Rf="[object Object]",Vf={};Vf[Cf]=Vf["[object Array]"]=Vf["[object ArrayBuffer]"]=Vf["[object DataView]"]=Vf["[object Boolean]"]=Vf["[object Date]"]=Vf["[object Float32Array]"]=Vf["[object Float64Array]"]=Vf["[object Int8Array]"]=Vf["[object Int16Array]"]=Vf["[object Int32Array]"]=Vf["[object Map]"]=Vf["[object Number]"]=Vf[Rf]=Vf["[object RegExp]"]=Vf["[object Set]"]=Vf["[object String]"]=Vf["[object Symbol]"]=Vf["[object Uint8Array]"]=Vf["[object Uint8ClampedArray]"]=Vf["[object Uint16Array]"]=Vf["[object Uint32Array]"]=!0,Vf["[object Error]"]=Vf[Lf]=Vf["[object WeakMap]"]=!1;var Gf=function t(r,e,n,o,a,i){var u,f=1&e,c=2&e,l=4&e;if(n&&(u=a?n(r,o,a,i):n(r)),void 0!==u)return u;if(!Nf(r))return r;var s=Bf(r);if(s){if(u=If(r),!f)return Mf(r,u)}else{var v=zf(r),b=v==Lf||"[object GeneratorFunction]"==v;if(Tf(r))return Of(r,f);if(v==Rf||v==Cf||b&&!a){if(u=c||b?{}:Ff(r),!f)return c?Sf(r,xf(u,r)):Af(r,mf(u,r))}else{if(!Vf[v])return a?r:{};u=Ef(r,v,f)}}i||(i=new gf);var h=i.get(r);if(h)return h;i.set(r,u),$f(r)?r.forEach((function(o){u.add(t(o,e,n,o,r,i))})):Uf(r)&&r.forEach((function(o,a){u.set(a,t(o,e,n,a,r,i))}));var y=s?void 0:(l?c?kf:Pf:c?Df:qf)(r);return _f(y||r,(function(o,a){y&&(o=r[a=o]),wf(u,a,t(o,e,n,a,r,i))})),u},Wf=Gf;var Zf=function(t){return Wf(t,5)};function Hf(t,r,e,n,o){for(let a=0;a<t.length;++a)t[a]=r*e[a]+n*o[a]}function Jf(t,r){return t.y-r.y}let Kf={arrBinarySearch:function(t,r){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!li(t))return null;let n=jr(e,"sorted");yi(n)||(n=!1),t=ja(t,si),t=va(t,ki),t=va(t,((t,r)=>({v:t,k:r}))),n||(t=ai(t,"v"));let o=0,a=Oe(t)-1;for(;o<=a;){let e=Math.floor((o+a)/2);if(t[e].v===r)return{ind:t[e].k,indSorted:e,value:r};r<t[e].v?a=e-1:o=e+1}return null},arrBinarySearchClosest:function(t,r){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!li(t))return null;let n=jr(e,"sorted");yi(n)||(n=!1),t=ja(t,si),t=va(t,ki),t=va(t,((t,r)=>({v:t,k:r}))),n||(t=ai(t,"v"));let o={ind:null,indSorted:null,value:null,diff:1e20},a=0,i=Oe(t)-1;for(;a<=i;){let e=Math.floor((a+i)/2);if(t[e].v===r){o={ind:t[e].k,indSorted:e,value:r,diff:0};break}let n=Math.abs(r-t[e].v);o.diff>n&&(o={ind:t[e].k,indSorted:e,value:t[e].v,diff:n}),r<t[e].v?i=e-1:a=e+1}return o},binarySearch:function(t,r,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!zi(t))throw new Error("invalid fun");if(!si(r))throw new Error("xMin is not a number");if(r=ki(r),!si(e))throw new Error("xMax is not a number");e=ki(e);let o=jr(n,"delta");si(o)||(o=.1),o=ki(o);let a=jr(n,"maxIterations");si(a)||(a=100),a=ki(a);let i=t(r),u=t(e),f=(r+e)/2,c=t(f),l=0,s=null;for(;;){if(l++,l>a)return null;if(i<=u&&i<=c){s={y:i,x:r};break}if(u<=i&&u<=c){s={y:u,x:e};break}u>=i?(u=c,u=t(e=f)):(i=c,i=t(r=f)),f=(r+e)/2,c=t(f)}return s},cobyla:async function(t,r){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!zi(t))return Promise.reject("invalid fun");if(!li(r))return Promise.reject("params is not an effective array");let n=Oe(r),o=jr(e,"maxIterations");si(o)||(o=2e3*n),o=ki(o);let a=jr(e,"rhobeg");si(a)||(a=10),a=ki(a);let i=jr(e,"rhoend");si(i)||(i=1e-5),i=ki(i);let u=o,f=0,c=null,l=null,s=new Array(n);for(let t=0;t<n;t++)s[t]=r[t];let v=await async function(t,r,e,n,o,a,i,u){let f=e+2,c=Ti(r+1);c[0]=0,Ni(n,0,c,1,r);let l=Li((async function(r,e,n,o){let a=Ti(r);Ni(n,1,a,0,r);let i=Ti(e),u=await t(r,e,a,i);return Ni(i,0,o,1,e),u}),r,e,f,c,o,a,0,u);return Ni(c,1,n,0,r),l}((async function(r,e,n,o){let a=t(n);return Ii(a)&&(a=await a),f++,(null===c||c>a)&&(c=a,l=n),a}),n,0,s,a,i,0,u);return v!==Ei?v===Fi?Promise.reject("maxIterations error"):v===Bi?Promise.reject("rounding error"):Promise.reject("unexpected error"):{count:f,y:c,x:l}},goldenSection:Wi,goldenSectionLiberate:Hi,limitBFGS:async function(t,r){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!zi(t))return Promise.reject("invalid fun");if(!li(r))return Promise.reject("params is not an effective array");let n=jr(e,"maxIterations");si(n)||(n=200),n=ki(n);let o=jr(e,"minTolerance");si(o)||(o=1e-6),o=ki(o);let a=jr(e,"delta");si(a)||(a=1e-5),a=ki(a);let i=Oe(r),u=Zf(r),f=0;async function c(){let r=t(...arguments);return Ii(r)&&(r=await r),f++,r}let l=function(t,r){async function e(){let r=t(...arguments);return Ii(r)&&(r=await r),r}return async function(t){let n,o,a,i=r,u=[],f=[],c=t.length;for(o=0;o<c;o++){for(a=0;a<c;a++)u[a]=o===a?t[a]+i:t[a];n=await e(u)-await e(t),f[o]=n/i}return f}}(c,a),s=await l(u),v=function(t){let r,e,n=[];for(r=0;r<t;r++){for(n[r]=[],e=0;e<t;e++)n[r][e]=0;n[r][r]=1}return n}(i),b=[],h=0,y=!1,p=-1,d=1e20,j=null;async function g(){let t,r,e=i,n=0;for(t=0;t<e;t++)n+=s[t]*s[t];if(n=Math.sqrt(n),!Gi(n))return Promise.reject("the norm of the gradient was unconverged");if(n<o)return y=!0,Promise.resolve();for(p++,t=0;t<e;t++)for(b[t]=0,r=0;r<e;r++)b[t]+=-v[t][r]*s[r];let a=await Hi((async function(r){let n=[];for(t=0;t<e;t++)n[t]=u[t]+r*b[t];let o=await c(n);return d>o&&(d=o,j=n),o}),0);if(h=jr(a,"x"),!Gi(h))return Promise.reject("can not find approximate stepsize");let f=[];for(t=0;t<e;t++)f[t]=h*b[t],u[t]+=f[t];let g=await l(u),_=[];for(t=0;t<e;t++)_[t]=g[t]-s[t];s=g;let w=0;for(t=0;t<e;t++)w+=f[t]*_[t];let m=[];for(t=0;t<e;t++)for(m[t]=0,r=0;r<e;r++)m[t]+=v[t][r]*_[r];let x=0;for(t=0;t<e;t++)x+=_[t]*m[t];for(x=(w+x)/(w*w),t=0;t<e;t++)for(r=0;r<e;r++)v[t][r]+=x*f[t]*f[r]-(m[t]*f[r]+f[t]*m[r])/w}for(;!y;){if(p>n)return Promise.reject(`iterator > maxIterations[${n}]`);await g()}return{count:f,y:d,x:j}},nelderMead:async function(t,r){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!zi(t))return Promise.reject("invalid fun");if(!li(r))return Promise.reject("params is not an effective array");let n=Oe(r),o=jr(e,"maxIterations");si(o)||(o=200*n),o=ki(o);let a=jr(e,"nonZeroDelta");si(a)||(a=1.05),a=ki(a);let i=jr(e,"delta");si(i)||(i=.001),i=ki(i);let u=jr(e,"minErrorDelta");si(u)||(u=1e-6),u=ki(u);let f=jr(e,"minTolerance");si(f)||(f=1e-5),f=ki(f);let c=jr(e,"rho");si(c)||(c=1),c=ki(c);let l=jr(e,"chi");si(l)||(l=2),l=ki(l);let s=jr(e,"psi");si(s)||(s=-.5),s=ki(s);let v=jr(e,"sigma");si(v)||(v=.5),v=ki(v);let b=0;async function h(){let r=t(...arguments);return Ii(r)&&(r=await r),b++,r}let y=new Array(n+1);y[0]=r,y[0].y=await h(r),y[0].id=0;for(let t=0;t<n;++t){let e=r.slice();e[t]=e[t]?e[t]*a:i,y[t+1]=e,y[t+1].y=await h(e),y[t+1].id=t+1}let p,d=t=>{for(let r=0;r<t.length;r++)y[n][r]=t[r];y[n].y=t.y},j=r.slice(),g=r.slice(),_=r.slice(),w=r.slice();for(let t=0;t<o;++t){y.sort(Jf),p=0;for(let t=0;t<n;++t)p=Math.max(p,Math.abs(y[0][t]-y[1][t]));if(Math.abs(y[0].y-y[n].y)<u&&p<f)break;for(let t=0;t<n;++t){j[t]=0;for(let r=0;r<n;++r)j[t]+=y[r][t];j[t]/=n}let t=y[n];if(Hf(g,1+c,j,-c,t),g.y=await h(g),g.y<y[0].y)Hf(w,1+l,j,-l,t),w.y=await h(w),w.y<g.y?d(w):d(g);else if(g.y>=y[n-1].y){let r=!1;if(g.y>t.y?(Hf(_,1+s,j,-s,t),_.y=await h(_),_.y<t.y?d(_):r=!0):(Hf(_,1-s*c,j,s*c,t),_.y=await h(_),_.y<g.y?d(_):r=!0),r){if(v>=1)break;for(let t=1;t<y.length;++t)Hf(y[t],1-v,y[0],v,y[t]),y[t].y=await h(y[t])}}else d(g)}y.sort(Jf);let m=[],x=y[0];for(let t=0;t<n;t++)m.push(x[t]);return{count:b,y:y[0].y,x:m}},setpBracket:Zi};return Kf}));
//# sourceMappingURL=w-optimization.umd.js.map
